{"remainingRequest":"D:\\Development\\AngularProject\\appsecurite6\\node_modules\\@angular-devkit\\build-optimizer\\src\\build-optimizer\\webpack-loader.js??ref--8-1!D:\\Development\\AngularProject\\appsecurite6\\node_modules\\pdfjs-dist\\web\\pdf_viewer.js","dependencies":[{"path":"D:\\Development\\AngularProject\\appsecurite6\\node_modules\\pdfjs-dist\\web\\pdf_viewer.js","mtime":1563198749391},{"path":"D:\\Development\\AngularProject\\appsecurite6\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1563198691178},{"path":"D:\\Development\\AngularProject\\appsecurite6\\node_modules\\@angular-devkit\\build-optimizer\\src\\build-optimizer\\webpack-loader.js","mtime":1563198608965}],"contextDependencies":[],"result":["/**\r\n * @licstart The following is the entire license notice for the\r\n * Javascript code in this page\r\n *\r\n * Copyright 2017 Mozilla Foundation\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *     http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n *\r\n * @licend The above is the entire license notice for the\r\n * Javascript code in this page\r\n */\r\n\r\n(function webpackUniversalModuleDefinition(root, factory) {\r\n\tif(typeof exports === 'object' && typeof module === 'object')\r\n\t\tmodule.exports = factory();\r\n\telse if(typeof define === 'function' && define.amd)\r\n\t\tdefine(\"pdfjs-dist/web/pdf_viewer\", [], factory);\r\n\telse if(typeof exports === 'object')\r\n\t\texports[\"pdfjs-dist/web/pdf_viewer\"] = factory();\r\n\telse\r\n\t\troot[\"pdfjs-dist/web/pdf_viewer\"] = root.pdfjsViewer = factory();\r\n})(typeof self !== 'undefined' ? self : this, function() {\r\nreturn /******/ (function(modules) { // webpackBootstrap\r\n/******/ \t// The module cache\r\n/******/ \tvar installedModules = {};\r\n/******/\r\n/******/ \t// The require function\r\n/******/ \tfunction __w_pdfjs_require__(moduleId) {\r\n/******/\r\n/******/ \t\t// Check if module is in cache\r\n/******/ \t\tif(installedModules[moduleId]) {\r\n/******/ \t\t\treturn installedModules[moduleId].exports;\r\n/******/ \t\t}\r\n/******/ \t\t// Create a new module (and put it into the cache)\r\n/******/ \t\tvar module = installedModules[moduleId] = {\r\n/******/ \t\t\ti: moduleId,\r\n/******/ \t\t\tl: false,\r\n/******/ \t\t\texports: {}\r\n/******/ \t\t};\r\n/******/\r\n/******/ \t\t// Execute the module function\r\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __w_pdfjs_require__);\r\n/******/\r\n/******/ \t\t// Flag the module as loaded\r\n/******/ \t\tmodule.l = true;\r\n/******/\r\n/******/ \t\t// Return the exports of the module\r\n/******/ \t\treturn module.exports;\r\n/******/ \t}\r\n/******/\r\n/******/\r\n/******/ \t// expose the modules object (__webpack_modules__)\r\n/******/ \t__w_pdfjs_require__.m = modules;\r\n/******/\r\n/******/ \t// expose the module cache\r\n/******/ \t__w_pdfjs_require__.c = installedModules;\r\n/******/\r\n/******/ \t// define getter function for harmony exports\r\n/******/ \t__w_pdfjs_require__.d = function(exports, name, getter) {\r\n/******/ \t\tif(!__w_pdfjs_require__.o(exports, name)) {\r\n/******/ \t\t\tObject.defineProperty(exports, name, {\r\n/******/ \t\t\t\tconfigurable: false,\r\n/******/ \t\t\t\tenumerable: true,\r\n/******/ \t\t\t\tget: getter\r\n/******/ \t\t\t});\r\n/******/ \t\t}\r\n/******/ \t};\r\n/******/\r\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\r\n/******/ \t__w_pdfjs_require__.n = function(module) {\r\n/******/ \t\tvar getter = module && module.__esModule ?\r\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\r\n/******/ \t\t\tfunction getModuleExports() { return module; };\r\n/******/ \t\t__w_pdfjs_require__.d(getter, 'a', getter);\r\n/******/ \t\treturn getter;\r\n/******/ \t};\r\n/******/\r\n/******/ \t// Object.prototype.hasOwnProperty.call\r\n/******/ \t__w_pdfjs_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\r\n/******/\r\n/******/ \t// __webpack_public_path__\r\n/******/ \t__w_pdfjs_require__.p = \"\";\r\n/******/\r\n/******/ \t// Load entry module and return exports\r\n/******/ \treturn __w_pdfjs_require__(__w_pdfjs_require__.s = 9);\r\n/******/ })\r\n/************************************************************************/\r\n/******/ ([\r\n/* 0 */\r\n/***/ (function(module, exports, __w_pdfjs_require__) {\r\n\r\n\"use strict\";\r\n\r\n\r\nObject.defineProperty(exports, \"__esModule\", {\r\n  value: true\r\n});\r\nexports.waitOnEventOrTimeout = exports.WaitOnType = exports.animationStarted = exports.normalizeWheelEventDelta = exports.binarySearchFirstItem = exports.watchScroll = exports.scrollIntoView = exports.getOutputScale = exports.approximateFraction = exports.getPageSizeInches = exports.roundToDivide = exports.getVisibleElements = exports.parseQueryString = exports.noContextMenuHandler = exports.getPDFFileNameFromURL = exports.ProgressBar = exports.EventBus = exports.NullL10n = exports.TextLayerMode = exports.RendererType = exports.PresentationModeState = exports.cloneObj = exports.isFileSchema = exports.isPortraitOrientation = exports.isValidRotation = exports.VERTICAL_PADDING = exports.SCROLLBAR_PADDING = exports.MAX_AUTO_SCALE = exports.UNKNOWN_SCALE = exports.MAX_SCALE = exports.MIN_SCALE = exports.DEFAULT_SCALE = exports.DEFAULT_SCALE_VALUE = exports.CSS_UNITS = undefined;\r\n\r\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\r\n\r\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\r\n\r\nvar _slicedToArray = function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"]) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); } }; }();\r\n\r\nvar _pdfjsLib = __w_pdfjs_require__(1);\r\n\r\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\r\n\r\nvar CSS_UNITS = 96.0 / 72.0;\r\nvar DEFAULT_SCALE_VALUE = 'auto';\r\nvar DEFAULT_SCALE = 1.0;\r\nvar MIN_SCALE = 0.10;\r\nvar MAX_SCALE = 10.0;\r\nvar UNKNOWN_SCALE = 0;\r\nvar MAX_AUTO_SCALE = 1.25;\r\nvar SCROLLBAR_PADDING = 40;\r\nvar VERTICAL_PADDING = 5;\r\nvar PresentationModeState = {\r\n  UNKNOWN: 0,\r\n  NORMAL: 1,\r\n  CHANGING: 2,\r\n  FULLSCREEN: 3\r\n};\r\nvar RendererType = {\r\n  CANVAS: 'canvas',\r\n  SVG: 'svg'\r\n};\r\nvar TextLayerMode = {\r\n  DISABLE: 0,\r\n  ENABLE: 1,\r\n  ENABLE_ENHANCE: 2\r\n};\r\nfunction formatL10nValue(text, args) {\r\n  if (!args) {\r\n    return text;\r\n  }\r\n  return text.replace(/\\{\\{\\s*(\\w+)\\s*\\}\\}/g, function (all, name) {\r\n    return name in args ? args[name] : '{{' + name + '}}';\r\n  });\r\n}\r\nvar NullL10n = {\r\n  getLanguage: function getLanguage() {\r\n    return Promise.resolve('en-us');\r\n  },\r\n  getDirection: function getDirection() {\r\n    return Promise.resolve('ltr');\r\n  },\r\n  get: function get(property, args, fallback) {\r\n    return Promise.resolve(formatL10nValue(fallback, args));\r\n  },\r\n  translate: function translate(element) {\r\n    return Promise.resolve();\r\n  }\r\n};\r\nfunction getOutputScale(ctx) {\r\n  var devicePixelRatio = window.devicePixelRatio || 1;\r\n  var backingStoreRatio = ctx.webkitBackingStorePixelRatio || ctx.mozBackingStorePixelRatio || ctx.msBackingStorePixelRatio || ctx.oBackingStorePixelRatio || ctx.backingStorePixelRatio || 1;\r\n  var pixelRatio = devicePixelRatio / backingStoreRatio;\r\n  return {\r\n    sx: pixelRatio,\r\n    sy: pixelRatio,\r\n    scaled: pixelRatio !== 1\r\n  };\r\n}\r\nfunction scrollIntoView(element, spot) {\r\n  var skipOverflowHiddenElements = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\r\n\r\n  var parent = element.offsetParent;\r\n  if (!parent) {\r\n    console.error('offsetParent is not set -- cannot scroll');\r\n    return;\r\n  }\r\n  var offsetY = element.offsetTop + element.clientTop;\r\n  var offsetX = element.offsetLeft + element.clientLeft;\r\n  while (parent.clientHeight === parent.scrollHeight || skipOverflowHiddenElements && getComputedStyle(parent).overflow === 'hidden') {\r\n    if (parent.dataset._scaleY) {\r\n      offsetY /= parent.dataset._scaleY;\r\n      offsetX /= parent.dataset._scaleX;\r\n    }\r\n    offsetY += parent.offsetTop;\r\n    offsetX += parent.offsetLeft;\r\n    parent = parent.offsetParent;\r\n    if (!parent) {\r\n      return;\r\n    }\r\n  }\r\n  if (spot) {\r\n    if (spot.top !== undefined) {\r\n      offsetY += spot.top;\r\n    }\r\n    if (spot.left !== undefined) {\r\n      offsetX += spot.left;\r\n      parent.scrollLeft = offsetX;\r\n    }\r\n  }\r\n  parent.scrollTop = offsetY;\r\n}\r\nfunction watchScroll(viewAreaElement, callback) {\r\n  var debounceScroll = function debounceScroll(evt) {\r\n    if (rAF) {\r\n      return;\r\n    }\r\n    rAF = window.requestAnimationFrame(function viewAreaElementScrolled() {\r\n      rAF = null;\r\n      var currentY = viewAreaElement.scrollTop;\r\n      var lastY = state.lastY;\r\n      if (currentY !== lastY) {\r\n        state.down = currentY > lastY;\r\n      }\r\n      state.lastY = currentY;\r\n      callback(state);\r\n    });\r\n  };\r\n  var state = {\r\n    down: true,\r\n    lastY: viewAreaElement.scrollTop,\r\n    _eventHandler: debounceScroll\r\n  };\r\n  var rAF = null;\r\n  viewAreaElement.addEventListener('scroll', debounceScroll, true);\r\n  return state;\r\n}\r\nfunction parseQueryString(query) {\r\n  var parts = query.split('&');\r\n  var params = Object.create(null);\r\n  for (var i = 0, ii = parts.length; i < ii; ++i) {\r\n    var param = parts[i].split('=');\r\n    var key = param[0].toLowerCase();\r\n    var value = param.length > 1 ? param[1] : null;\r\n    params[decodeURIComponent(key)] = decodeURIComponent(value);\r\n  }\r\n  return params;\r\n}\r\nfunction binarySearchFirstItem(items, condition) {\r\n  var minIndex = 0;\r\n  var maxIndex = items.length - 1;\r\n  if (items.length === 0 || !condition(items[maxIndex])) {\r\n    return items.length;\r\n  }\r\n  if (condition(items[minIndex])) {\r\n    return minIndex;\r\n  }\r\n  while (minIndex < maxIndex) {\r\n    var currentIndex = minIndex + maxIndex >> 1;\r\n    var currentItem = items[currentIndex];\r\n    if (condition(currentItem)) {\r\n      maxIndex = currentIndex;\r\n    } else {\r\n      minIndex = currentIndex + 1;\r\n    }\r\n  }\r\n  return minIndex;\r\n}\r\nfunction approximateFraction(x) {\r\n  if (Math.floor(x) === x) {\r\n    return [x, 1];\r\n  }\r\n  var xinv = 1 / x;\r\n  var limit = 8;\r\n  if (xinv > limit) {\r\n    return [1, limit];\r\n  } else if (Math.floor(xinv) === xinv) {\r\n    return [1, xinv];\r\n  }\r\n  var x_ = x > 1 ? xinv : x;\r\n  var a = 0,\r\n      b = 1,\r\n      c = 1,\r\n      d = 1;\r\n  while (true) {\r\n    var p = a + c,\r\n        q = b + d;\r\n    if (q > limit) {\r\n      break;\r\n    }\r\n    if (x_ <= p / q) {\r\n      c = p;\r\n      d = q;\r\n    } else {\r\n      a = p;\r\n      b = q;\r\n    }\r\n  }\r\n  var result = void 0;\r\n  if (x_ - a / b < c / d - x_) {\r\n    result = x_ === x ? [a, b] : [b, a];\r\n  } else {\r\n    result = x_ === x ? [c, d] : [d, c];\r\n  }\r\n  return result;\r\n}\r\nfunction roundToDivide(x, div) {\r\n  var r = x % div;\r\n  return r === 0 ? x : Math.round(x - r + div);\r\n}\r\nfunction getPageSizeInches(_ref) {\r\n  var view = _ref.view,\r\n      userUnit = _ref.userUnit,\r\n      rotate = _ref.rotate;\r\n\r\n  var _view = _slicedToArray(view, 4),\r\n      x1 = _view[0],\r\n      y1 = _view[1],\r\n      x2 = _view[2],\r\n      y2 = _view[3];\r\n\r\n  var changeOrientation = rotate % 180 !== 0;\r\n  var width = (x2 - x1) / 72 * userUnit;\r\n  var height = (y2 - y1) / 72 * userUnit;\r\n  return {\r\n    width: changeOrientation ? height : width,\r\n    height: changeOrientation ? width : height\r\n  };\r\n}\r\nfunction getVisibleElements(scrollEl, views) {\r\n  var sortByVisibility = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\r\n\r\n  var top = scrollEl.scrollTop,\r\n      bottom = top + scrollEl.clientHeight;\r\n  var left = scrollEl.scrollLeft,\r\n      right = left + scrollEl.clientWidth;\r\n  function isElementBottomBelowViewTop(view) {\r\n    var element = view.div;\r\n    var elementBottom = element.offsetTop + element.clientTop + element.clientHeight;\r\n    return elementBottom > top;\r\n  }\r\n  var visible = [],\r\n      view = void 0,\r\n      element = void 0;\r\n  var currentHeight = void 0,\r\n      viewHeight = void 0,\r\n      hiddenHeight = void 0,\r\n      percentHeight = void 0;\r\n  var currentWidth = void 0,\r\n      viewWidth = void 0;\r\n  var firstVisibleElementInd = views.length === 0 ? 0 : binarySearchFirstItem(views, isElementBottomBelowViewTop);\r\n  for (var i = firstVisibleElementInd, ii = views.length; i < ii; i++) {\r\n    view = views[i];\r\n    element = view.div;\r\n    currentHeight = element.offsetTop + element.clientTop;\r\n    viewHeight = element.clientHeight;\r\n    if (currentHeight > bottom) {\r\n      break;\r\n    }\r\n    currentWidth = element.offsetLeft + element.clientLeft;\r\n    viewWidth = element.clientWidth;\r\n    if (currentWidth + viewWidth < left || currentWidth > right) {\r\n      continue;\r\n    }\r\n    hiddenHeight = Math.max(0, top - currentHeight) + Math.max(0, currentHeight + viewHeight - bottom);\r\n    percentHeight = (viewHeight - hiddenHeight) * 100 / viewHeight | 0;\r\n    visible.push({\r\n      id: view.id,\r\n      x: currentWidth,\r\n      y: currentHeight,\r\n      view: view,\r\n      percent: percentHeight\r\n    });\r\n  }\r\n  var first = visible[0];\r\n  var last = visible[visible.length - 1];\r\n  if (sortByVisibility) {\r\n    visible.sort(function (a, b) {\r\n      var pc = a.percent - b.percent;\r\n      if (Math.abs(pc) > 0.001) {\r\n        return -pc;\r\n      }\r\n      return a.id - b.id;\r\n    });\r\n  }\r\n  return {\r\n    first: first,\r\n    last: last,\r\n    views: visible\r\n  };\r\n}\r\nfunction noContextMenuHandler(evt) {\r\n  evt.preventDefault();\r\n}\r\nfunction isFileSchema(url) {\r\n  var i = 0,\r\n      ii = url.length;\r\n  while (i < ii && url[i].trim() === '') {\r\n    i++;\r\n  }\r\n  return url.substr(i, 7).toLowerCase() === 'file://';\r\n}\r\nfunction isDataSchema(url) {\r\n  var i = 0,\r\n      ii = url.length;\r\n  while (i < ii && url[i].trim() === '') {\r\n    i++;\r\n  }\r\n  return url.substr(i, 5).toLowerCase() === 'data:';\r\n}\r\nfunction getPDFFileNameFromURL(url) {\r\n  var defaultFilename = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'document.pdf';\r\n\r\n  if (isDataSchema(url)) {\r\n    console.warn('getPDFFileNameFromURL: ' + 'ignoring \"data:\" URL for performance reasons.');\r\n    return defaultFilename;\r\n  }\r\n  var reURI = /^(?:(?:[^:]+:)?\\/\\/[^\\/]+)?([^?#]*)(\\?[^#]*)?(#.*)?$/;\r\n  var reFilename = /[^\\/?#=]+\\.pdf\\b(?!.*\\.pdf\\b)/i;\r\n  var splitURI = reURI.exec(url);\r\n  var suggestedFilename = reFilename.exec(splitURI[1]) || reFilename.exec(splitURI[2]) || reFilename.exec(splitURI[3]);\r\n  if (suggestedFilename) {\r\n    suggestedFilename = suggestedFilename[0];\r\n    if (suggestedFilename.includes('%')) {\r\n      try {\r\n        suggestedFilename = reFilename.exec(decodeURIComponent(suggestedFilename))[0];\r\n      } catch (ex) {}\r\n    }\r\n  }\r\n  return suggestedFilename || defaultFilename;\r\n}\r\nfunction normalizeWheelEventDelta(evt) {\r\n  var delta = Math.sqrt(evt.deltaX * evt.deltaX + evt.deltaY * evt.deltaY);\r\n  var angle = Math.atan2(evt.deltaY, evt.deltaX);\r\n  if (-0.25 * Math.PI < angle && angle < 0.75 * Math.PI) {\r\n    delta = -delta;\r\n  }\r\n  var MOUSE_DOM_DELTA_PIXEL_MODE = 0;\r\n  var MOUSE_DOM_DELTA_LINE_MODE = 1;\r\n  var MOUSE_PIXELS_PER_LINE = 30;\r\n  var MOUSE_LINES_PER_PAGE = 30;\r\n  if (evt.deltaMode === MOUSE_DOM_DELTA_PIXEL_MODE) {\r\n    delta /= MOUSE_PIXELS_PER_LINE * MOUSE_LINES_PER_PAGE;\r\n  } else if (evt.deltaMode === MOUSE_DOM_DELTA_LINE_MODE) {\r\n    delta /= MOUSE_LINES_PER_PAGE;\r\n  }\r\n  return delta;\r\n}\r\nfunction isValidRotation(angle) {\r\n  return Number.isInteger(angle) && angle % 90 === 0;\r\n}\r\nfunction isPortraitOrientation(size) {\r\n  return size.width <= size.height;\r\n}\r\nfunction cloneObj(obj) {\r\n  var result = Object.create(null);\r\n  for (var i in obj) {\r\n    if (Object.prototype.hasOwnProperty.call(obj, i)) {\r\n      result[i] = obj[i];\r\n    }\r\n  }\r\n  return result;\r\n}\r\nvar WaitOnType = {\r\n  EVENT: 'event',\r\n  TIMEOUT: 'timeout'\r\n};\r\nfunction waitOnEventOrTimeout(_ref2) {\r\n  var target = _ref2.target,\r\n      name = _ref2.name,\r\n      _ref2$delay = _ref2.delay,\r\n      delay = _ref2$delay === undefined ? 0 : _ref2$delay;\r\n\r\n  if ((typeof target === 'undefined' ? 'undefined' : _typeof(target)) !== 'object' || !(name && typeof name === 'string') || !(Number.isInteger(delay) && delay >= 0)) {\r\n    return Promise.reject(new Error('waitOnEventOrTimeout - invalid parameters.'));\r\n  }\r\n  var capability = (0, _pdfjsLib.createPromiseCapability)();\r\n  function handler(type) {\r\n    if (target instanceof EventBus) {\r\n      target.off(name, eventHandler);\r\n    } else {\r\n      target.removeEventListener(name, eventHandler);\r\n    }\r\n    if (timeout) {\r\n      clearTimeout(timeout);\r\n    }\r\n    capability.resolve(type);\r\n  }\r\n  var eventHandler = handler.bind(null, WaitOnType.EVENT);\r\n  if (target instanceof EventBus) {\r\n    target.on(name, eventHandler);\r\n  } else {\r\n    target.addEventListener(name, eventHandler);\r\n  }\r\n  var timeoutHandler = handler.bind(null, WaitOnType.TIMEOUT);\r\n  var timeout = setTimeout(timeoutHandler, delay);\r\n  return capability.promise;\r\n}\r\nvar animationStarted = new Promise(function (resolve) {\r\n  window.requestAnimationFrame(resolve);\r\n});\r\n\r\nvar EventBus = function () {\r\n  function EventBus() {\r\n    _classCallCheck(this, EventBus);\r\n\r\n    this._listeners = Object.create(null);\r\n  }\r\n\r\n  _createClass(EventBus, [{\r\n    key: 'on',\r\n    value: function on(eventName, listener) {\r\n      var eventListeners = this._listeners[eventName];\r\n      if (!eventListeners) {\r\n        eventListeners = [];\r\n        this._listeners[eventName] = eventListeners;\r\n      }\r\n      eventListeners.push(listener);\r\n    }\r\n  }, {\r\n    key: 'off',\r\n    value: function off(eventName, listener) {\r\n      var eventListeners = this._listeners[eventName];\r\n      var i = void 0;\r\n      if (!eventListeners || (i = eventListeners.indexOf(listener)) < 0) {\r\n        return;\r\n      }\r\n      eventListeners.splice(i, 1);\r\n    }\r\n  }, {\r\n    key: 'dispatch',\r\n    value: function dispatch(eventName) {\r\n      var eventListeners = this._listeners[eventName];\r\n      if (!eventListeners || eventListeners.length === 0) {\r\n        return;\r\n      }\r\n      var args = Array.prototype.slice.call(arguments, 1);\r\n      eventListeners.slice(0).forEach(function (listener) {\r\n        listener.apply(null, args);\r\n      });\r\n    }\r\n  }]);\r\n\r\n  return EventBus;\r\n}();\r\n\r\nfunction clamp(v, min, max) {\r\n  return Math.min(Math.max(v, min), max);\r\n}\r\n\r\nvar ProgressBar = function () {\r\n  function ProgressBar(id) {\r\n    var _ref3 = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},\r\n        height = _ref3.height,\r\n        width = _ref3.width,\r\n        units = _ref3.units;\r\n\r\n    _classCallCheck(this, ProgressBar);\r\n\r\n    this.visible = true;\r\n    this.div = document.querySelector(id + ' .progress');\r\n    this.bar = this.div.parentNode;\r\n    this.height = height || 100;\r\n    this.width = width || 100;\r\n    this.units = units || '%';\r\n    this.div.style.height = this.height + this.units;\r\n    this.percent = 0;\r\n  }\r\n\r\n  _createClass(ProgressBar, [{\r\n    key: '_updateBar',\r\n    value: function _updateBar() {\r\n      if (this._indeterminate) {\r\n        this.div.classList.add('indeterminate');\r\n        this.div.style.width = this.width + this.units;\r\n        return;\r\n      }\r\n      this.div.classList.remove('indeterminate');\r\n      var progressSize = this.width * this._percent / 100;\r\n      this.div.style.width = progressSize + this.units;\r\n    }\r\n  }, {\r\n    key: 'setWidth',\r\n    value: function setWidth(viewer) {\r\n      if (!viewer) {\r\n        return;\r\n      }\r\n      var container = viewer.parentNode;\r\n      var scrollbarWidth = container.offsetWidth - viewer.offsetWidth;\r\n      if (scrollbarWidth > 0) {\r\n        this.bar.setAttribute('style', 'width: calc(100% - ' + scrollbarWidth + 'px);');\r\n      }\r\n    }\r\n  }, {\r\n    key: 'hide',\r\n    value: function hide() {\r\n      if (!this.visible) {\r\n        return;\r\n      }\r\n      this.visible = false;\r\n      this.bar.classList.add('hidden');\r\n      document.body.classList.remove('loadingInProgress');\r\n    }\r\n  }, {\r\n    key: 'show',\r\n    value: function show() {\r\n      if (this.visible) {\r\n        return;\r\n      }\r\n      this.visible = true;\r\n      document.body.classList.add('loadingInProgress');\r\n      this.bar.classList.remove('hidden');\r\n    }\r\n  }, {\r\n    key: 'percent',\r\n    get: function get() {\r\n      return this._percent;\r\n    },\r\n    set: function set(val) {\r\n      this._indeterminate = isNaN(val);\r\n      this._percent = clamp(val, 0, 100);\r\n      this._updateBar();\r\n    }\r\n  }]);\r\n\r\n  return ProgressBar;\r\n}();\r\n\r\nexports.CSS_UNITS = CSS_UNITS;\r\nexports.DEFAULT_SCALE_VALUE = DEFAULT_SCALE_VALUE;\r\nexports.DEFAULT_SCALE = DEFAULT_SCALE;\r\nexports.MIN_SCALE = MIN_SCALE;\r\nexports.MAX_SCALE = MAX_SCALE;\r\nexports.UNKNOWN_SCALE = UNKNOWN_SCALE;\r\nexports.MAX_AUTO_SCALE = MAX_AUTO_SCALE;\r\nexports.SCROLLBAR_PADDING = SCROLLBAR_PADDING;\r\nexports.VERTICAL_PADDING = VERTICAL_PADDING;\r\nexports.isValidRotation = isValidRotation;\r\nexports.isPortraitOrientation = isPortraitOrientation;\r\nexports.isFileSchema = isFileSchema;\r\nexports.cloneObj = cloneObj;\r\nexports.PresentationModeState = PresentationModeState;\r\nexports.RendererType = RendererType;\r\nexports.TextLayerMode = TextLayerMode;\r\nexports.NullL10n = NullL10n;\r\nexports.EventBus = EventBus;\r\nexports.ProgressBar = ProgressBar;\r\nexports.getPDFFileNameFromURL = getPDFFileNameFromURL;\r\nexports.noContextMenuHandler = noContextMenuHandler;\r\nexports.parseQueryString = parseQueryString;\r\nexports.getVisibleElements = getVisibleElements;\r\nexports.roundToDivide = roundToDivide;\r\nexports.getPageSizeInches = getPageSizeInches;\r\nexports.approximateFraction = approximateFraction;\r\nexports.getOutputScale = getOutputScale;\r\nexports.scrollIntoView = scrollIntoView;\r\nexports.watchScroll = watchScroll;\r\nexports.binarySearchFirstItem = binarySearchFirstItem;\r\nexports.normalizeWheelEventDelta = normalizeWheelEventDelta;\r\nexports.animationStarted = animationStarted;\r\nexports.WaitOnType = WaitOnType;\r\nexports.waitOnEventOrTimeout = waitOnEventOrTimeout;\r\n\r\n/***/ }),\r\n/* 1 */\r\n/***/ (function(module, exports, __w_pdfjs_require__) {\r\n\r\n\"use strict\";\r\n\r\n\r\nvar pdfjsLib = void 0;\r\nif (typeof window !== 'undefined' && window['pdfjs-dist/build/pdf']) {\r\n  pdfjsLib = window['pdfjs-dist/build/pdf'];\r\n} else {\r\n  pdfjsLib = require('../build/pdf.js');\r\n}\r\nmodule.exports = pdfjsLib;\r\n\r\n/***/ }),\r\n/* 2 */\r\n/***/ (function(module, exports, __w_pdfjs_require__) {\r\n\r\n\"use strict\";\r\n\r\n\r\nObject.defineProperty(exports, \"__esModule\", {\r\n  value: true\r\n});\r\nexports.getGlobalEventBus = exports.attachDOMEventsToEventBus = undefined;\r\n\r\nvar _ui_utils = __w_pdfjs_require__(0);\r\n\r\nfunction attachDOMEventsToEventBus(eventBus) {\r\n  eventBus.on('documentload', function () {\r\n    var event = document.createEvent('CustomEvent');\r\n    event.initCustomEvent('documentload', true, true, {});\r\n    window.dispatchEvent(event);\r\n  });\r\n  eventBus.on('pagerendered', function (evt) {\r\n    var event = document.createEvent('CustomEvent');\r\n    event.initCustomEvent('pagerendered', true, true, {\r\n      pageNumber: evt.pageNumber,\r\n      cssTransform: evt.cssTransform\r\n    });\r\n    evt.source.div.dispatchEvent(event);\r\n  });\r\n  eventBus.on('textlayerrendered', function (evt) {\r\n    var event = document.createEvent('CustomEvent');\r\n    event.initCustomEvent('textlayerrendered', true, true, { pageNumber: evt.pageNumber });\r\n    evt.source.textLayerDiv.dispatchEvent(event);\r\n  });\r\n  eventBus.on('pagechange', function (evt) {\r\n    var event = document.createEvent('UIEvents');\r\n    event.initUIEvent('pagechange', true, true, window, 0);\r\n    event.pageNumber = evt.pageNumber;\r\n    evt.source.container.dispatchEvent(event);\r\n  });\r\n  eventBus.on('pagesinit', function (evt) {\r\n    var event = document.createEvent('CustomEvent');\r\n    event.initCustomEvent('pagesinit', true, true, null);\r\n    evt.source.container.dispatchEvent(event);\r\n  });\r\n  eventBus.on('pagesloaded', function (evt) {\r\n    var event = document.createEvent('CustomEvent');\r\n    event.initCustomEvent('pagesloaded', true, true, { pagesCount: evt.pagesCount });\r\n    evt.source.container.dispatchEvent(event);\r\n  });\r\n  eventBus.on('scalechange', function (evt) {\r\n    var event = document.createEvent('UIEvents');\r\n    event.initUIEvent('scalechange', true, true, window, 0);\r\n    event.scale = evt.scale;\r\n    event.presetValue = evt.presetValue;\r\n    evt.source.container.dispatchEvent(event);\r\n  });\r\n  eventBus.on('updateviewarea', function (evt) {\r\n    var event = document.createEvent('UIEvents');\r\n    event.initUIEvent('updateviewarea', true, true, window, 0);\r\n    event.location = evt.location;\r\n    evt.source.container.dispatchEvent(event);\r\n  });\r\n  eventBus.on('find', function (evt) {\r\n    if (evt.source === window) {\r\n      return;\r\n    }\r\n    var event = document.createEvent('CustomEvent');\r\n    event.initCustomEvent('find' + evt.type, true, true, {\r\n      query: evt.query,\r\n      phraseSearch: evt.phraseSearch,\r\n      caseSensitive: evt.caseSensitive,\r\n      highlightAll: evt.highlightAll,\r\n      findPrevious: evt.findPrevious\r\n    });\r\n    window.dispatchEvent(event);\r\n  });\r\n  eventBus.on('attachmentsloaded', function (evt) {\r\n    var event = document.createEvent('CustomEvent');\r\n    event.initCustomEvent('attachmentsloaded', true, true, { attachmentsCount: evt.attachmentsCount });\r\n    evt.source.container.dispatchEvent(event);\r\n  });\r\n  eventBus.on('sidebarviewchanged', function (evt) {\r\n    var event = document.createEvent('CustomEvent');\r\n    event.initCustomEvent('sidebarviewchanged', true, true, { view: evt.view });\r\n    evt.source.outerContainer.dispatchEvent(event);\r\n  });\r\n  eventBus.on('pagemode', function (evt) {\r\n    var event = document.createEvent('CustomEvent');\r\n    event.initCustomEvent('pagemode', true, true, { mode: evt.mode });\r\n    evt.source.pdfViewer.container.dispatchEvent(event);\r\n  });\r\n  eventBus.on('namedaction', function (evt) {\r\n    var event = document.createEvent('CustomEvent');\r\n    event.initCustomEvent('namedaction', true, true, { action: evt.action });\r\n    evt.source.pdfViewer.container.dispatchEvent(event);\r\n  });\r\n  eventBus.on('presentationmodechanged', function (evt) {\r\n    var event = document.createEvent('CustomEvent');\r\n    event.initCustomEvent('presentationmodechanged', true, true, {\r\n      active: evt.active,\r\n      switchInProgress: evt.switchInProgress\r\n    });\r\n    window.dispatchEvent(event);\r\n  });\r\n  eventBus.on('outlineloaded', function (evt) {\r\n    var event = document.createEvent('CustomEvent');\r\n    event.initCustomEvent('outlineloaded', true, true, { outlineCount: evt.outlineCount });\r\n    evt.source.container.dispatchEvent(event);\r\n  });\r\n}\r\nvar globalEventBus = null;\r\nfunction getGlobalEventBus() {\r\n  if (globalEventBus) {\r\n    return globalEventBus;\r\n  }\r\n  globalEventBus = new _ui_utils.EventBus();\r\n  attachDOMEventsToEventBus(globalEventBus);\r\n  return globalEventBus;\r\n}\r\nexports.attachDOMEventsToEventBus = attachDOMEventsToEventBus;\r\nexports.getGlobalEventBus = getGlobalEventBus;\r\n\r\n/***/ }),\r\n/* 3 */\r\n/***/ (function(module, exports, __w_pdfjs_require__) {\r\n\r\n\"use strict\";\r\n\r\n\r\nObject.defineProperty(exports, \"__esModule\", {\r\n  value: true\r\n});\r\nexports.SimpleLinkService = exports.PDFLinkService = undefined;\r\n\r\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\r\n\r\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\r\n\r\nvar _dom_events = __w_pdfjs_require__(2);\r\n\r\nvar _ui_utils = __w_pdfjs_require__(0);\r\n\r\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\r\n\r\nvar PDFLinkService = function () {\r\n  function PDFLinkService() {\r\n    var _ref = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\r\n        eventBus = _ref.eventBus,\r\n        _ref$externalLinkTarg = _ref.externalLinkTarget,\r\n        externalLinkTarget = _ref$externalLinkTarg === undefined ? null : _ref$externalLinkTarg,\r\n        _ref$externalLinkRel = _ref.externalLinkRel,\r\n        externalLinkRel = _ref$externalLinkRel === undefined ? null : _ref$externalLinkRel;\r\n\r\n    _classCallCheck(this, PDFLinkService);\r\n\r\n    this.eventBus = eventBus || (0, _dom_events.getGlobalEventBus)();\r\n    this.externalLinkTarget = externalLinkTarget;\r\n    this.externalLinkRel = externalLinkRel;\r\n    this.baseUrl = null;\r\n    this.pdfDocument = null;\r\n    this.pdfViewer = null;\r\n    this.pdfHistory = null;\r\n    this._pagesRefCache = null;\r\n  }\r\n\r\n  _createClass(PDFLinkService, [{\r\n    key: 'setDocument',\r\n    value: function setDocument(pdfDocument, baseUrl) {\r\n      this.baseUrl = baseUrl;\r\n      this.pdfDocument = pdfDocument;\r\n      this._pagesRefCache = Object.create(null);\r\n    }\r\n  }, {\r\n    key: 'setViewer',\r\n    value: function setViewer(pdfViewer) {\r\n      this.pdfViewer = pdfViewer;\r\n    }\r\n  }, {\r\n    key: 'setHistory',\r\n    value: function setHistory(pdfHistory) {\r\n      this.pdfHistory = pdfHistory;\r\n    }\r\n  }, {\r\n    key: 'navigateTo',\r\n    value: function navigateTo(dest) {\r\n      var _this = this;\r\n\r\n      var goToDestination = function goToDestination(_ref2) {\r\n        var namedDest = _ref2.namedDest,\r\n            explicitDest = _ref2.explicitDest;\r\n\r\n        var destRef = explicitDest[0],\r\n            pageNumber = void 0;\r\n        if (destRef instanceof Object) {\r\n          pageNumber = _this._cachedPageNumber(destRef);\r\n          if (pageNumber === null) {\r\n            _this.pdfDocument.getPageIndex(destRef).then(function (pageIndex) {\r\n              _this.cachePageRef(pageIndex + 1, destRef);\r\n              goToDestination({\r\n                namedDest: namedDest,\r\n                explicitDest: explicitDest\r\n              });\r\n            }).catch(function () {\r\n              console.error('PDFLinkService.navigateTo: \"' + destRef + '\" is not ' + ('a valid page reference, for dest=\"' + dest + '\".'));\r\n            });\r\n            return;\r\n          }\r\n        } else if (Number.isInteger(destRef)) {\r\n          pageNumber = destRef + 1;\r\n        } else {\r\n          console.error('PDFLinkService.navigateTo: \"' + destRef + '\" is not ' + ('a valid destination reference, for dest=\"' + dest + '\".'));\r\n          return;\r\n        }\r\n        if (!pageNumber || pageNumber < 1 || pageNumber > _this.pagesCount) {\r\n          console.error('PDFLinkService.navigateTo: \"' + pageNumber + '\" is not ' + ('a valid page number, for dest=\"' + dest + '\".'));\r\n          return;\r\n        }\r\n        if (_this.pdfHistory) {\r\n          _this.pdfHistory.pushCurrentPosition();\r\n          _this.pdfHistory.push({\r\n            namedDest: namedDest,\r\n            explicitDest: explicitDest,\r\n            pageNumber: pageNumber\r\n          });\r\n        }\r\n        _this.pdfViewer.scrollPageIntoView({\r\n          pageNumber: pageNumber,\r\n          destArray: explicitDest\r\n        });\r\n      };\r\n      new Promise(function (resolve, reject) {\r\n        if (typeof dest === 'string') {\r\n          _this.pdfDocument.getDestination(dest).then(function (destArray) {\r\n            resolve({\r\n              namedDest: dest,\r\n              explicitDest: destArray\r\n            });\r\n          });\r\n          return;\r\n        }\r\n        resolve({\r\n          namedDest: '',\r\n          explicitDest: dest\r\n        });\r\n      }).then(function (data) {\r\n        if (!(data.explicitDest instanceof Array)) {\r\n          console.error('PDFLinkService.navigateTo: \"' + data.explicitDest + '\" is' + (' not a valid destination array, for dest=\"' + dest + '\".'));\r\n          return;\r\n        }\r\n        goToDestination(data);\r\n      });\r\n    }\r\n  }, {\r\n    key: 'getDestinationHash',\r\n    value: function getDestinationHash(dest) {\r\n      if (typeof dest === 'string') {\r\n        return this.getAnchorUrl('#' + escape(dest));\r\n      }\r\n      if (dest instanceof Array) {\r\n        var str = JSON.stringify(dest);\r\n        return this.getAnchorUrl('#' + escape(str));\r\n      }\r\n      return this.getAnchorUrl('');\r\n    }\r\n  }, {\r\n    key: 'getAnchorUrl',\r\n    value: function getAnchorUrl(anchor) {\r\n      return (this.baseUrl || '') + anchor;\r\n    }\r\n  }, {\r\n    key: 'setHash',\r\n    value: function setHash(hash) {\r\n      var pageNumber = void 0,\r\n          dest = void 0;\r\n      if (hash.includes('=')) {\r\n        var params = (0, _ui_utils.parseQueryString)(hash);\r\n        if ('search' in params) {\r\n          this.eventBus.dispatch('findfromurlhash', {\r\n            source: this,\r\n            query: params['search'].replace(/\"/g, ''),\r\n            phraseSearch: params['phrase'] === 'true'\r\n          });\r\n        }\r\n        if ('nameddest' in params) {\r\n          this.navigateTo(params.nameddest);\r\n          return;\r\n        }\r\n        if ('page' in params) {\r\n          pageNumber = params.page | 0 || 1;\r\n        }\r\n        if ('zoom' in params) {\r\n          var zoomArgs = params.zoom.split(',');\r\n          var zoomArg = zoomArgs[0];\r\n          var zoomArgNumber = parseFloat(zoomArg);\r\n          if (!zoomArg.includes('Fit')) {\r\n            dest = [null, { name: 'XYZ' }, zoomArgs.length > 1 ? zoomArgs[1] | 0 : null, zoomArgs.length > 2 ? zoomArgs[2] | 0 : null, zoomArgNumber ? zoomArgNumber / 100 : zoomArg];\r\n          } else {\r\n            if (zoomArg === 'Fit' || zoomArg === 'FitB') {\r\n              dest = [null, { name: zoomArg }];\r\n            } else if (zoomArg === 'FitH' || zoomArg === 'FitBH' || zoomArg === 'FitV' || zoomArg === 'FitBV') {\r\n              dest = [null, { name: zoomArg }, zoomArgs.length > 1 ? zoomArgs[1] | 0 : null];\r\n            } else if (zoomArg === 'FitR') {\r\n              if (zoomArgs.length !== 5) {\r\n                console.error('PDFLinkService.setHash: Not enough parameters for \"FitR\".');\r\n              } else {\r\n                dest = [null, { name: zoomArg }, zoomArgs[1] | 0, zoomArgs[2] | 0, zoomArgs[3] | 0, zoomArgs[4] | 0];\r\n              }\r\n            } else {\r\n              console.error('PDFLinkService.setHash: \"' + zoomArg + '\" is not ' + 'a valid zoom value.');\r\n            }\r\n          }\r\n        }\r\n        if (dest) {\r\n          this.pdfViewer.scrollPageIntoView({\r\n            pageNumber: pageNumber || this.page,\r\n            destArray: dest,\r\n            allowNegativeOffset: true\r\n          });\r\n        } else if (pageNumber) {\r\n          this.page = pageNumber;\r\n        }\r\n        if ('pagemode' in params) {\r\n          this.eventBus.dispatch('pagemode', {\r\n            source: this,\r\n            mode: params.pagemode\r\n          });\r\n        }\r\n      } else {\r\n        dest = unescape(hash);\r\n        try {\r\n          dest = JSON.parse(dest);\r\n          if (!(dest instanceof Array)) {\r\n            dest = dest.toString();\r\n          }\r\n        } catch (ex) {}\r\n        if (typeof dest === 'string' || isValidExplicitDestination(dest)) {\r\n          this.navigateTo(dest);\r\n          return;\r\n        }\r\n        console.error('PDFLinkService.setHash: \"' + unescape(hash) + '\" is not ' + 'a valid destination.');\r\n      }\r\n    }\r\n  }, {\r\n    key: 'executeNamedAction',\r\n    value: function executeNamedAction(action) {\r\n      switch (action) {\r\n        case 'GoBack':\r\n          if (this.pdfHistory) {\r\n            this.pdfHistory.back();\r\n          }\r\n          break;\r\n        case 'GoForward':\r\n          if (this.pdfHistory) {\r\n            this.pdfHistory.forward();\r\n          }\r\n          break;\r\n        case 'NextPage':\r\n          if (this.page < this.pagesCount) {\r\n            this.page++;\r\n          }\r\n          break;\r\n        case 'PrevPage':\r\n          if (this.page > 1) {\r\n            this.page--;\r\n          }\r\n          break;\r\n        case 'LastPage':\r\n          this.page = this.pagesCount;\r\n          break;\r\n        case 'FirstPage':\r\n          this.page = 1;\r\n          break;\r\n        default:\r\n          break;\r\n      }\r\n      this.eventBus.dispatch('namedaction', {\r\n        source: this,\r\n        action: action\r\n      });\r\n    }\r\n  }, {\r\n    key: 'onFileAttachmentAnnotation',\r\n    value: function onFileAttachmentAnnotation(_ref3) {\r\n      var id = _ref3.id,\r\n          filename = _ref3.filename,\r\n          content = _ref3.content;\r\n\r\n      this.eventBus.dispatch('fileattachmentannotation', {\r\n        source: this,\r\n        id: id,\r\n        filename: filename,\r\n        content: content\r\n      });\r\n    }\r\n  }, {\r\n    key: 'cachePageRef',\r\n    value: function cachePageRef(pageNum, pageRef) {\r\n      if (!pageRef) {\r\n        return;\r\n      }\r\n      var refStr = pageRef.num + ' ' + pageRef.gen + ' R';\r\n      this._pagesRefCache[refStr] = pageNum;\r\n    }\r\n  }, {\r\n    key: '_cachedPageNumber',\r\n    value: function _cachedPageNumber(pageRef) {\r\n      var refStr = pageRef.num + ' ' + pageRef.gen + ' R';\r\n      return this._pagesRefCache && this._pagesRefCache[refStr] || null;\r\n    }\r\n  }, {\r\n    key: 'pagesCount',\r\n    get: function get() {\r\n      return this.pdfDocument ? this.pdfDocument.numPages : 0;\r\n    }\r\n  }, {\r\n    key: 'page',\r\n    get: function get() {\r\n      return this.pdfViewer.currentPageNumber;\r\n    },\r\n    set: function set(value) {\r\n      this.pdfViewer.currentPageNumber = value;\r\n    }\r\n  }, {\r\n    key: 'rotation',\r\n    get: function get() {\r\n      return this.pdfViewer.pagesRotation;\r\n    },\r\n    set: function set(value) {\r\n      this.pdfViewer.pagesRotation = value;\r\n    }\r\n  }]);\r\n\r\n  return PDFLinkService;\r\n}();\r\n\r\nfunction isValidExplicitDestination(dest) {\r\n  if (!(dest instanceof Array)) {\r\n    return false;\r\n  }\r\n  var destLength = dest.length,\r\n      allowNull = true;\r\n  if (destLength < 2) {\r\n    return false;\r\n  }\r\n  var page = dest[0];\r\n  if (!((typeof page === 'undefined' ? 'undefined' : _typeof(page)) === 'object' && Number.isInteger(page.num) && Number.isInteger(page.gen)) && !(Number.isInteger(page) && page >= 0)) {\r\n    return false;\r\n  }\r\n  var zoom = dest[1];\r\n  if (!((typeof zoom === 'undefined' ? 'undefined' : _typeof(zoom)) === 'object' && typeof zoom.name === 'string')) {\r\n    return false;\r\n  }\r\n  switch (zoom.name) {\r\n    case 'XYZ':\r\n      if (destLength !== 5) {\r\n        return false;\r\n      }\r\n      break;\r\n    case 'Fit':\r\n    case 'FitB':\r\n      return destLength === 2;\r\n    case 'FitH':\r\n    case 'FitBH':\r\n    case 'FitV':\r\n    case 'FitBV':\r\n      if (destLength !== 3) {\r\n        return false;\r\n      }\r\n      break;\r\n    case 'FitR':\r\n      if (destLength !== 6) {\r\n        return false;\r\n      }\r\n      allowNull = false;\r\n      break;\r\n    default:\r\n      return false;\r\n  }\r\n  for (var i = 2; i < destLength; i++) {\r\n    var param = dest[i];\r\n    if (!(typeof param === 'number' || allowNull && param === null)) {\r\n      return false;\r\n    }\r\n  }\r\n  return true;\r\n}\r\n\r\nvar SimpleLinkService = function () {\r\n  function SimpleLinkService() {\r\n    _classCallCheck(this, SimpleLinkService);\r\n\r\n    this.externalLinkTarget = null;\r\n    this.externalLinkRel = null;\r\n  }\r\n\r\n  _createClass(SimpleLinkService, [{\r\n    key: 'navigateTo',\r\n    value: function navigateTo(dest) {}\r\n  }, {\r\n    key: 'getDestinationHash',\r\n    value: function getDestinationHash(dest) {\r\n      return '#';\r\n    }\r\n  }, {\r\n    key: 'getAnchorUrl',\r\n    value: function getAnchorUrl(hash) {\r\n      return '#';\r\n    }\r\n  }, {\r\n    key: 'setHash',\r\n    value: function setHash(hash) {}\r\n  }, {\r\n    key: 'executeNamedAction',\r\n    value: function executeNamedAction(action) {}\r\n  }, {\r\n    key: 'onFileAttachmentAnnotation',\r\n    value: function onFileAttachmentAnnotation(_ref4) {\r\n      var id = _ref4.id,\r\n          filename = _ref4.filename,\r\n          content = _ref4.content;\r\n    }\r\n  }, {\r\n    key: 'cachePageRef',\r\n    value: function cachePageRef(pageNum, pageRef) {}\r\n  }, {\r\n    key: 'page',\r\n    get: function get() {\r\n      return 0;\r\n    },\r\n    set: function set(value) {}\r\n  }, {\r\n    key: 'rotation',\r\n    get: function get() {\r\n      return 0;\r\n    },\r\n    set: function set(value) {}\r\n  }]);\r\n\r\n  return SimpleLinkService;\r\n}();\r\n\r\nexports.PDFLinkService = PDFLinkService;\r\nexports.SimpleLinkService = SimpleLinkService;\r\n\r\n/***/ }),\r\n/* 4 */\r\n/***/ (function(module, exports, __w_pdfjs_require__) {\r\n\r\n\"use strict\";\r\n\r\n\r\nObject.defineProperty(exports, \"__esModule\", {\r\n  value: true\r\n});\r\nexports.DefaultAnnotationLayerFactory = exports.AnnotationLayerBuilder = undefined;\r\n\r\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\r\n\r\nvar _pdfjsLib = __w_pdfjs_require__(1);\r\n\r\nvar _ui_utils = __w_pdfjs_require__(0);\r\n\r\nvar _pdf_link_service = __w_pdfjs_require__(3);\r\n\r\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\r\n\r\nvar AnnotationLayerBuilder = function () {\r\n  function AnnotationLayerBuilder(_ref) {\r\n    var pageDiv = _ref.pageDiv,\r\n        pdfPage = _ref.pdfPage,\r\n        linkService = _ref.linkService,\r\n        downloadManager = _ref.downloadManager,\r\n        _ref$imageResourcesPa = _ref.imageResourcesPath,\r\n        imageResourcesPath = _ref$imageResourcesPa === undefined ? '' : _ref$imageResourcesPa,\r\n        _ref$renderInteractiv = _ref.renderInteractiveForms,\r\n        renderInteractiveForms = _ref$renderInteractiv === undefined ? false : _ref$renderInteractiv,\r\n        _ref$l10n = _ref.l10n,\r\n        l10n = _ref$l10n === undefined ? _ui_utils.NullL10n : _ref$l10n;\r\n\r\n    _classCallCheck(this, AnnotationLayerBuilder);\r\n\r\n    this.pageDiv = pageDiv;\r\n    this.pdfPage = pdfPage;\r\n    this.linkService = linkService;\r\n    this.downloadManager = downloadManager;\r\n    this.imageResourcesPath = imageResourcesPath;\r\n    this.renderInteractiveForms = renderInteractiveForms;\r\n    this.l10n = l10n;\r\n    this.div = null;\r\n    this._cancelled = false;\r\n  }\r\n\r\n  _createClass(AnnotationLayerBuilder, [{\r\n    key: 'render',\r\n    value: function render(viewport) {\r\n      var _this = this;\r\n\r\n      var intent = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'display';\r\n\r\n      this.pdfPage.getAnnotations({ intent: intent }).then(function (annotations) {\r\n        if (_this._cancelled) {\r\n          return;\r\n        }\r\n        var parameters = {\r\n          viewport: viewport.clone({ dontFlip: true }),\r\n          div: _this.div,\r\n          annotations: annotations,\r\n          page: _this.pdfPage,\r\n          imageResourcesPath: _this.imageResourcesPath,\r\n          renderInteractiveForms: _this.renderInteractiveForms,\r\n          linkService: _this.linkService,\r\n          downloadManager: _this.downloadManager\r\n        };\r\n        if (_this.div) {\r\n          _pdfjsLib.AnnotationLayer.update(parameters);\r\n        } else {\r\n          if (annotations.length === 0) {\r\n            return;\r\n          }\r\n          _this.div = document.createElement('div');\r\n          _this.div.className = 'annotationLayer';\r\n          _this.pageDiv.appendChild(_this.div);\r\n          parameters.div = _this.div;\r\n          _pdfjsLib.AnnotationLayer.render(parameters);\r\n          _this.l10n.translate(_this.div);\r\n        }\r\n      });\r\n    }\r\n  }, {\r\n    key: 'cancel',\r\n    value: function cancel() {\r\n      this._cancelled = true;\r\n    }\r\n  }, {\r\n    key: 'hide',\r\n    value: function hide() {\r\n      if (!this.div) {\r\n        return;\r\n      }\r\n      this.div.setAttribute('hidden', 'true');\r\n    }\r\n  }]);\r\n\r\n  return AnnotationLayerBuilder;\r\n}();\r\n\r\nvar DefaultAnnotationLayerFactory = function () {\r\n  function DefaultAnnotationLayerFactory() {\r\n    _classCallCheck(this, DefaultAnnotationLayerFactory);\r\n  }\r\n\r\n  _createClass(DefaultAnnotationLayerFactory, [{\r\n    key: 'createAnnotationLayerBuilder',\r\n    value: function createAnnotationLayerBuilder(pageDiv, pdfPage) {\r\n      var imageResourcesPath = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : '';\r\n      var renderInteractiveForms = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : false;\r\n      var l10n = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : _ui_utils.NullL10n;\r\n\r\n      return new AnnotationLayerBuilder({\r\n        pageDiv: pageDiv,\r\n        pdfPage: pdfPage,\r\n        imageResourcesPath: imageResourcesPath,\r\n        renderInteractiveForms: renderInteractiveForms,\r\n        linkService: new _pdf_link_service.SimpleLinkService(),\r\n        l10n: l10n\r\n      });\r\n    }\r\n  }]);\r\n\r\n  return DefaultAnnotationLayerFactory;\r\n}();\r\n\r\nexports.AnnotationLayerBuilder = AnnotationLayerBuilder;\r\nexports.DefaultAnnotationLayerFactory = DefaultAnnotationLayerFactory;\r\n\r\n/***/ }),\r\n/* 5 */\r\n/***/ (function(module, exports, __w_pdfjs_require__) {\r\n\r\n\"use strict\";\r\n\r\n\r\nObject.defineProperty(exports, \"__esModule\", {\r\n  value: true\r\n});\r\nexports.DefaultTextLayerFactory = exports.TextLayerBuilder = undefined;\r\n\r\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\r\n\r\nvar _dom_events = __w_pdfjs_require__(2);\r\n\r\nvar _pdfjsLib = __w_pdfjs_require__(1);\r\n\r\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\r\n\r\nvar EXPAND_DIVS_TIMEOUT = 300;\r\n\r\nvar TextLayerBuilder = function () {\r\n  function TextLayerBuilder(_ref) {\r\n    var textLayerDiv = _ref.textLayerDiv,\r\n        eventBus = _ref.eventBus,\r\n        pageIndex = _ref.pageIndex,\r\n        viewport = _ref.viewport,\r\n        _ref$findController = _ref.findController,\r\n        findController = _ref$findController === undefined ? null : _ref$findController,\r\n        _ref$enhanceTextSelec = _ref.enhanceTextSelection,\r\n        enhanceTextSelection = _ref$enhanceTextSelec === undefined ? false : _ref$enhanceTextSelec;\r\n\r\n    _classCallCheck(this, TextLayerBuilder);\r\n\r\n    this.textLayerDiv = textLayerDiv;\r\n    this.eventBus = eventBus || (0, _dom_events.getGlobalEventBus)();\r\n    this.textContent = null;\r\n    this.textContentItemsStr = [];\r\n    this.textContentStream = null;\r\n    this.renderingDone = false;\r\n    this.pageIdx = pageIndex;\r\n    this.pageNumber = this.pageIdx + 1;\r\n    this.matches = [];\r\n    this.viewport = viewport;\r\n    this.textDivs = [];\r\n    this.findController = findController;\r\n    this.textLayerRenderTask = null;\r\n    this.enhanceTextSelection = enhanceTextSelection;\r\n    this._bindMouse();\r\n  }\r\n\r\n  _createClass(TextLayerBuilder, [{\r\n    key: '_finishRendering',\r\n    value: function _finishRendering() {\r\n      this.renderingDone = true;\r\n      if (!this.enhanceTextSelection) {\r\n        var endOfContent = document.createElement('div');\r\n        endOfContent.className = 'endOfContent';\r\n        this.textLayerDiv.appendChild(endOfContent);\r\n      }\r\n      this.eventBus.dispatch('textlayerrendered', {\r\n        source: this,\r\n        pageNumber: this.pageNumber,\r\n        numTextDivs: this.textDivs.length\r\n      });\r\n    }\r\n  }, {\r\n    key: 'render',\r\n    value: function render() {\r\n      var _this = this;\r\n\r\n      var timeout = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\r\n\r\n      if (!(this.textContent || this.textContentStream) || this.renderingDone) {\r\n        return;\r\n      }\r\n      this.cancel();\r\n      this.textDivs = [];\r\n      var textLayerFrag = document.createDocumentFragment();\r\n      this.textLayerRenderTask = (0, _pdfjsLib.renderTextLayer)({\r\n        textContent: this.textContent,\r\n        textContentStream: this.textContentStream,\r\n        container: textLayerFrag,\r\n        viewport: this.viewport,\r\n        textDivs: this.textDivs,\r\n        textContentItemsStr: this.textContentItemsStr,\r\n        timeout: timeout,\r\n        enhanceTextSelection: this.enhanceTextSelection\r\n      });\r\n      this.textLayerRenderTask.promise.then(function () {\r\n        _this.textLayerDiv.appendChild(textLayerFrag);\r\n        _this._finishRendering();\r\n        _this.updateMatches();\r\n      }, function (reason) {});\r\n    }\r\n  }, {\r\n    key: 'cancel',\r\n    value: function cancel() {\r\n      if (this.textLayerRenderTask) {\r\n        this.textLayerRenderTask.cancel();\r\n        this.textLayerRenderTask = null;\r\n      }\r\n    }\r\n  }, {\r\n    key: 'setTextContentStream',\r\n    value: function setTextContentStream(readableStream) {\r\n      this.cancel();\r\n      this.textContentStream = readableStream;\r\n    }\r\n  }, {\r\n    key: 'setTextContent',\r\n    value: function setTextContent(textContent) {\r\n      this.cancel();\r\n      this.textContent = textContent;\r\n    }\r\n  }, {\r\n    key: 'convertMatches',\r\n    value: function convertMatches(matches, matchesLength) {\r\n      var i = 0;\r\n      var iIndex = 0;\r\n      var textContentItemsStr = this.textContentItemsStr;\r\n      var end = textContentItemsStr.length - 1;\r\n      var queryLen = this.findController === null ? 0 : this.findController.state.query.length;\r\n      var ret = [];\r\n      if (!matches) {\r\n        return ret;\r\n      }\r\n      for (var m = 0, len = matches.length; m < len; m++) {\r\n        var matchIdx = matches[m];\r\n        while (i !== end && matchIdx >= iIndex + textContentItemsStr[i].length) {\r\n          iIndex += textContentItemsStr[i].length;\r\n          i++;\r\n        }\r\n        if (i === textContentItemsStr.length) {\r\n          console.error('Could not find a matching mapping');\r\n        }\r\n        var match = {\r\n          begin: {\r\n            divIdx: i,\r\n            offset: matchIdx - iIndex\r\n          }\r\n        };\r\n        if (matchesLength) {\r\n          matchIdx += matchesLength[m];\r\n        } else {\r\n          matchIdx += queryLen;\r\n        }\r\n        while (i !== end && matchIdx > iIndex + textContentItemsStr[i].length) {\r\n          iIndex += textContentItemsStr[i].length;\r\n          i++;\r\n        }\r\n        match.end = {\r\n          divIdx: i,\r\n          offset: matchIdx - iIndex\r\n        };\r\n        ret.push(match);\r\n      }\r\n      return ret;\r\n    }\r\n  }, {\r\n    key: 'renderMatches',\r\n    value: function renderMatches(matches) {\r\n      if (matches.length === 0) {\r\n        return;\r\n      }\r\n      var textContentItemsStr = this.textContentItemsStr;\r\n      var textDivs = this.textDivs;\r\n      var prevEnd = null;\r\n      var pageIdx = this.pageIdx;\r\n      var isSelectedPage = this.findController === null ? false : pageIdx === this.findController.selected.pageIdx;\r\n      var selectedMatchIdx = this.findController === null ? -1 : this.findController.selected.matchIdx;\r\n      var highlightAll = this.findController === null ? false : this.findController.state.highlightAll;\r\n      var infinity = {\r\n        divIdx: -1,\r\n        offset: undefined\r\n      };\r\n      function beginText(begin, className) {\r\n        var divIdx = begin.divIdx;\r\n        textDivs[divIdx].textContent = '';\r\n        appendTextToDiv(divIdx, 0, begin.offset, className);\r\n      }\r\n      function appendTextToDiv(divIdx, fromOffset, toOffset, className) {\r\n        var div = textDivs[divIdx];\r\n        var content = textContentItemsStr[divIdx].substring(fromOffset, toOffset);\r\n        var node = document.createTextNode(content);\r\n        if (className) {\r\n          var span = document.createElement('span');\r\n          span.className = className;\r\n          span.appendChild(node);\r\n          div.appendChild(span);\r\n          return;\r\n        }\r\n        div.appendChild(node);\r\n      }\r\n      var i0 = selectedMatchIdx,\r\n          i1 = i0 + 1;\r\n      if (highlightAll) {\r\n        i0 = 0;\r\n        i1 = matches.length;\r\n      } else if (!isSelectedPage) {\r\n        return;\r\n      }\r\n      for (var i = i0; i < i1; i++) {\r\n        var match = matches[i];\r\n        var begin = match.begin;\r\n        var end = match.end;\r\n        var isSelected = isSelectedPage && i === selectedMatchIdx;\r\n        var highlightSuffix = isSelected ? ' selected' : '';\r\n        if (this.findController) {\r\n          this.findController.updateMatchPosition(pageIdx, i, textDivs, begin.divIdx);\r\n        }\r\n        if (!prevEnd || begin.divIdx !== prevEnd.divIdx) {\r\n          if (prevEnd !== null) {\r\n            appendTextToDiv(prevEnd.divIdx, prevEnd.offset, infinity.offset);\r\n          }\r\n          beginText(begin);\r\n        } else {\r\n          appendTextToDiv(prevEnd.divIdx, prevEnd.offset, begin.offset);\r\n        }\r\n        if (begin.divIdx === end.divIdx) {\r\n          appendTextToDiv(begin.divIdx, begin.offset, end.offset, 'highlight' + highlightSuffix);\r\n        } else {\r\n          appendTextToDiv(begin.divIdx, begin.offset, infinity.offset, 'highlight begin' + highlightSuffix);\r\n          for (var n0 = begin.divIdx + 1, n1 = end.divIdx; n0 < n1; n0++) {\r\n            textDivs[n0].className = 'highlight middle' + highlightSuffix;\r\n          }\r\n          beginText(end, 'highlight end' + highlightSuffix);\r\n        }\r\n        prevEnd = end;\r\n      }\r\n      if (prevEnd) {\r\n        appendTextToDiv(prevEnd.divIdx, prevEnd.offset, infinity.offset);\r\n      }\r\n    }\r\n  }, {\r\n    key: 'updateMatches',\r\n    value: function updateMatches() {\r\n      if (!this.renderingDone) {\r\n        return;\r\n      }\r\n      var matches = this.matches;\r\n      var textDivs = this.textDivs;\r\n      var textContentItemsStr = this.textContentItemsStr;\r\n      var clearedUntilDivIdx = -1;\r\n      for (var i = 0, len = matches.length; i < len; i++) {\r\n        var match = matches[i];\r\n        var begin = Math.max(clearedUntilDivIdx, match.begin.divIdx);\r\n        for (var n = begin, end = match.end.divIdx; n <= end; n++) {\r\n          var div = textDivs[n];\r\n          div.textContent = textContentItemsStr[n];\r\n          div.className = '';\r\n        }\r\n        clearedUntilDivIdx = match.end.divIdx + 1;\r\n      }\r\n      if (this.findController === null || !this.findController.active) {\r\n        return;\r\n      }\r\n      var pageMatches = void 0,\r\n          pageMatchesLength = void 0;\r\n      if (this.findController !== null) {\r\n        pageMatches = this.findController.pageMatches[this.pageIdx] || null;\r\n        pageMatchesLength = this.findController.pageMatchesLength ? this.findController.pageMatchesLength[this.pageIdx] || null : null;\r\n      }\r\n      this.matches = this.convertMatches(pageMatches, pageMatchesLength);\r\n      this.renderMatches(this.matches);\r\n    }\r\n  }, {\r\n    key: '_bindMouse',\r\n    value: function _bindMouse() {\r\n      var _this2 = this;\r\n\r\n      var div = this.textLayerDiv;\r\n      var expandDivsTimer = null;\r\n      div.addEventListener('mousedown', function (evt) {\r\n        if (_this2.enhanceTextSelection && _this2.textLayerRenderTask) {\r\n          _this2.textLayerRenderTask.expandTextDivs(true);\r\n          if (expandDivsTimer) {\r\n            clearTimeout(expandDivsTimer);\r\n            expandDivsTimer = null;\r\n          }\r\n          return;\r\n        }\r\n        var end = div.querySelector('.endOfContent');\r\n        if (!end) {\r\n          return;\r\n        }\r\n        var adjustTop = evt.target !== div;\r\n        adjustTop = adjustTop && window.getComputedStyle(end).getPropertyValue('-moz-user-select') !== 'none';\r\n        if (adjustTop) {\r\n          var divBounds = div.getBoundingClientRect();\r\n          var r = Math.max(0, (evt.pageY - divBounds.top) / divBounds.height);\r\n          end.style.top = (r * 100).toFixed(2) + '%';\r\n        }\r\n        end.classList.add('active');\r\n      });\r\n      div.addEventListener('mouseup', function () {\r\n        if (_this2.enhanceTextSelection && _this2.textLayerRenderTask) {\r\n          expandDivsTimer = setTimeout(function () {\r\n            if (_this2.textLayerRenderTask) {\r\n              _this2.textLayerRenderTask.expandTextDivs(false);\r\n            }\r\n            expandDivsTimer = null;\r\n          }, EXPAND_DIVS_TIMEOUT);\r\n          return;\r\n        }\r\n        var end = div.querySelector('.endOfContent');\r\n        if (!end) {\r\n          return;\r\n        }\r\n        end.style.top = '';\r\n        end.classList.remove('active');\r\n      });\r\n    }\r\n  }]);\r\n\r\n  return TextLayerBuilder;\r\n}();\r\n\r\nvar DefaultTextLayerFactory = function () {\r\n  function DefaultTextLayerFactory() {\r\n    _classCallCheck(this, DefaultTextLayerFactory);\r\n  }\r\n\r\n  _createClass(DefaultTextLayerFactory, [{\r\n    key: 'createTextLayerBuilder',\r\n    value: function createTextLayerBuilder(textLayerDiv, pageIndex, viewport) {\r\n      var enhanceTextSelection = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : false;\r\n\r\n      return new TextLayerBuilder({\r\n        textLayerDiv: textLayerDiv,\r\n        pageIndex: pageIndex,\r\n        viewport: viewport,\r\n        enhanceTextSelection: enhanceTextSelection\r\n      });\r\n    }\r\n  }]);\r\n\r\n  return DefaultTextLayerFactory;\r\n}();\r\n\r\nexports.TextLayerBuilder = TextLayerBuilder;\r\nexports.DefaultTextLayerFactory = DefaultTextLayerFactory;\r\n\r\n/***/ }),\r\n/* 6 */\r\n/***/ (function(module, exports, __w_pdfjs_require__) {\r\n\r\n\"use strict\";\r\n\r\n\r\nObject.defineProperty(exports, \"__esModule\", {\r\n  value: true\r\n});\r\nexports.PDFPageView = undefined;\r\n\r\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\r\n\r\nvar _ui_utils = __w_pdfjs_require__(0);\r\n\r\nvar _pdfjsLib = __w_pdfjs_require__(1);\r\n\r\nvar _dom_events = __w_pdfjs_require__(2);\r\n\r\nvar _pdf_rendering_queue = __w_pdfjs_require__(7);\r\n\r\nvar _viewer_compatibility = __w_pdfjs_require__(15);\r\n\r\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\r\n\r\nvar MAX_CANVAS_PIXELS = _viewer_compatibility.viewerCompatibilityParams.maxCanvasPixels || 16777216;\r\n\r\nvar PDFPageView = function () {\r\n  function PDFPageView(options) {\r\n    _classCallCheck(this, PDFPageView);\r\n\r\n    var container = options.container;\r\n    var defaultViewport = options.defaultViewport;\r\n    this.id = options.id;\r\n    this.renderingId = 'page' + this.id;\r\n    this.pdfPage = null;\r\n    this.pageLabel = null;\r\n    this.rotation = 0;\r\n    this.scale = options.scale || _ui_utils.DEFAULT_SCALE;\r\n    this.viewport = defaultViewport;\r\n    this.pdfPageRotate = defaultViewport.rotation;\r\n    this.hasRestrictedScaling = false;\r\n    this.textLayerMode = Number.isInteger(options.textLayerMode) ? options.textLayerMode : _ui_utils.TextLayerMode.ENABLE;\r\n    this.imageResourcesPath = options.imageResourcesPath || '';\r\n    this.renderInteractiveForms = options.renderInteractiveForms || false;\r\n    this.useOnlyCssZoom = options.useOnlyCssZoom || false;\r\n    this.maxCanvasPixels = options.maxCanvasPixels || MAX_CANVAS_PIXELS;\r\n    this.eventBus = options.eventBus || (0, _dom_events.getGlobalEventBus)();\r\n    this.renderingQueue = options.renderingQueue;\r\n    this.textLayerFactory = options.textLayerFactory;\r\n    this.annotationLayerFactory = options.annotationLayerFactory;\r\n    this.renderer = options.renderer || _ui_utils.RendererType.CANVAS;\r\n    this.enableWebGL = options.enableWebGL || false;\r\n    this.l10n = options.l10n || _ui_utils.NullL10n;\r\n    this.paintTask = null;\r\n    this.paintedViewportMap = new WeakMap();\r\n    this.renderingState = _pdf_rendering_queue.RenderingStates.INITIAL;\r\n    this.resume = null;\r\n    this.error = null;\r\n    this.onBeforeDraw = null;\r\n    this.onAfterDraw = null;\r\n    this.annotationLayer = null;\r\n    this.textLayer = null;\r\n    this.zoomLayer = null;\r\n    var div = document.createElement('div');\r\n    div.className = 'page';\r\n    div.style.width = Math.floor(this.viewport.width) + 'px';\r\n    div.style.height = Math.floor(this.viewport.height) + 'px';\r\n    div.setAttribute('data-page-number', this.id);\r\n    this.div = div;\r\n    container.appendChild(div);\r\n  }\r\n\r\n  _createClass(PDFPageView, [{\r\n    key: 'setPdfPage',\r\n    value: function setPdfPage(pdfPage) {\r\n      this.pdfPage = pdfPage;\r\n      this.pdfPageRotate = pdfPage.rotate;\r\n      var totalRotation = (this.rotation + this.pdfPageRotate) % 360;\r\n      this.viewport = pdfPage.getViewport(this.scale * _ui_utils.CSS_UNITS, totalRotation);\r\n      this.stats = pdfPage.stats;\r\n      this.reset();\r\n    }\r\n  }, {\r\n    key: 'destroy',\r\n    value: function destroy() {\r\n      this.reset();\r\n      if (this.pdfPage) {\r\n        this.pdfPage.cleanup();\r\n      }\r\n    }\r\n  }, {\r\n    key: '_resetZoomLayer',\r\n    value: function _resetZoomLayer() {\r\n      var removeFromDOM = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\r\n\r\n      if (!this.zoomLayer) {\r\n        return;\r\n      }\r\n      var zoomLayerCanvas = this.zoomLayer.firstChild;\r\n      this.paintedViewportMap.delete(zoomLayerCanvas);\r\n      zoomLayerCanvas.width = 0;\r\n      zoomLayerCanvas.height = 0;\r\n      if (removeFromDOM) {\r\n        this.zoomLayer.remove();\r\n      }\r\n      this.zoomLayer = null;\r\n    }\r\n  }, {\r\n    key: 'reset',\r\n    value: function reset() {\r\n      var keepZoomLayer = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\r\n      var keepAnnotations = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\r\n\r\n      this.cancelRendering(keepAnnotations);\r\n      var div = this.div;\r\n      div.style.width = Math.floor(this.viewport.width) + 'px';\r\n      div.style.height = Math.floor(this.viewport.height) + 'px';\r\n      var childNodes = div.childNodes;\r\n      var currentZoomLayerNode = keepZoomLayer && this.zoomLayer || null;\r\n      var currentAnnotationNode = keepAnnotations && this.annotationLayer && this.annotationLayer.div || null;\r\n      for (var i = childNodes.length - 1; i >= 0; i--) {\r\n        var node = childNodes[i];\r\n        if (currentZoomLayerNode === node || currentAnnotationNode === node) {\r\n          continue;\r\n        }\r\n        div.removeChild(node);\r\n      }\r\n      div.removeAttribute('data-loaded');\r\n      if (currentAnnotationNode) {\r\n        this.annotationLayer.hide();\r\n      } else if (this.annotationLayer) {\r\n        this.annotationLayer.cancel();\r\n        this.annotationLayer = null;\r\n      }\r\n      if (!currentZoomLayerNode) {\r\n        if (this.canvas) {\r\n          this.paintedViewportMap.delete(this.canvas);\r\n          this.canvas.width = 0;\r\n          this.canvas.height = 0;\r\n          delete this.canvas;\r\n        }\r\n        this._resetZoomLayer();\r\n      }\r\n      if (this.svg) {\r\n        this.paintedViewportMap.delete(this.svg);\r\n        delete this.svg;\r\n      }\r\n      this.loadingIconDiv = document.createElement('div');\r\n      this.loadingIconDiv.className = 'loadingIcon';\r\n      div.appendChild(this.loadingIconDiv);\r\n    }\r\n  }, {\r\n    key: 'update',\r\n    value: function update(scale, rotation) {\r\n      this.scale = scale || this.scale;\r\n      if (typeof rotation !== 'undefined') {\r\n        this.rotation = rotation;\r\n      }\r\n      var totalRotation = (this.rotation + this.pdfPageRotate) % 360;\r\n      this.viewport = this.viewport.clone({\r\n        scale: this.scale * _ui_utils.CSS_UNITS,\r\n        rotation: totalRotation\r\n      });\r\n      if (this.svg) {\r\n        this.cssTransform(this.svg, true);\r\n        this.eventBus.dispatch('pagerendered', {\r\n          source: this,\r\n          pageNumber: this.id,\r\n          cssTransform: true\r\n        });\r\n        return;\r\n      }\r\n      var isScalingRestricted = false;\r\n      if (this.canvas && this.maxCanvasPixels > 0) {\r\n        var outputScale = this.outputScale;\r\n        if ((Math.floor(this.viewport.width) * outputScale.sx | 0) * (Math.floor(this.viewport.height) * outputScale.sy | 0) > this.maxCanvasPixels) {\r\n          isScalingRestricted = true;\r\n        }\r\n      }\r\n      if (this.canvas) {\r\n        if (this.useOnlyCssZoom || this.hasRestrictedScaling && isScalingRestricted) {\r\n          this.cssTransform(this.canvas, true);\r\n          this.eventBus.dispatch('pagerendered', {\r\n            source: this,\r\n            pageNumber: this.id,\r\n            cssTransform: true\r\n          });\r\n          return;\r\n        }\r\n        if (!this.zoomLayer && !this.canvas.hasAttribute('hidden')) {\r\n          this.zoomLayer = this.canvas.parentNode;\r\n          this.zoomLayer.style.position = 'absolute';\r\n        }\r\n      }\r\n      if (this.zoomLayer) {\r\n        this.cssTransform(this.zoomLayer.firstChild);\r\n      }\r\n      this.reset(true, true);\r\n    }\r\n  }, {\r\n    key: 'cancelRendering',\r\n    value: function cancelRendering() {\r\n      var keepAnnotations = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\r\n\r\n      if (this.paintTask) {\r\n        this.paintTask.cancel();\r\n        this.paintTask = null;\r\n      }\r\n      this.renderingState = _pdf_rendering_queue.RenderingStates.INITIAL;\r\n      this.resume = null;\r\n      if (this.textLayer) {\r\n        this.textLayer.cancel();\r\n        this.textLayer = null;\r\n      }\r\n      if (!keepAnnotations && this.annotationLayer) {\r\n        this.annotationLayer.cancel();\r\n        this.annotationLayer = null;\r\n      }\r\n    }\r\n  }, {\r\n    key: 'cssTransform',\r\n    value: function cssTransform(target) {\r\n      var redrawAnnotations = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\r\n\r\n      var width = this.viewport.width;\r\n      var height = this.viewport.height;\r\n      var div = this.div;\r\n      target.style.width = target.parentNode.style.width = div.style.width = Math.floor(width) + 'px';\r\n      target.style.height = target.parentNode.style.height = div.style.height = Math.floor(height) + 'px';\r\n      var relativeRotation = this.viewport.rotation - this.paintedViewportMap.get(target).rotation;\r\n      var absRotation = Math.abs(relativeRotation);\r\n      var scaleX = 1,\r\n          scaleY = 1;\r\n      if (absRotation === 90 || absRotation === 270) {\r\n        scaleX = height / width;\r\n        scaleY = width / height;\r\n      }\r\n      var cssTransform = 'rotate(' + relativeRotation + 'deg) ' + 'scale(' + scaleX + ',' + scaleY + ')';\r\n      target.style.transform = cssTransform;\r\n      if (this.textLayer) {\r\n        var textLayerViewport = this.textLayer.viewport;\r\n        var textRelativeRotation = this.viewport.rotation - textLayerViewport.rotation;\r\n        var textAbsRotation = Math.abs(textRelativeRotation);\r\n        var scale = width / textLayerViewport.width;\r\n        if (textAbsRotation === 90 || textAbsRotation === 270) {\r\n          scale = width / textLayerViewport.height;\r\n        }\r\n        var textLayerDiv = this.textLayer.textLayerDiv;\r\n        var transX = void 0,\r\n            transY = void 0;\r\n        switch (textAbsRotation) {\r\n          case 0:\r\n            transX = transY = 0;\r\n            break;\r\n          case 90:\r\n            transX = 0;\r\n            transY = '-' + textLayerDiv.style.height;\r\n            break;\r\n          case 180:\r\n            transX = '-' + textLayerDiv.style.width;\r\n            transY = '-' + textLayerDiv.style.height;\r\n            break;\r\n          case 270:\r\n            transX = '-' + textLayerDiv.style.width;\r\n            transY = 0;\r\n            break;\r\n          default:\r\n            console.error('Bad rotation value.');\r\n            break;\r\n        }\r\n        textLayerDiv.style.transform = 'rotate(' + textAbsRotation + 'deg) ' + 'scale(' + scale + ', ' + scale + ') ' + 'translate(' + transX + ', ' + transY + ')';\r\n        textLayerDiv.style.transformOrigin = '0% 0%';\r\n      }\r\n      if (redrawAnnotations && this.annotationLayer) {\r\n        this.annotationLayer.render(this.viewport, 'display');\r\n      }\r\n    }\r\n  }, {\r\n    key: 'getPagePoint',\r\n    value: function getPagePoint(x, y) {\r\n      return this.viewport.convertToPdfPoint(x, y);\r\n    }\r\n  }, {\r\n    key: 'draw',\r\n    value: function draw() {\r\n      var _this = this;\r\n\r\n      if (this.renderingState !== _pdf_rendering_queue.RenderingStates.INITIAL) {\r\n        console.error('Must be in new state before drawing');\r\n        this.reset();\r\n      }\r\n      if (!this.pdfPage) {\r\n        this.renderingState = _pdf_rendering_queue.RenderingStates.FINISHED;\r\n        return Promise.reject(new Error('Page is not loaded'));\r\n      }\r\n      this.renderingState = _pdf_rendering_queue.RenderingStates.RUNNING;\r\n      var pdfPage = this.pdfPage;\r\n      var div = this.div;\r\n      var canvasWrapper = document.createElement('div');\r\n      canvasWrapper.style.width = div.style.width;\r\n      canvasWrapper.style.height = div.style.height;\r\n      canvasWrapper.classList.add('canvasWrapper');\r\n      if (this.annotationLayer && this.annotationLayer.div) {\r\n        div.insertBefore(canvasWrapper, this.annotationLayer.div);\r\n      } else {\r\n        div.appendChild(canvasWrapper);\r\n      }\r\n      var textLayer = null;\r\n      if (this.textLayerMode !== _ui_utils.TextLayerMode.DISABLE && this.textLayerFactory) {\r\n        var textLayerDiv = document.createElement('div');\r\n        textLayerDiv.className = 'textLayer';\r\n        textLayerDiv.style.width = canvasWrapper.style.width;\r\n        textLayerDiv.style.height = canvasWrapper.style.height;\r\n        if (this.annotationLayer && this.annotationLayer.div) {\r\n          div.insertBefore(textLayerDiv, this.annotationLayer.div);\r\n        } else {\r\n          div.appendChild(textLayerDiv);\r\n        }\r\n        textLayer = this.textLayerFactory.createTextLayerBuilder(textLayerDiv, this.id - 1, this.viewport, this.textLayerMode === _ui_utils.TextLayerMode.ENABLE_ENHANCE);\r\n      }\r\n      this.textLayer = textLayer;\r\n      var renderContinueCallback = null;\r\n      if (this.renderingQueue) {\r\n        renderContinueCallback = function renderContinueCallback(cont) {\r\n          if (!_this.renderingQueue.isHighestPriority(_this)) {\r\n            _this.renderingState = _pdf_rendering_queue.RenderingStates.PAUSED;\r\n            _this.resume = function () {\r\n              _this.renderingState = _pdf_rendering_queue.RenderingStates.RUNNING;\r\n              cont();\r\n            };\r\n            return;\r\n          }\r\n          cont();\r\n        };\r\n      }\r\n      var finishPaintTask = function finishPaintTask(error) {\r\n        if (paintTask === _this.paintTask) {\r\n          _this.paintTask = null;\r\n        }\r\n        if (error instanceof _pdfjsLib.RenderingCancelledException) {\r\n          _this.error = null;\r\n          return Promise.resolve(undefined);\r\n        }\r\n        _this.renderingState = _pdf_rendering_queue.RenderingStates.FINISHED;\r\n        if (_this.loadingIconDiv) {\r\n          div.removeChild(_this.loadingIconDiv);\r\n          delete _this.loadingIconDiv;\r\n        }\r\n        _this._resetZoomLayer(true);\r\n        _this.error = error;\r\n        _this.stats = pdfPage.stats;\r\n        if (_this.onAfterDraw) {\r\n          _this.onAfterDraw();\r\n        }\r\n        _this.eventBus.dispatch('pagerendered', {\r\n          source: _this,\r\n          pageNumber: _this.id,\r\n          cssTransform: false\r\n        });\r\n        if (error) {\r\n          return Promise.reject(error);\r\n        }\r\n        return Promise.resolve(undefined);\r\n      };\r\n      var paintTask = this.renderer === _ui_utils.RendererType.SVG ? this.paintOnSvg(canvasWrapper) : this.paintOnCanvas(canvasWrapper);\r\n      paintTask.onRenderContinue = renderContinueCallback;\r\n      this.paintTask = paintTask;\r\n      var resultPromise = paintTask.promise.then(function () {\r\n        return finishPaintTask(null).then(function () {\r\n          if (textLayer) {\r\n            var readableStream = pdfPage.streamTextContent({ normalizeWhitespace: true });\r\n            textLayer.setTextContentStream(readableStream);\r\n            textLayer.render();\r\n          }\r\n        });\r\n      }, function (reason) {\r\n        return finishPaintTask(reason);\r\n      });\r\n      if (this.annotationLayerFactory) {\r\n        if (!this.annotationLayer) {\r\n          this.annotationLayer = this.annotationLayerFactory.createAnnotationLayerBuilder(div, pdfPage, this.imageResourcesPath, this.renderInteractiveForms, this.l10n);\r\n        }\r\n        this.annotationLayer.render(this.viewport, 'display');\r\n      }\r\n      div.setAttribute('data-loaded', true);\r\n      if (this.onBeforeDraw) {\r\n        this.onBeforeDraw();\r\n      }\r\n      return resultPromise;\r\n    }\r\n  }, {\r\n    key: 'paintOnCanvas',\r\n    value: function paintOnCanvas(canvasWrapper) {\r\n      var renderCapability = (0, _pdfjsLib.createPromiseCapability)();\r\n      var result = {\r\n        promise: renderCapability.promise,\r\n        onRenderContinue: function onRenderContinue(cont) {\r\n          cont();\r\n        },\r\n        cancel: function cancel() {\r\n          renderTask.cancel();\r\n        }\r\n      };\r\n      var viewport = this.viewport;\r\n      var canvas = document.createElement('canvas');\r\n      canvas.id = this.renderingId;\r\n      canvas.setAttribute('hidden', 'hidden');\r\n      var isCanvasHidden = true;\r\n      var showCanvas = function showCanvas() {\r\n        if (isCanvasHidden) {\r\n          canvas.removeAttribute('hidden');\r\n          isCanvasHidden = false;\r\n        }\r\n      };\r\n      canvasWrapper.appendChild(canvas);\r\n      this.canvas = canvas;\r\n      canvas.mozOpaque = true;\r\n      var ctx = canvas.getContext('2d', { alpha: false });\r\n      var outputScale = (0, _ui_utils.getOutputScale)(ctx);\r\n      this.outputScale = outputScale;\r\n      if (this.useOnlyCssZoom) {\r\n        var actualSizeViewport = viewport.clone({ scale: _ui_utils.CSS_UNITS });\r\n        outputScale.sx *= actualSizeViewport.width / viewport.width;\r\n        outputScale.sy *= actualSizeViewport.height / viewport.height;\r\n        outputScale.scaled = true;\r\n      }\r\n      if (this.maxCanvasPixels > 0) {\r\n        var pixelsInViewport = viewport.width * viewport.height;\r\n        var maxScale = Math.sqrt(this.maxCanvasPixels / pixelsInViewport);\r\n        if (outputScale.sx > maxScale || outputScale.sy > maxScale) {\r\n          outputScale.sx = maxScale;\r\n          outputScale.sy = maxScale;\r\n          outputScale.scaled = true;\r\n          this.hasRestrictedScaling = true;\r\n        } else {\r\n          this.hasRestrictedScaling = false;\r\n        }\r\n      }\r\n      var sfx = (0, _ui_utils.approximateFraction)(outputScale.sx);\r\n      var sfy = (0, _ui_utils.approximateFraction)(outputScale.sy);\r\n      canvas.width = (0, _ui_utils.roundToDivide)(viewport.width * outputScale.sx, sfx[0]);\r\n      canvas.height = (0, _ui_utils.roundToDivide)(viewport.height * outputScale.sy, sfy[0]);\r\n      canvas.style.width = (0, _ui_utils.roundToDivide)(viewport.width, sfx[1]) + 'px';\r\n      canvas.style.height = (0, _ui_utils.roundToDivide)(viewport.height, sfy[1]) + 'px';\r\n      this.paintedViewportMap.set(canvas, viewport);\r\n      var transform = !outputScale.scaled ? null : [outputScale.sx, 0, 0, outputScale.sy, 0, 0];\r\n      var renderContext = {\r\n        canvasContext: ctx,\r\n        transform: transform,\r\n        viewport: this.viewport,\r\n        enableWebGL: this.enableWebGL,\r\n        renderInteractiveForms: this.renderInteractiveForms\r\n      };\r\n      var renderTask = this.pdfPage.render(renderContext);\r\n      renderTask.onContinue = function (cont) {\r\n        showCanvas();\r\n        if (result.onRenderContinue) {\r\n          result.onRenderContinue(cont);\r\n        } else {\r\n          cont();\r\n        }\r\n      };\r\n      renderTask.promise.then(function () {\r\n        showCanvas();\r\n        renderCapability.resolve(undefined);\r\n      }, function (error) {\r\n        showCanvas();\r\n        renderCapability.reject(error);\r\n      });\r\n      return result;\r\n    }\r\n  }, {\r\n    key: 'paintOnSvg',\r\n    value: function paintOnSvg(wrapper) {\r\n      var _this2 = this;\r\n\r\n      var cancelled = false;\r\n      var ensureNotCancelled = function ensureNotCancelled() {\r\n        if (cancelled) {\r\n          throw new _pdfjsLib.RenderingCancelledException('Rendering cancelled, page ' + _this2.id, 'svg');\r\n        }\r\n      };\r\n      var pdfPage = this.pdfPage;\r\n      var actualSizeViewport = this.viewport.clone({ scale: _ui_utils.CSS_UNITS });\r\n      var promise = pdfPage.getOperatorList().then(function (opList) {\r\n        ensureNotCancelled();\r\n        var svgGfx = new _pdfjsLib.SVGGraphics(pdfPage.commonObjs, pdfPage.objs);\r\n        return svgGfx.getSVG(opList, actualSizeViewport).then(function (svg) {\r\n          ensureNotCancelled();\r\n          _this2.svg = svg;\r\n          _this2.paintedViewportMap.set(svg, actualSizeViewport);\r\n          svg.style.width = wrapper.style.width;\r\n          svg.style.height = wrapper.style.height;\r\n          _this2.renderingState = _pdf_rendering_queue.RenderingStates.FINISHED;\r\n          wrapper.appendChild(svg);\r\n        });\r\n      });\r\n      return {\r\n        promise: promise,\r\n        onRenderContinue: function onRenderContinue(cont) {\r\n          cont();\r\n        },\r\n        cancel: function cancel() {\r\n          cancelled = true;\r\n        }\r\n      };\r\n    }\r\n  }, {\r\n    key: 'setPageLabel',\r\n    value: function setPageLabel(label) {\r\n      this.pageLabel = typeof label === 'string' ? label : null;\r\n      if (this.pageLabel !== null) {\r\n        this.div.setAttribute('data-page-label', this.pageLabel);\r\n      } else {\r\n        this.div.removeAttribute('data-page-label');\r\n      }\r\n    }\r\n  }, {\r\n    key: 'width',\r\n    get: function get() {\r\n      return this.viewport.width;\r\n    }\r\n  }, {\r\n    key: 'height',\r\n    get: function get() {\r\n      return this.viewport.height;\r\n    }\r\n  }]);\r\n\r\n  return PDFPageView;\r\n}();\r\n\r\nexports.PDFPageView = PDFPageView;\r\n\r\n/***/ }),\r\n/* 7 */\r\n/***/ (function(module, exports, __w_pdfjs_require__) {\r\n\r\n\"use strict\";\r\n\r\n\r\nObject.defineProperty(exports, \"__esModule\", {\r\n  value: true\r\n});\r\n\r\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\r\n\r\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\r\n\r\nvar CLEANUP_TIMEOUT = 30000;\r\nvar RenderingStates = {\r\n  INITIAL: 0,\r\n  RUNNING: 1,\r\n  PAUSED: 2,\r\n  FINISHED: 3\r\n};\r\n\r\nvar PDFRenderingQueue = function () {\r\n  function PDFRenderingQueue() {\r\n    _classCallCheck(this, PDFRenderingQueue);\r\n\r\n    this.pdfViewer = null;\r\n    this.pdfThumbnailViewer = null;\r\n    this.onIdle = null;\r\n    this.highestPriorityPage = null;\r\n    this.idleTimeout = null;\r\n    this.printing = false;\r\n    this.isThumbnailViewEnabled = false;\r\n  }\r\n\r\n  _createClass(PDFRenderingQueue, [{\r\n    key: \"setViewer\",\r\n    value: function setViewer(pdfViewer) {\r\n      this.pdfViewer = pdfViewer;\r\n    }\r\n  }, {\r\n    key: \"setThumbnailViewer\",\r\n    value: function setThumbnailViewer(pdfThumbnailViewer) {\r\n      this.pdfThumbnailViewer = pdfThumbnailViewer;\r\n    }\r\n  }, {\r\n    key: \"isHighestPriority\",\r\n    value: function isHighestPriority(view) {\r\n      return this.highestPriorityPage === view.renderingId;\r\n    }\r\n  }, {\r\n    key: \"renderHighestPriority\",\r\n    value: function renderHighestPriority(currentlyVisiblePages) {\r\n      if (this.idleTimeout) {\r\n        clearTimeout(this.idleTimeout);\r\n        this.idleTimeout = null;\r\n      }\r\n      if (this.pdfViewer.forceRendering(currentlyVisiblePages)) {\r\n        return;\r\n      }\r\n      if (this.pdfThumbnailViewer && this.isThumbnailViewEnabled) {\r\n        if (this.pdfThumbnailViewer.forceRendering()) {\r\n          return;\r\n        }\r\n      }\r\n      if (this.printing) {\r\n        return;\r\n      }\r\n      if (this.onIdle) {\r\n        this.idleTimeout = setTimeout(this.onIdle.bind(this), CLEANUP_TIMEOUT);\r\n      }\r\n    }\r\n  }, {\r\n    key: \"getHighestPriority\",\r\n    value: function getHighestPriority(visible, views, scrolledDown) {\r\n      var visibleViews = visible.views;\r\n      var numVisible = visibleViews.length;\r\n      if (numVisible === 0) {\r\n        return false;\r\n      }\r\n      for (var i = 0; i < numVisible; ++i) {\r\n        var view = visibleViews[i].view;\r\n        if (!this.isViewFinished(view)) {\r\n          return view;\r\n        }\r\n      }\r\n      if (scrolledDown) {\r\n        var nextPageIndex = visible.last.id;\r\n        if (views[nextPageIndex] && !this.isViewFinished(views[nextPageIndex])) {\r\n          return views[nextPageIndex];\r\n        }\r\n      } else {\r\n        var previousPageIndex = visible.first.id - 2;\r\n        if (views[previousPageIndex] && !this.isViewFinished(views[previousPageIndex])) {\r\n          return views[previousPageIndex];\r\n        }\r\n      }\r\n      return null;\r\n    }\r\n  }, {\r\n    key: \"isViewFinished\",\r\n    value: function isViewFinished(view) {\r\n      return view.renderingState === RenderingStates.FINISHED;\r\n    }\r\n  }, {\r\n    key: \"renderView\",\r\n    value: function renderView(view) {\r\n      var _this = this;\r\n\r\n      switch (view.renderingState) {\r\n        case RenderingStates.FINISHED:\r\n          return false;\r\n        case RenderingStates.PAUSED:\r\n          this.highestPriorityPage = view.renderingId;\r\n          view.resume();\r\n          break;\r\n        case RenderingStates.RUNNING:\r\n          this.highestPriorityPage = view.renderingId;\r\n          break;\r\n        case RenderingStates.INITIAL:\r\n          this.highestPriorityPage = view.renderingId;\r\n          var continueRendering = function continueRendering() {\r\n            _this.renderHighestPriority();\r\n          };\r\n          view.draw().then(continueRendering, continueRendering);\r\n          break;\r\n      }\r\n      return true;\r\n    }\r\n  }]);\r\n\r\n  return PDFRenderingQueue;\r\n}();\r\n\r\nexports.RenderingStates = RenderingStates;\r\nexports.PDFRenderingQueue = PDFRenderingQueue;\r\n\r\n/***/ }),\r\n/* 8 */\r\n/***/ (function(module, exports, __w_pdfjs_require__) {\r\n\r\n\"use strict\";\r\n\r\n\r\nObject.defineProperty(exports, \"__esModule\", {\r\n  value: true\r\n});\r\nexports.BaseViewer = undefined;\r\n\r\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\r\n\r\nvar _ui_utils = __w_pdfjs_require__(0);\r\n\r\nvar _pdf_rendering_queue = __w_pdfjs_require__(7);\r\n\r\nvar _annotation_layer_builder = __w_pdfjs_require__(4);\r\n\r\nvar _pdfjsLib = __w_pdfjs_require__(1);\r\n\r\nvar _dom_events = __w_pdfjs_require__(2);\r\n\r\nvar _pdf_page_view = __w_pdfjs_require__(6);\r\n\r\nvar _pdf_link_service = __w_pdfjs_require__(3);\r\n\r\nvar _text_layer_builder = __w_pdfjs_require__(5);\r\n\r\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\r\n\r\nvar DEFAULT_CACHE_SIZE = 10;\r\nfunction PDFPageViewBuffer(size) {\r\n  var data = [];\r\n  this.push = function (view) {\r\n    var i = data.indexOf(view);\r\n    if (i >= 0) {\r\n      data.splice(i, 1);\r\n    }\r\n    data.push(view);\r\n    if (data.length > size) {\r\n      data.shift().destroy();\r\n    }\r\n  };\r\n  this.resize = function (newSize) {\r\n    size = newSize;\r\n    while (data.length > size) {\r\n      data.shift().destroy();\r\n    }\r\n  };\r\n}\r\nfunction isSameScale(oldScale, newScale) {\r\n  if (newScale === oldScale) {\r\n    return true;\r\n  }\r\n  if (Math.abs(newScale - oldScale) < 1e-15) {\r\n    return true;\r\n  }\r\n  return false;\r\n}\r\n\r\nvar BaseViewer = function () {\r\n  function BaseViewer(options) {\r\n    _classCallCheck(this, BaseViewer);\r\n\r\n    if (this.constructor === BaseViewer) {\r\n      throw new Error('Cannot initialize BaseViewer.');\r\n    }\r\n    this._name = this.constructor.name;\r\n    this.container = options.container;\r\n    this.viewer = options.viewer || options.container.firstElementChild;\r\n    this.eventBus = options.eventBus || (0, _dom_events.getGlobalEventBus)();\r\n    this.linkService = options.linkService || new _pdf_link_service.SimpleLinkService();\r\n    this.downloadManager = options.downloadManager || null;\r\n    this.removePageBorders = options.removePageBorders || false;\r\n    this.textLayerMode = Number.isInteger(options.textLayerMode) ? options.textLayerMode : _ui_utils.TextLayerMode.ENABLE;\r\n    this.enhanceTextSelection = options.enhanceTextSelection || false;\r\n    this.imageResourcesPath = options.imageResourcesPath || '';\r\n    this.renderInteractiveForms = options.renderInteractiveForms || false;\r\n    this.enablePrintAutoRotate = options.enablePrintAutoRotate || false;\r\n    this.renderer = options.renderer || _ui_utils.RendererType.CANVAS;\r\n    this.enableWebGL = options.enableWebGL || false;\r\n    this.useOnlyCssZoom = options.useOnlyCssZoom || false;\r\n    this.maxCanvasPixels = options.maxCanvasPixels;\r\n    this.l10n = options.l10n || _ui_utils.NullL10n;\r\n    this.defaultRenderingQueue = !options.renderingQueue;\r\n    if (this.defaultRenderingQueue) {\r\n      this.renderingQueue = new _pdf_rendering_queue.PDFRenderingQueue();\r\n      this.renderingQueue.setViewer(this);\r\n    } else {\r\n      this.renderingQueue = options.renderingQueue;\r\n    }\r\n    this.scroll = (0, _ui_utils.watchScroll)(this.container, this._scrollUpdate.bind(this));\r\n    this.presentationModeState = _ui_utils.PresentationModeState.UNKNOWN;\r\n    this._resetView();\r\n    if (this.removePageBorders) {\r\n      this.viewer.classList.add('removePageBorders');\r\n    }\r\n  }\r\n\r\n  _createClass(BaseViewer, [{\r\n    key: 'getPageView',\r\n    value: function getPageView(index) {\r\n      return this._pages[index];\r\n    }\r\n  }, {\r\n    key: '_setCurrentPageNumber',\r\n    value: function _setCurrentPageNumber(val) {\r\n      var resetCurrentPageView = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\r\n\r\n      if (this._currentPageNumber === val) {\r\n        if (resetCurrentPageView) {\r\n          this._resetCurrentPageView();\r\n        }\r\n        return;\r\n      }\r\n      if (!(0 < val && val <= this.pagesCount)) {\r\n        console.error(this._name + '._setCurrentPageNumber: \"' + val + '\" is out of bounds.');\r\n        return;\r\n      }\r\n      var arg = {\r\n        source: this,\r\n        pageNumber: val,\r\n        pageLabel: this._pageLabels && this._pageLabels[val - 1]\r\n      };\r\n      this._currentPageNumber = val;\r\n      this.eventBus.dispatch('pagechanging', arg);\r\n      this.eventBus.dispatch('pagechange', arg);\r\n      if (resetCurrentPageView) {\r\n        this._resetCurrentPageView();\r\n      }\r\n    }\r\n  }, {\r\n    key: 'setDocument',\r\n    value: function setDocument(pdfDocument) {\r\n      var _this = this;\r\n\r\n      if (this.pdfDocument) {\r\n        this._cancelRendering();\r\n        this._resetView();\r\n      }\r\n      this.pdfDocument = pdfDocument;\r\n      if (!pdfDocument) {\r\n        return;\r\n      }\r\n      var pagesCount = pdfDocument.numPages;\r\n      var pagesCapability = (0, _pdfjsLib.createPromiseCapability)();\r\n      this.pagesPromise = pagesCapability.promise;\r\n      pagesCapability.promise.then(function () {\r\n        _this._pageViewsReady = true;\r\n        _this.eventBus.dispatch('pagesloaded', {\r\n          source: _this,\r\n          pagesCount: pagesCount\r\n        });\r\n      });\r\n      var isOnePageRenderedResolved = false;\r\n      var onePageRenderedCapability = (0, _pdfjsLib.createPromiseCapability)();\r\n      this.onePageRendered = onePageRenderedCapability.promise;\r\n      var bindOnAfterAndBeforeDraw = function bindOnAfterAndBeforeDraw(pageView) {\r\n        pageView.onBeforeDraw = function () {\r\n          _this._buffer.push(pageView);\r\n        };\r\n        pageView.onAfterDraw = function () {\r\n          if (!isOnePageRenderedResolved) {\r\n            isOnePageRenderedResolved = true;\r\n            onePageRenderedCapability.resolve();\r\n          }\r\n        };\r\n      };\r\n      var firstPagePromise = pdfDocument.getPage(1);\r\n      this.firstPagePromise = firstPagePromise;\r\n      firstPagePromise.then(function (pdfPage) {\r\n        var scale = _this.currentScale;\r\n        var viewport = pdfPage.getViewport(scale * _ui_utils.CSS_UNITS);\r\n        for (var pageNum = 1; pageNum <= pagesCount; ++pageNum) {\r\n          var textLayerFactory = null;\r\n          if (_this.textLayerMode !== _ui_utils.TextLayerMode.DISABLE) {\r\n            textLayerFactory = _this;\r\n          }\r\n          var pageView = new _pdf_page_view.PDFPageView({\r\n            container: _this._setDocumentViewerElement,\r\n            eventBus: _this.eventBus,\r\n            id: pageNum,\r\n            scale: scale,\r\n            defaultViewport: viewport.clone(),\r\n            renderingQueue: _this.renderingQueue,\r\n            textLayerFactory: textLayerFactory,\r\n            textLayerMode: _this.textLayerMode,\r\n            annotationLayerFactory: _this,\r\n            imageResourcesPath: _this.imageResourcesPath,\r\n            renderInteractiveForms: _this.renderInteractiveForms,\r\n            renderer: _this.renderer,\r\n            enableWebGL: _this.enableWebGL,\r\n            useOnlyCssZoom: _this.useOnlyCssZoom,\r\n            maxCanvasPixels: _this.maxCanvasPixels,\r\n            l10n: _this.l10n\r\n          });\r\n          bindOnAfterAndBeforeDraw(pageView);\r\n          _this._pages.push(pageView);\r\n        }\r\n        onePageRenderedCapability.promise.then(function () {\r\n          if (pdfDocument.loadingParams['disableAutoFetch']) {\r\n            pagesCapability.resolve();\r\n            return;\r\n          }\r\n          var getPagesLeft = pagesCount;\r\n\r\n          var _loop = function _loop(_pageNum) {\r\n            pdfDocument.getPage(_pageNum).then(function (pdfPage) {\r\n              var pageView = _this._pages[_pageNum - 1];\r\n              if (!pageView.pdfPage) {\r\n                pageView.setPdfPage(pdfPage);\r\n              }\r\n              _this.linkService.cachePageRef(_pageNum, pdfPage.ref);\r\n              if (--getPagesLeft === 0) {\r\n                pagesCapability.resolve();\r\n              }\r\n            }, function (reason) {\r\n              console.error('Unable to get page ' + _pageNum + ' to initialize viewer', reason);\r\n              if (--getPagesLeft === 0) {\r\n                pagesCapability.resolve();\r\n              }\r\n            });\r\n          };\r\n\r\n          for (var _pageNum = 1; _pageNum <= pagesCount; ++_pageNum) {\r\n            _loop(_pageNum);\r\n          }\r\n        });\r\n        _this.eventBus.dispatch('pagesinit', { source: _this });\r\n        if (_this.defaultRenderingQueue) {\r\n          _this.update();\r\n        }\r\n        if (_this.findController) {\r\n          _this.findController.resolveFirstPage();\r\n        }\r\n      }).catch(function (reason) {\r\n        console.error('Unable to initialize viewer', reason);\r\n      });\r\n    }\r\n  }, {\r\n    key: 'setPageLabels',\r\n    value: function setPageLabels(labels) {\r\n      if (!this.pdfDocument) {\r\n        return;\r\n      }\r\n      if (!labels) {\r\n        this._pageLabels = null;\r\n      } else if (!(labels instanceof Array && this.pdfDocument.numPages === labels.length)) {\r\n        this._pageLabels = null;\r\n        console.error(this._name + '.setPageLabels: Invalid page labels.');\r\n      } else {\r\n        this._pageLabels = labels;\r\n      }\r\n      for (var i = 0, ii = this._pages.length; i < ii; i++) {\r\n        var pageView = this._pages[i];\r\n        var label = this._pageLabels && this._pageLabels[i];\r\n        pageView.setPageLabel(label);\r\n      }\r\n    }\r\n  }, {\r\n    key: '_resetView',\r\n    value: function _resetView() {\r\n      this._pages = [];\r\n      this._currentPageNumber = 1;\r\n      this._currentScale = _ui_utils.UNKNOWN_SCALE;\r\n      this._currentScaleValue = null;\r\n      this._pageLabels = null;\r\n      this._buffer = new PDFPageViewBuffer(DEFAULT_CACHE_SIZE);\r\n      this._location = null;\r\n      this._pagesRotation = 0;\r\n      this._pagesRequests = [];\r\n      this._pageViewsReady = false;\r\n      this.viewer.textContent = '';\r\n    }\r\n  }, {\r\n    key: '_scrollUpdate',\r\n    value: function _scrollUpdate() {\r\n      if (this.pagesCount === 0) {\r\n        return;\r\n      }\r\n      this.update();\r\n    }\r\n  }, {\r\n    key: '_scrollIntoView',\r\n    value: function _scrollIntoView(_ref) {\r\n      var pageDiv = _ref.pageDiv,\r\n          _ref$pageSpot = _ref.pageSpot,\r\n          pageSpot = _ref$pageSpot === undefined ? null : _ref$pageSpot,\r\n          _ref$pageNumber = _ref.pageNumber,\r\n          pageNumber = _ref$pageNumber === undefined ? null : _ref$pageNumber;\r\n\r\n      throw new Error('Not implemented: _scrollIntoView');\r\n    }\r\n  }, {\r\n    key: '_setScaleDispatchEvent',\r\n    value: function _setScaleDispatchEvent(newScale, newValue) {\r\n      var preset = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\r\n\r\n      var arg = {\r\n        source: this,\r\n        scale: newScale,\r\n        presetValue: preset ? newValue : undefined\r\n      };\r\n      this.eventBus.dispatch('scalechanging', arg);\r\n      this.eventBus.dispatch('scalechange', arg);\r\n    }\r\n  }, {\r\n    key: '_setScaleUpdatePages',\r\n    value: function _setScaleUpdatePages(newScale, newValue) {\r\n      var noScroll = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\r\n      var preset = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : false;\r\n\r\n      this._currentScaleValue = newValue.toString();\r\n      if (isSameScale(this._currentScale, newScale)) {\r\n        if (preset) {\r\n          this._setScaleDispatchEvent(newScale, newValue, true);\r\n        }\r\n        return;\r\n      }\r\n      for (var i = 0, ii = this._pages.length; i < ii; i++) {\r\n        this._pages[i].update(newScale);\r\n      }\r\n      this._currentScale = newScale;\r\n      if (!noScroll) {\r\n        var page = this._currentPageNumber,\r\n            dest = void 0;\r\n        if (this._location && !(this.isInPresentationMode || this.isChangingPresentationMode)) {\r\n          page = this._location.pageNumber;\r\n          dest = [null, { name: 'XYZ' }, this._location.left, this._location.top, null];\r\n        }\r\n        this.scrollPageIntoView({\r\n          pageNumber: page,\r\n          destArray: dest,\r\n          allowNegativeOffset: true\r\n        });\r\n      }\r\n      this._setScaleDispatchEvent(newScale, newValue, preset);\r\n      if (this.defaultRenderingQueue) {\r\n        this.update();\r\n      }\r\n    }\r\n  }, {\r\n    key: '_setScale',\r\n    value: function _setScale(value) {\r\n      var noScroll = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\r\n\r\n      var scale = parseFloat(value);\r\n      if (scale > 0) {\r\n        this._setScaleUpdatePages(scale, value, noScroll, false);\r\n      } else {\r\n        var currentPage = this._pages[this._currentPageNumber - 1];\r\n        if (!currentPage) {\r\n          return;\r\n        }\r\n        var hPadding = this.isInPresentationMode || this.removePageBorders ? 0 : _ui_utils.SCROLLBAR_PADDING;\r\n        var vPadding = this.isInPresentationMode || this.removePageBorders ? 0 : _ui_utils.VERTICAL_PADDING;\r\n        var pageWidthScale = (this.container.clientWidth - hPadding) / currentPage.width * currentPage.scale;\r\n        var pageHeightScale = (this.container.clientHeight - vPadding) / currentPage.height * currentPage.scale;\r\n        switch (value) {\r\n          case 'page-actual':\r\n            scale = 1;\r\n            break;\r\n          case 'page-width':\r\n            scale = pageWidthScale;\r\n            break;\r\n          case 'page-height':\r\n            scale = pageHeightScale;\r\n            break;\r\n          case 'page-fit':\r\n            scale = Math.min(pageWidthScale, pageHeightScale);\r\n            break;\r\n          case 'auto':\r\n            var horizontalScale = (0, _ui_utils.isPortraitOrientation)(currentPage) ? pageWidthScale : Math.min(pageHeightScale, pageWidthScale);\r\n            scale = Math.min(_ui_utils.MAX_AUTO_SCALE, horizontalScale);\r\n            break;\r\n          default:\r\n            console.error(this._name + '._setScale: \"' + value + '\" is an unknown zoom value.');\r\n            return;\r\n        }\r\n        this._setScaleUpdatePages(scale, value, noScroll, true);\r\n      }\r\n    }\r\n  }, {\r\n    key: '_resetCurrentPageView',\r\n    value: function _resetCurrentPageView() {\r\n      if (this.isInPresentationMode) {\r\n        this._setScale(this._currentScaleValue, true);\r\n      }\r\n      var pageView = this._pages[this._currentPageNumber - 1];\r\n      this._scrollIntoView({ pageDiv: pageView.div });\r\n    }\r\n  }, {\r\n    key: 'scrollPageIntoView',\r\n    value: function scrollPageIntoView(params) {\r\n      if (!this.pdfDocument) {\r\n        return;\r\n      }\r\n      var pageNumber = params.pageNumber || 0;\r\n      var dest = params.destArray || null;\r\n      var allowNegativeOffset = params.allowNegativeOffset || false;\r\n      if (this.isInPresentationMode || !dest) {\r\n        this._setCurrentPageNumber(pageNumber, true);\r\n        return;\r\n      }\r\n      var pageView = this._pages[pageNumber - 1];\r\n      if (!pageView) {\r\n        console.error(this._name + '.scrollPageIntoView: Invalid \"pageNumber\" parameter.');\r\n        return;\r\n      }\r\n      var x = 0,\r\n          y = 0;\r\n      var width = 0,\r\n          height = 0,\r\n          widthScale = void 0,\r\n          heightScale = void 0;\r\n      var changeOrientation = pageView.rotation % 180 === 0 ? false : true;\r\n      var pageWidth = (changeOrientation ? pageView.height : pageView.width) / pageView.scale / _ui_utils.CSS_UNITS;\r\n      var pageHeight = (changeOrientation ? pageView.width : pageView.height) / pageView.scale / _ui_utils.CSS_UNITS;\r\n      var scale = 0;\r\n      switch (dest[1].name) {\r\n        case 'XYZ':\r\n          x = dest[2];\r\n          y = dest[3];\r\n          scale = dest[4];\r\n          x = x !== null ? x : 0;\r\n          y = y !== null ? y : pageHeight;\r\n          break;\r\n        case 'Fit':\r\n        case 'FitB':\r\n          scale = 'page-fit';\r\n          break;\r\n        case 'FitH':\r\n        case 'FitBH':\r\n          y = dest[2];\r\n          scale = 'page-width';\r\n          if (y === null && this._location) {\r\n            x = this._location.left;\r\n            y = this._location.top;\r\n          }\r\n          break;\r\n        case 'FitV':\r\n        case 'FitBV':\r\n          x = dest[2];\r\n          width = pageWidth;\r\n          height = pageHeight;\r\n          scale = 'page-height';\r\n          break;\r\n        case 'FitR':\r\n          x = dest[2];\r\n          y = dest[3];\r\n          width = dest[4] - x;\r\n          height = dest[5] - y;\r\n          var hPadding = this.removePageBorders ? 0 : _ui_utils.SCROLLBAR_PADDING;\r\n          var vPadding = this.removePageBorders ? 0 : _ui_utils.VERTICAL_PADDING;\r\n          widthScale = (this.container.clientWidth - hPadding) / width / _ui_utils.CSS_UNITS;\r\n          heightScale = (this.container.clientHeight - vPadding) / height / _ui_utils.CSS_UNITS;\r\n          scale = Math.min(Math.abs(widthScale), Math.abs(heightScale));\r\n          break;\r\n        default:\r\n          console.error(this._name + '.scrollPageIntoView: \"' + dest[1].name + '\" ' + 'is not a valid destination type.');\r\n          return;\r\n      }\r\n      if (scale && scale !== this._currentScale) {\r\n        this.currentScaleValue = scale;\r\n      } else if (this._currentScale === _ui_utils.UNKNOWN_SCALE) {\r\n        this.currentScaleValue = _ui_utils.DEFAULT_SCALE_VALUE;\r\n      }\r\n      if (scale === 'page-fit' && !dest[4]) {\r\n        this._scrollIntoView({\r\n          pageDiv: pageView.div,\r\n          pageNumber: pageNumber\r\n        });\r\n        return;\r\n      }\r\n      var boundingRect = [pageView.viewport.convertToViewportPoint(x, y), pageView.viewport.convertToViewportPoint(x + width, y + height)];\r\n      var left = Math.min(boundingRect[0][0], boundingRect[1][0]);\r\n      var top = Math.min(boundingRect[0][1], boundingRect[1][1]);\r\n      if (!allowNegativeOffset) {\r\n        left = Math.max(left, 0);\r\n        top = Math.max(top, 0);\r\n      }\r\n      this._scrollIntoView({\r\n        pageDiv: pageView.div,\r\n        pageSpot: {\r\n          left: left,\r\n          top: top\r\n        },\r\n        pageNumber: pageNumber\r\n      });\r\n    }\r\n  }, {\r\n    key: '_resizeBuffer',\r\n    value: function _resizeBuffer(numVisiblePages) {\r\n      var suggestedCacheSize = Math.max(DEFAULT_CACHE_SIZE, 2 * numVisiblePages + 1);\r\n      this._buffer.resize(suggestedCacheSize);\r\n    }\r\n  }, {\r\n    key: '_updateLocation',\r\n    value: function _updateLocation(firstPage) {\r\n      var currentScale = this._currentScale;\r\n      var currentScaleValue = this._currentScaleValue;\r\n      var normalizedScaleValue = parseFloat(currentScaleValue) === currentScale ? Math.round(currentScale * 10000) / 100 : currentScaleValue;\r\n      var pageNumber = firstPage.id;\r\n      var pdfOpenParams = '#page=' + pageNumber;\r\n      pdfOpenParams += '&zoom=' + normalizedScaleValue;\r\n      var currentPageView = this._pages[pageNumber - 1];\r\n      var container = this.container;\r\n      var topLeft = currentPageView.getPagePoint(container.scrollLeft - firstPage.x, container.scrollTop - firstPage.y);\r\n      var intLeft = Math.round(topLeft[0]);\r\n      var intTop = Math.round(topLeft[1]);\r\n      pdfOpenParams += ',' + intLeft + ',' + intTop;\r\n      this._location = {\r\n        pageNumber: pageNumber,\r\n        scale: normalizedScaleValue,\r\n        top: intTop,\r\n        left: intLeft,\r\n        rotation: this._pagesRotation,\r\n        pdfOpenParams: pdfOpenParams\r\n      };\r\n    }\r\n  }, {\r\n    key: 'update',\r\n    value: function update() {\r\n      throw new Error('Not implemented: update');\r\n    }\r\n  }, {\r\n    key: 'containsElement',\r\n    value: function containsElement(element) {\r\n      return this.container.contains(element);\r\n    }\r\n  }, {\r\n    key: 'focus',\r\n    value: function focus() {\r\n      this.container.focus();\r\n    }\r\n  }, {\r\n    key: '_getVisiblePages',\r\n    value: function _getVisiblePages() {\r\n      throw new Error('Not implemented: _getVisiblePages');\r\n    }\r\n  }, {\r\n    key: 'cleanup',\r\n    value: function cleanup() {\r\n      for (var i = 0, ii = this._pages.length; i < ii; i++) {\r\n        if (this._pages[i] && this._pages[i].renderingState !== _pdf_rendering_queue.RenderingStates.FINISHED) {\r\n          this._pages[i].reset();\r\n        }\r\n      }\r\n    }\r\n  }, {\r\n    key: '_cancelRendering',\r\n    value: function _cancelRendering() {\r\n      for (var i = 0, ii = this._pages.length; i < ii; i++) {\r\n        if (this._pages[i]) {\r\n          this._pages[i].cancelRendering();\r\n        }\r\n      }\r\n    }\r\n  }, {\r\n    key: '_ensurePdfPageLoaded',\r\n    value: function _ensurePdfPageLoaded(pageView) {\r\n      var _this2 = this;\r\n\r\n      if (pageView.pdfPage) {\r\n        return Promise.resolve(pageView.pdfPage);\r\n      }\r\n      var pageNumber = pageView.id;\r\n      if (this._pagesRequests[pageNumber]) {\r\n        return this._pagesRequests[pageNumber];\r\n      }\r\n      var promise = this.pdfDocument.getPage(pageNumber).then(function (pdfPage) {\r\n        if (!pageView.pdfPage) {\r\n          pageView.setPdfPage(pdfPage);\r\n        }\r\n        _this2._pagesRequests[pageNumber] = null;\r\n        return pdfPage;\r\n      }).catch(function (reason) {\r\n        console.error('Unable to get page for page view', reason);\r\n        _this2._pagesRequests[pageNumber] = null;\r\n      });\r\n      this._pagesRequests[pageNumber] = promise;\r\n      return promise;\r\n    }\r\n  }, {\r\n    key: 'forceRendering',\r\n    value: function forceRendering(currentlyVisiblePages) {\r\n      var _this3 = this;\r\n\r\n      var visiblePages = currentlyVisiblePages || this._getVisiblePages();\r\n      var pageView = this.renderingQueue.getHighestPriority(visiblePages, this._pages, this.scroll.down);\r\n      if (pageView) {\r\n        this._ensurePdfPageLoaded(pageView).then(function () {\r\n          _this3.renderingQueue.renderView(pageView);\r\n        });\r\n        return true;\r\n      }\r\n      return false;\r\n    }\r\n  }, {\r\n    key: 'getPageTextContent',\r\n    value: function getPageTextContent(pageIndex) {\r\n      return this.pdfDocument.getPage(pageIndex + 1).then(function (page) {\r\n        return page.getTextContent({ normalizeWhitespace: true });\r\n      });\r\n    }\r\n  }, {\r\n    key: 'createTextLayerBuilder',\r\n    value: function createTextLayerBuilder(textLayerDiv, pageIndex, viewport) {\r\n      var enhanceTextSelection = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : false;\r\n\r\n      return new _text_layer_builder.TextLayerBuilder({\r\n        textLayerDiv: textLayerDiv,\r\n        eventBus: this.eventBus,\r\n        pageIndex: pageIndex,\r\n        viewport: viewport,\r\n        findController: this.isInPresentationMode ? null : this.findController,\r\n        enhanceTextSelection: this.isInPresentationMode ? false : enhanceTextSelection\r\n      });\r\n    }\r\n  }, {\r\n    key: 'createAnnotationLayerBuilder',\r\n    value: function createAnnotationLayerBuilder(pageDiv, pdfPage) {\r\n      var imageResourcesPath = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : '';\r\n      var renderInteractiveForms = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : false;\r\n      var l10n = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : _ui_utils.NullL10n;\r\n\r\n      return new _annotation_layer_builder.AnnotationLayerBuilder({\r\n        pageDiv: pageDiv,\r\n        pdfPage: pdfPage,\r\n        imageResourcesPath: imageResourcesPath,\r\n        renderInteractiveForms: renderInteractiveForms,\r\n        linkService: this.linkService,\r\n        downloadManager: this.downloadManager,\r\n        l10n: l10n\r\n      });\r\n    }\r\n  }, {\r\n    key: 'setFindController',\r\n    value: function setFindController(findController) {\r\n      this.findController = findController;\r\n    }\r\n  }, {\r\n    key: 'getPagesOverview',\r\n    value: function getPagesOverview() {\r\n      var pagesOverview = this._pages.map(function (pageView) {\r\n        var viewport = pageView.pdfPage.getViewport(1);\r\n        return {\r\n          width: viewport.width,\r\n          height: viewport.height,\r\n          rotation: viewport.rotation\r\n        };\r\n      });\r\n      if (!this.enablePrintAutoRotate) {\r\n        return pagesOverview;\r\n      }\r\n      var isFirstPagePortrait = (0, _ui_utils.isPortraitOrientation)(pagesOverview[0]);\r\n      return pagesOverview.map(function (size) {\r\n        if (isFirstPagePortrait === (0, _ui_utils.isPortraitOrientation)(size)) {\r\n          return size;\r\n        }\r\n        return {\r\n          width: size.height,\r\n          height: size.width,\r\n          rotation: (size.rotation + 90) % 360\r\n        };\r\n      });\r\n    }\r\n  }, {\r\n    key: 'pagesCount',\r\n    get: function get() {\r\n      return this._pages.length;\r\n    }\r\n  }, {\r\n    key: 'pageViewsReady',\r\n    get: function get() {\r\n      return this._pageViewsReady;\r\n    }\r\n  }, {\r\n    key: 'currentPageNumber',\r\n    get: function get() {\r\n      return this._currentPageNumber;\r\n    },\r\n    set: function set(val) {\r\n      if (!Number.isInteger(val)) {\r\n        throw new Error('Invalid page number.');\r\n      }\r\n      if (!this.pdfDocument) {\r\n        return;\r\n      }\r\n      this._setCurrentPageNumber(val, true);\r\n    }\r\n  }, {\r\n    key: 'currentPageLabel',\r\n    get: function get() {\r\n      return this._pageLabels && this._pageLabels[this._currentPageNumber - 1];\r\n    },\r\n    set: function set(val) {\r\n      var pageNumber = val | 0;\r\n      if (this._pageLabels) {\r\n        var i = this._pageLabels.indexOf(val);\r\n        if (i >= 0) {\r\n          pageNumber = i + 1;\r\n        }\r\n      }\r\n      this.currentPageNumber = pageNumber;\r\n    }\r\n  }, {\r\n    key: 'currentScale',\r\n    get: function get() {\r\n      return this._currentScale !== _ui_utils.UNKNOWN_SCALE ? this._currentScale : _ui_utils.DEFAULT_SCALE;\r\n    },\r\n    set: function set(val) {\r\n      if (isNaN(val)) {\r\n        throw new Error('Invalid numeric scale');\r\n      }\r\n      if (!this.pdfDocument) {\r\n        return;\r\n      }\r\n      this._setScale(val, false);\r\n    }\r\n  }, {\r\n    key: 'currentScaleValue',\r\n    get: function get() {\r\n      return this._currentScaleValue;\r\n    },\r\n    set: function set(val) {\r\n      if (!this.pdfDocument) {\r\n        return;\r\n      }\r\n      this._setScale(val, false);\r\n    }\r\n  }, {\r\n    key: 'pagesRotation',\r\n    get: function get() {\r\n      return this._pagesRotation;\r\n    },\r\n    set: function set(rotation) {\r\n      if (!(0, _ui_utils.isValidRotation)(rotation)) {\r\n        throw new Error('Invalid pages rotation angle.');\r\n      }\r\n      if (!this.pdfDocument) {\r\n        return;\r\n      }\r\n      if (this._pagesRotation === rotation) {\r\n        return;\r\n      }\r\n      this._pagesRotation = rotation;\r\n      var pageNumber = this._currentPageNumber;\r\n      for (var i = 0, ii = this._pages.length; i < ii; i++) {\r\n        var pageView = this._pages[i];\r\n        pageView.update(pageView.scale, rotation);\r\n      }\r\n      if (this._currentScaleValue) {\r\n        this._setScale(this._currentScaleValue, true);\r\n      }\r\n      this.eventBus.dispatch('rotationchanging', {\r\n        source: this,\r\n        pagesRotation: rotation,\r\n        pageNumber: pageNumber\r\n      });\r\n      if (this.defaultRenderingQueue) {\r\n        this.update();\r\n      }\r\n    }\r\n  }, {\r\n    key: '_setDocumentViewerElement',\r\n    get: function get() {\r\n      throw new Error('Not implemented: _setDocumentViewerElement');\r\n    }\r\n  }, {\r\n    key: 'isInPresentationMode',\r\n    get: function get() {\r\n      return this.presentationModeState === _ui_utils.PresentationModeState.FULLSCREEN;\r\n    }\r\n  }, {\r\n    key: 'isChangingPresentationMode',\r\n    get: function get() {\r\n      return this.presentationModeState === _ui_utils.PresentationModeState.CHANGING;\r\n    }\r\n  }, {\r\n    key: 'isHorizontalScrollbarEnabled',\r\n    get: function get() {\r\n      return this.isInPresentationMode ? false : this.container.scrollWidth > this.container.clientWidth;\r\n    }\r\n  }, {\r\n    key: 'hasEqualPageSizes',\r\n    get: function get() {\r\n      var firstPageView = this._pages[0];\r\n      for (var i = 1, ii = this._pages.length; i < ii; ++i) {\r\n        var pageView = this._pages[i];\r\n        if (pageView.width !== firstPageView.width || pageView.height !== firstPageView.height) {\r\n          return false;\r\n        }\r\n      }\r\n      return true;\r\n    }\r\n  }]);\r\n\r\n  return BaseViewer;\r\n}();\r\n\r\nexports.BaseViewer = BaseViewer;\r\n\r\n/***/ }),\r\n/* 9 */\r\n/***/ (function(module, exports, __w_pdfjs_require__) {\r\n\r\n\"use strict\";\r\n\r\n\r\nObject.defineProperty(exports, \"__esModule\", {\r\n  value: true\r\n});\r\nexports.NullL10n = exports.GenericL10n = exports.ProgressBar = exports.DownloadManager = exports.EventBus = exports.PDFFindController = exports.PDFHistory = exports.DefaultAnnotationLayerFactory = exports.AnnotationLayerBuilder = exports.DefaultTextLayerFactory = exports.TextLayerBuilder = exports.SimpleLinkService = exports.PDFLinkService = exports.PDFPageView = exports.PDFSinglePageViewer = exports.PDFViewer = undefined;\r\n\r\nvar _annotation_layer_builder = __w_pdfjs_require__(4);\r\n\r\nvar _text_layer_builder = __w_pdfjs_require__(5);\r\n\r\nvar _ui_utils = __w_pdfjs_require__(0);\r\n\r\nvar _pdf_link_service = __w_pdfjs_require__(3);\r\n\r\nvar _download_manager = __w_pdfjs_require__(10);\r\n\r\nvar _genericl10n = __w_pdfjs_require__(11);\r\n\r\nvar _pdf_find_controller = __w_pdfjs_require__(13);\r\n\r\nvar _pdf_history = __w_pdfjs_require__(14);\r\n\r\nvar _pdf_page_view = __w_pdfjs_require__(6);\r\n\r\nvar _pdf_single_page_viewer = __w_pdfjs_require__(16);\r\n\r\nvar _pdf_viewer = __w_pdfjs_require__(17);\r\n\r\nvar pdfjsVersion = '2.0.489';\r\nvar pdfjsBuild = '7d7bc80e';\r\nexports.PDFViewer = _pdf_viewer.PDFViewer;\r\nexports.PDFSinglePageViewer = _pdf_single_page_viewer.PDFSinglePageViewer;\r\nexports.PDFPageView = _pdf_page_view.PDFPageView;\r\nexports.PDFLinkService = _pdf_link_service.PDFLinkService;\r\nexports.SimpleLinkService = _pdf_link_service.SimpleLinkService;\r\nexports.TextLayerBuilder = _text_layer_builder.TextLayerBuilder;\r\nexports.DefaultTextLayerFactory = _text_layer_builder.DefaultTextLayerFactory;\r\nexports.AnnotationLayerBuilder = _annotation_layer_builder.AnnotationLayerBuilder;\r\nexports.DefaultAnnotationLayerFactory = _annotation_layer_builder.DefaultAnnotationLayerFactory;\r\nexports.PDFHistory = _pdf_history.PDFHistory;\r\nexports.PDFFindController = _pdf_find_controller.PDFFindController;\r\nexports.EventBus = _ui_utils.EventBus;\r\nexports.DownloadManager = _download_manager.DownloadManager;\r\nexports.ProgressBar = _ui_utils.ProgressBar;\r\nexports.GenericL10n = _genericl10n.GenericL10n;\r\nexports.NullL10n = _ui_utils.NullL10n;\r\n\r\n/***/ }),\r\n/* 10 */\r\n/***/ (function(module, exports, __w_pdfjs_require__) {\r\n\r\n\"use strict\";\r\n\r\n\r\nObject.defineProperty(exports, \"__esModule\", {\r\n  value: true\r\n});\r\nexports.DownloadManager = undefined;\r\n\r\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\r\n\r\nvar _pdfjsLib = __w_pdfjs_require__(1);\r\n\r\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\r\n\r\n;\r\nvar DISABLE_CREATE_OBJECT_URL = _pdfjsLib.apiCompatibilityParams.disableCreateObjectURL || false;\r\nfunction _download(blobUrl, filename) {\r\n  var a = document.createElement('a');\r\n  if (!a.click) {\r\n    throw new Error('DownloadManager: \"a.click()\" is not supported.');\r\n  }\r\n  a.href = blobUrl;\r\n  a.target = '_parent';\r\n  if ('download' in a) {\r\n    a.download = filename;\r\n  }\r\n  (document.body || document.documentElement).appendChild(a);\r\n  a.click();\r\n  a.remove();\r\n}\r\n\r\nvar DownloadManager = function () {\r\n  function DownloadManager(_ref) {\r\n    var _ref$disableCreateObj = _ref.disableCreateObjectURL,\r\n        disableCreateObjectURL = _ref$disableCreateObj === undefined ? DISABLE_CREATE_OBJECT_URL : _ref$disableCreateObj;\r\n\r\n    _classCallCheck(this, DownloadManager);\r\n\r\n    this.disableCreateObjectURL = disableCreateObjectURL;\r\n  }\r\n\r\n  _createClass(DownloadManager, [{\r\n    key: 'downloadUrl',\r\n    value: function downloadUrl(url, filename) {\r\n      if (!(0, _pdfjsLib.createValidAbsoluteUrl)(url, 'http://example.com')) {\r\n        return;\r\n      }\r\n      _download(url + '#pdfjs.action=download', filename);\r\n    }\r\n  }, {\r\n    key: 'downloadData',\r\n    value: function downloadData(data, filename, contentType) {\r\n      if (navigator.msSaveBlob) {\r\n        return navigator.msSaveBlob(new Blob([data], { type: contentType }), filename);\r\n      }\r\n      var blobUrl = (0, _pdfjsLib.createObjectURL)(data, contentType, this.disableCreateObjectURL);\r\n      _download(blobUrl, filename);\r\n    }\r\n  }, {\r\n    key: 'download',\r\n    value: function download(blob, url, filename) {\r\n      if (navigator.msSaveBlob) {\r\n        if (!navigator.msSaveBlob(blob, filename)) {\r\n          this.downloadUrl(url, filename);\r\n        }\r\n        return;\r\n      }\r\n      if (this.disableCreateObjectURL) {\r\n        this.downloadUrl(url, filename);\r\n        return;\r\n      }\r\n      var blobUrl = URL.createObjectURL(blob);\r\n      _download(blobUrl, filename);\r\n    }\r\n  }]);\r\n\r\n  return DownloadManager;\r\n}();\r\n\r\nexports.DownloadManager = DownloadManager;\r\n\r\n/***/ }),\r\n/* 11 */\r\n/***/ (function(module, exports, __w_pdfjs_require__) {\r\n\r\n\"use strict\";\r\n\r\n\r\nObject.defineProperty(exports, \"__esModule\", {\r\n  value: true\r\n});\r\nexports.GenericL10n = undefined;\r\n\r\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\r\n\r\n__w_pdfjs_require__(12);\r\n\r\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\r\n\r\nvar webL10n = document.webL10n;\r\n\r\nvar GenericL10n = function () {\r\n  function GenericL10n(lang) {\r\n    _classCallCheck(this, GenericL10n);\r\n\r\n    this._lang = lang;\r\n    this._ready = new Promise(function (resolve, reject) {\r\n      webL10n.setLanguage(lang, function () {\r\n        resolve(webL10n);\r\n      });\r\n    });\r\n  }\r\n\r\n  _createClass(GenericL10n, [{\r\n    key: 'getLanguage',\r\n    value: function getLanguage() {\r\n      return this._ready.then(function (l10n) {\r\n        return l10n.getLanguage();\r\n      });\r\n    }\r\n  }, {\r\n    key: 'getDirection',\r\n    value: function getDirection() {\r\n      return this._ready.then(function (l10n) {\r\n        return l10n.getDirection();\r\n      });\r\n    }\r\n  }, {\r\n    key: 'get',\r\n    value: function get(property, args, fallback) {\r\n      return this._ready.then(function (l10n) {\r\n        return l10n.get(property, args, fallback);\r\n      });\r\n    }\r\n  }, {\r\n    key: 'translate',\r\n    value: function translate(element) {\r\n      return this._ready.then(function (l10n) {\r\n        return l10n.translate(element);\r\n      });\r\n    }\r\n  }]);\r\n\r\n  return GenericL10n;\r\n}();\r\n\r\nexports.GenericL10n = GenericL10n;\r\n\r\n/***/ }),\r\n/* 12 */\r\n/***/ (function(module, exports, __w_pdfjs_require__) {\r\n\r\n\"use strict\";\r\n\r\n\r\ndocument.webL10n = function (window, document, undefined) {\r\n  var gL10nData = {};\r\n  var gTextData = '';\r\n  var gTextProp = 'textContent';\r\n  var gLanguage = '';\r\n  var gMacros = {};\r\n  var gReadyState = 'loading';\r\n  var gAsyncResourceLoading = true;\r\n  function getL10nResourceLinks() {\r\n    return document.querySelectorAll('link[type=\"application/l10n\"]');\r\n  }\r\n  function getL10nDictionary() {\r\n    var script = document.querySelector('script[type=\"application/l10n\"]');\r\n    return script ? JSON.parse(script.innerHTML) : null;\r\n  }\r\n  function getTranslatableChildren(element) {\r\n    return element ? element.querySelectorAll('*[data-l10n-id]') : [];\r\n  }\r\n  function getL10nAttributes(element) {\r\n    if (!element) return {};\r\n    var l10nId = element.getAttribute('data-l10n-id');\r\n    var l10nArgs = element.getAttribute('data-l10n-args');\r\n    var args = {};\r\n    if (l10nArgs) {\r\n      try {\r\n        args = JSON.parse(l10nArgs);\r\n      } catch (e) {\r\n        console.warn('could not parse arguments for #' + l10nId);\r\n      }\r\n    }\r\n    return {\r\n      id: l10nId,\r\n      args: args\r\n    };\r\n  }\r\n  function fireL10nReadyEvent(lang) {\r\n    var evtObject = document.createEvent('Event');\r\n    evtObject.initEvent('localized', true, false);\r\n    evtObject.language = lang;\r\n    document.dispatchEvent(evtObject);\r\n  }\r\n  function xhrLoadText(url, onSuccess, onFailure) {\r\n    onSuccess = onSuccess || function _onSuccess(data) {};\r\n    onFailure = onFailure || function _onFailure() {};\r\n    var xhr = new XMLHttpRequest();\r\n    xhr.open('GET', url, gAsyncResourceLoading);\r\n    if (xhr.overrideMimeType) {\r\n      xhr.overrideMimeType('text/plain; charset=utf-8');\r\n    }\r\n    xhr.onreadystatechange = function () {\r\n      if (xhr.readyState == 4) {\r\n        if (xhr.status == 200 || xhr.status === 0) {\r\n          onSuccess(xhr.responseText);\r\n        } else {\r\n          onFailure();\r\n        }\r\n      }\r\n    };\r\n    xhr.onerror = onFailure;\r\n    xhr.ontimeout = onFailure;\r\n    try {\r\n      xhr.send(null);\r\n    } catch (e) {\r\n      onFailure();\r\n    }\r\n  }\r\n  function parseResource(href, lang, successCallback, failureCallback) {\r\n    var baseURL = href.replace(/[^\\/]*$/, '') || './';\r\n    function evalString(text) {\r\n      if (text.lastIndexOf('\\\\') < 0) return text;\r\n      return text.replace(/\\\\\\\\/g, '\\\\').replace(/\\\\n/g, '\\n').replace(/\\\\r/g, '\\r').replace(/\\\\t/g, '\\t').replace(/\\\\b/g, '\\b').replace(/\\\\f/g, '\\f').replace(/\\\\{/g, '{').replace(/\\\\}/g, '}').replace(/\\\\\"/g, '\"').replace(/\\\\'/g, \"'\");\r\n    }\r\n    function parseProperties(text, parsedPropertiesCallback) {\r\n      var dictionary = {};\r\n      var reBlank = /^\\s*|\\s*$/;\r\n      var reComment = /^\\s*#|^\\s*$/;\r\n      var reSection = /^\\s*\\[(.*)\\]\\s*$/;\r\n      var reImport = /^\\s*@import\\s+url\\((.*)\\)\\s*$/i;\r\n      var reSplit = /^([^=\\s]*)\\s*=\\s*(.+)$/;\r\n      function parseRawLines(rawText, extendedSyntax, parsedRawLinesCallback) {\r\n        var entries = rawText.replace(reBlank, '').split(/[\\r\\n]+/);\r\n        var currentLang = '*';\r\n        var genericLang = lang.split('-', 1)[0];\r\n        var skipLang = false;\r\n        var match = '';\r\n        function nextEntry() {\r\n          while (true) {\r\n            if (!entries.length) {\r\n              parsedRawLinesCallback();\r\n              return;\r\n            }\r\n            var line = entries.shift();\r\n            if (reComment.test(line)) continue;\r\n            if (extendedSyntax) {\r\n              match = reSection.exec(line);\r\n              if (match) {\r\n                currentLang = match[1].toLowerCase();\r\n                skipLang = currentLang !== '*' && currentLang !== lang && currentLang !== genericLang;\r\n                continue;\r\n              } else if (skipLang) {\r\n                continue;\r\n              }\r\n              match = reImport.exec(line);\r\n              if (match) {\r\n                loadImport(baseURL + match[1], nextEntry);\r\n                return;\r\n              }\r\n            }\r\n            var tmp = line.match(reSplit);\r\n            if (tmp && tmp.length == 3) {\r\n              dictionary[tmp[1]] = evalString(tmp[2]);\r\n            }\r\n          }\r\n        }\r\n        nextEntry();\r\n      }\r\n      function loadImport(url, callback) {\r\n        xhrLoadText(url, function (content) {\r\n          parseRawLines(content, false, callback);\r\n        }, function () {\r\n          console.warn(url + ' not found.');\r\n          callback();\r\n        });\r\n      }\r\n      parseRawLines(text, true, function () {\r\n        parsedPropertiesCallback(dictionary);\r\n      });\r\n    }\r\n    xhrLoadText(href, function (response) {\r\n      gTextData += response;\r\n      parseProperties(response, function (data) {\r\n        for (var key in data) {\r\n          var id,\r\n              prop,\r\n              index = key.lastIndexOf('.');\r\n          if (index > 0) {\r\n            id = key.substring(0, index);\r\n            prop = key.substr(index + 1);\r\n          } else {\r\n            id = key;\r\n            prop = gTextProp;\r\n          }\r\n          if (!gL10nData[id]) {\r\n            gL10nData[id] = {};\r\n          }\r\n          gL10nData[id][prop] = data[key];\r\n        }\r\n        if (successCallback) {\r\n          successCallback();\r\n        }\r\n      });\r\n    }, failureCallback);\r\n  }\r\n  function loadLocale(lang, callback) {\r\n    if (lang) {\r\n      lang = lang.toLowerCase();\r\n    }\r\n    callback = callback || function _callback() {};\r\n    clear();\r\n    gLanguage = lang;\r\n    var langLinks = getL10nResourceLinks();\r\n    var langCount = langLinks.length;\r\n    if (langCount === 0) {\r\n      var dict = getL10nDictionary();\r\n      if (dict && dict.locales && dict.default_locale) {\r\n        console.log('using the embedded JSON directory, early way out');\r\n        gL10nData = dict.locales[lang];\r\n        if (!gL10nData) {\r\n          var defaultLocale = dict.default_locale.toLowerCase();\r\n          for (var anyCaseLang in dict.locales) {\r\n            anyCaseLang = anyCaseLang.toLowerCase();\r\n            if (anyCaseLang === lang) {\r\n              gL10nData = dict.locales[lang];\r\n              break;\r\n            } else if (anyCaseLang === defaultLocale) {\r\n              gL10nData = dict.locales[defaultLocale];\r\n            }\r\n          }\r\n        }\r\n        callback();\r\n      } else {\r\n        console.log('no resource to load, early way out');\r\n      }\r\n      fireL10nReadyEvent(lang);\r\n      gReadyState = 'complete';\r\n      return;\r\n    }\r\n    var onResourceLoaded = null;\r\n    var gResourceCount = 0;\r\n    onResourceLoaded = function onResourceLoaded() {\r\n      gResourceCount++;\r\n      if (gResourceCount >= langCount) {\r\n        callback();\r\n        fireL10nReadyEvent(lang);\r\n        gReadyState = 'complete';\r\n      }\r\n    };\r\n    function L10nResourceLink(link) {\r\n      var href = link.href;\r\n      this.load = function (lang, callback) {\r\n        parseResource(href, lang, callback, function () {\r\n          console.warn(href + ' not found.');\r\n          console.warn('\"' + lang + '\" resource not found');\r\n          gLanguage = '';\r\n          callback();\r\n        });\r\n      };\r\n    }\r\n    for (var i = 0; i < langCount; i++) {\r\n      var resource = new L10nResourceLink(langLinks[i]);\r\n      resource.load(lang, onResourceLoaded);\r\n    }\r\n  }\r\n  function clear() {\r\n    gL10nData = {};\r\n    gTextData = '';\r\n    gLanguage = '';\r\n  }\r\n  function getPluralRules(lang) {\r\n    var locales2rules = {\r\n      'af': 3,\r\n      'ak': 4,\r\n      'am': 4,\r\n      'ar': 1,\r\n      'asa': 3,\r\n      'az': 0,\r\n      'be': 11,\r\n      'bem': 3,\r\n      'bez': 3,\r\n      'bg': 3,\r\n      'bh': 4,\r\n      'bm': 0,\r\n      'bn': 3,\r\n      'bo': 0,\r\n      'br': 20,\r\n      'brx': 3,\r\n      'bs': 11,\r\n      'ca': 3,\r\n      'cgg': 3,\r\n      'chr': 3,\r\n      'cs': 12,\r\n      'cy': 17,\r\n      'da': 3,\r\n      'de': 3,\r\n      'dv': 3,\r\n      'dz': 0,\r\n      'ee': 3,\r\n      'el': 3,\r\n      'en': 3,\r\n      'eo': 3,\r\n      'es': 3,\r\n      'et': 3,\r\n      'eu': 3,\r\n      'fa': 0,\r\n      'ff': 5,\r\n      'fi': 3,\r\n      'fil': 4,\r\n      'fo': 3,\r\n      'fr': 5,\r\n      'fur': 3,\r\n      'fy': 3,\r\n      'ga': 8,\r\n      'gd': 24,\r\n      'gl': 3,\r\n      'gsw': 3,\r\n      'gu': 3,\r\n      'guw': 4,\r\n      'gv': 23,\r\n      'ha': 3,\r\n      'haw': 3,\r\n      'he': 2,\r\n      'hi': 4,\r\n      'hr': 11,\r\n      'hu': 0,\r\n      'id': 0,\r\n      'ig': 0,\r\n      'ii': 0,\r\n      'is': 3,\r\n      'it': 3,\r\n      'iu': 7,\r\n      'ja': 0,\r\n      'jmc': 3,\r\n      'jv': 0,\r\n      'ka': 0,\r\n      'kab': 5,\r\n      'kaj': 3,\r\n      'kcg': 3,\r\n      'kde': 0,\r\n      'kea': 0,\r\n      'kk': 3,\r\n      'kl': 3,\r\n      'km': 0,\r\n      'kn': 0,\r\n      'ko': 0,\r\n      'ksb': 3,\r\n      'ksh': 21,\r\n      'ku': 3,\r\n      'kw': 7,\r\n      'lag': 18,\r\n      'lb': 3,\r\n      'lg': 3,\r\n      'ln': 4,\r\n      'lo': 0,\r\n      'lt': 10,\r\n      'lv': 6,\r\n      'mas': 3,\r\n      'mg': 4,\r\n      'mk': 16,\r\n      'ml': 3,\r\n      'mn': 3,\r\n      'mo': 9,\r\n      'mr': 3,\r\n      'ms': 0,\r\n      'mt': 15,\r\n      'my': 0,\r\n      'nah': 3,\r\n      'naq': 7,\r\n      'nb': 3,\r\n      'nd': 3,\r\n      'ne': 3,\r\n      'nl': 3,\r\n      'nn': 3,\r\n      'no': 3,\r\n      'nr': 3,\r\n      'nso': 4,\r\n      'ny': 3,\r\n      'nyn': 3,\r\n      'om': 3,\r\n      'or': 3,\r\n      'pa': 3,\r\n      'pap': 3,\r\n      'pl': 13,\r\n      'ps': 3,\r\n      'pt': 3,\r\n      'rm': 3,\r\n      'ro': 9,\r\n      'rof': 3,\r\n      'ru': 11,\r\n      'rwk': 3,\r\n      'sah': 0,\r\n      'saq': 3,\r\n      'se': 7,\r\n      'seh': 3,\r\n      'ses': 0,\r\n      'sg': 0,\r\n      'sh': 11,\r\n      'shi': 19,\r\n      'sk': 12,\r\n      'sl': 14,\r\n      'sma': 7,\r\n      'smi': 7,\r\n      'smj': 7,\r\n      'smn': 7,\r\n      'sms': 7,\r\n      'sn': 3,\r\n      'so': 3,\r\n      'sq': 3,\r\n      'sr': 11,\r\n      'ss': 3,\r\n      'ssy': 3,\r\n      'st': 3,\r\n      'sv': 3,\r\n      'sw': 3,\r\n      'syr': 3,\r\n      'ta': 3,\r\n      'te': 3,\r\n      'teo': 3,\r\n      'th': 0,\r\n      'ti': 4,\r\n      'tig': 3,\r\n      'tk': 3,\r\n      'tl': 4,\r\n      'tn': 3,\r\n      'to': 0,\r\n      'tr': 0,\r\n      'ts': 3,\r\n      'tzm': 22,\r\n      'uk': 11,\r\n      'ur': 3,\r\n      've': 3,\r\n      'vi': 0,\r\n      'vun': 3,\r\n      'wa': 4,\r\n      'wae': 3,\r\n      'wo': 0,\r\n      'xh': 3,\r\n      'xog': 3,\r\n      'yo': 0,\r\n      'zh': 0,\r\n      'zu': 3\r\n    };\r\n    function isIn(n, list) {\r\n      return list.indexOf(n) !== -1;\r\n    }\r\n    function isBetween(n, start, end) {\r\n      return start <= n && n <= end;\r\n    }\r\n    var pluralRules = {\r\n      '0': function _(n) {\r\n        return 'other';\r\n      },\r\n      '1': function _(n) {\r\n        if (isBetween(n % 100, 3, 10)) return 'few';\r\n        if (n === 0) return 'zero';\r\n        if (isBetween(n % 100, 11, 99)) return 'many';\r\n        if (n == 2) return 'two';\r\n        if (n == 1) return 'one';\r\n        return 'other';\r\n      },\r\n      '2': function _(n) {\r\n        if (n !== 0 && n % 10 === 0) return 'many';\r\n        if (n == 2) return 'two';\r\n        if (n == 1) return 'one';\r\n        return 'other';\r\n      },\r\n      '3': function _(n) {\r\n        if (n == 1) return 'one';\r\n        return 'other';\r\n      },\r\n      '4': function _(n) {\r\n        if (isBetween(n, 0, 1)) return 'one';\r\n        return 'other';\r\n      },\r\n      '5': function _(n) {\r\n        if (isBetween(n, 0, 2) && n != 2) return 'one';\r\n        return 'other';\r\n      },\r\n      '6': function _(n) {\r\n        if (n === 0) return 'zero';\r\n        if (n % 10 == 1 && n % 100 != 11) return 'one';\r\n        return 'other';\r\n      },\r\n      '7': function _(n) {\r\n        if (n == 2) return 'two';\r\n        if (n == 1) return 'one';\r\n        return 'other';\r\n      },\r\n      '8': function _(n) {\r\n        if (isBetween(n, 3, 6)) return 'few';\r\n        if (isBetween(n, 7, 10)) return 'many';\r\n        if (n == 2) return 'two';\r\n        if (n == 1) return 'one';\r\n        return 'other';\r\n      },\r\n      '9': function _(n) {\r\n        if (n === 0 || n != 1 && isBetween(n % 100, 1, 19)) return 'few';\r\n        if (n == 1) return 'one';\r\n        return 'other';\r\n      },\r\n      '10': function _(n) {\r\n        if (isBetween(n % 10, 2, 9) && !isBetween(n % 100, 11, 19)) return 'few';\r\n        if (n % 10 == 1 && !isBetween(n % 100, 11, 19)) return 'one';\r\n        return 'other';\r\n      },\r\n      '11': function _(n) {\r\n        if (isBetween(n % 10, 2, 4) && !isBetween(n % 100, 12, 14)) return 'few';\r\n        if (n % 10 === 0 || isBetween(n % 10, 5, 9) || isBetween(n % 100, 11, 14)) return 'many';\r\n        if (n % 10 == 1 && n % 100 != 11) return 'one';\r\n        return 'other';\r\n      },\r\n      '12': function _(n) {\r\n        if (isBetween(n, 2, 4)) return 'few';\r\n        if (n == 1) return 'one';\r\n        return 'other';\r\n      },\r\n      '13': function _(n) {\r\n        if (isBetween(n % 10, 2, 4) && !isBetween(n % 100, 12, 14)) return 'few';\r\n        if (n != 1 && isBetween(n % 10, 0, 1) || isBetween(n % 10, 5, 9) || isBetween(n % 100, 12, 14)) return 'many';\r\n        if (n == 1) return 'one';\r\n        return 'other';\r\n      },\r\n      '14': function _(n) {\r\n        if (isBetween(n % 100, 3, 4)) return 'few';\r\n        if (n % 100 == 2) return 'two';\r\n        if (n % 100 == 1) return 'one';\r\n        return 'other';\r\n      },\r\n      '15': function _(n) {\r\n        if (n === 0 || isBetween(n % 100, 2, 10)) return 'few';\r\n        if (isBetween(n % 100, 11, 19)) return 'many';\r\n        if (n == 1) return 'one';\r\n        return 'other';\r\n      },\r\n      '16': function _(n) {\r\n        if (n % 10 == 1 && n != 11) return 'one';\r\n        return 'other';\r\n      },\r\n      '17': function _(n) {\r\n        if (n == 3) return 'few';\r\n        if (n === 0) return 'zero';\r\n        if (n == 6) return 'many';\r\n        if (n == 2) return 'two';\r\n        if (n == 1) return 'one';\r\n        return 'other';\r\n      },\r\n      '18': function _(n) {\r\n        if (n === 0) return 'zero';\r\n        if (isBetween(n, 0, 2) && n !== 0 && n != 2) return 'one';\r\n        return 'other';\r\n      },\r\n      '19': function _(n) {\r\n        if (isBetween(n, 2, 10)) return 'few';\r\n        if (isBetween(n, 0, 1)) return 'one';\r\n        return 'other';\r\n      },\r\n      '20': function _(n) {\r\n        if ((isBetween(n % 10, 3, 4) || n % 10 == 9) && !(isBetween(n % 100, 10, 19) || isBetween(n % 100, 70, 79) || isBetween(n % 100, 90, 99))) return 'few';\r\n        if (n % 1000000 === 0 && n !== 0) return 'many';\r\n        if (n % 10 == 2 && !isIn(n % 100, [12, 72, 92])) return 'two';\r\n        if (n % 10 == 1 && !isIn(n % 100, [11, 71, 91])) return 'one';\r\n        return 'other';\r\n      },\r\n      '21': function _(n) {\r\n        if (n === 0) return 'zero';\r\n        if (n == 1) return 'one';\r\n        return 'other';\r\n      },\r\n      '22': function _(n) {\r\n        if (isBetween(n, 0, 1) || isBetween(n, 11, 99)) return 'one';\r\n        return 'other';\r\n      },\r\n      '23': function _(n) {\r\n        if (isBetween(n % 10, 1, 2) || n % 20 === 0) return 'one';\r\n        return 'other';\r\n      },\r\n      '24': function _(n) {\r\n        if (isBetween(n, 3, 10) || isBetween(n, 13, 19)) return 'few';\r\n        if (isIn(n, [2, 12])) return 'two';\r\n        if (isIn(n, [1, 11])) return 'one';\r\n        return 'other';\r\n      }\r\n    };\r\n    var index = locales2rules[lang.replace(/-.*$/, '')];\r\n    if (!(index in pluralRules)) {\r\n      console.warn('plural form unknown for [' + lang + ']');\r\n      return function () {\r\n        return 'other';\r\n      };\r\n    }\r\n    return pluralRules[index];\r\n  }\r\n  gMacros.plural = function (str, param, key, prop) {\r\n    var n = parseFloat(param);\r\n    if (isNaN(n)) return str;\r\n    if (prop != gTextProp) return str;\r\n    if (!gMacros._pluralRules) {\r\n      gMacros._pluralRules = getPluralRules(gLanguage);\r\n    }\r\n    var index = '[' + gMacros._pluralRules(n) + ']';\r\n    if (n === 0 && key + '[zero]' in gL10nData) {\r\n      str = gL10nData[key + '[zero]'][prop];\r\n    } else if (n == 1 && key + '[one]' in gL10nData) {\r\n      str = gL10nData[key + '[one]'][prop];\r\n    } else if (n == 2 && key + '[two]' in gL10nData) {\r\n      str = gL10nData[key + '[two]'][prop];\r\n    } else if (key + index in gL10nData) {\r\n      str = gL10nData[key + index][prop];\r\n    } else if (key + '[other]' in gL10nData) {\r\n      str = gL10nData[key + '[other]'][prop];\r\n    }\r\n    return str;\r\n  };\r\n  function getL10nData(key, args, fallback) {\r\n    var data = gL10nData[key];\r\n    if (!data) {\r\n      console.warn('#' + key + ' is undefined.');\r\n      if (!fallback) {\r\n        return null;\r\n      }\r\n      data = fallback;\r\n    }\r\n    var rv = {};\r\n    for (var prop in data) {\r\n      var str = data[prop];\r\n      str = substIndexes(str, args, key, prop);\r\n      str = substArguments(str, args, key);\r\n      rv[prop] = str;\r\n    }\r\n    return rv;\r\n  }\r\n  function substIndexes(str, args, key, prop) {\r\n    var reIndex = /\\{\\[\\s*([a-zA-Z]+)\\(([a-zA-Z]+)\\)\\s*\\]\\}/;\r\n    var reMatch = reIndex.exec(str);\r\n    if (!reMatch || !reMatch.length) return str;\r\n    var macroName = reMatch[1];\r\n    var paramName = reMatch[2];\r\n    var param;\r\n    if (args && paramName in args) {\r\n      param = args[paramName];\r\n    } else if (paramName in gL10nData) {\r\n      param = gL10nData[paramName];\r\n    }\r\n    if (macroName in gMacros) {\r\n      var macro = gMacros[macroName];\r\n      str = macro(str, param, key, prop);\r\n    }\r\n    return str;\r\n  }\r\n  function substArguments(str, args, key) {\r\n    var reArgs = /\\{\\{\\s*(.+?)\\s*\\}\\}/g;\r\n    return str.replace(reArgs, function (matched_text, arg) {\r\n      if (args && arg in args) {\r\n        return args[arg];\r\n      }\r\n      if (arg in gL10nData) {\r\n        return gL10nData[arg];\r\n      }\r\n      console.log('argument {{' + arg + '}} for #' + key + ' is undefined.');\r\n      return matched_text;\r\n    });\r\n  }\r\n  function translateElement(element) {\r\n    var l10n = getL10nAttributes(element);\r\n    if (!l10n.id) return;\r\n    var data = getL10nData(l10n.id, l10n.args);\r\n    if (!data) {\r\n      console.warn('#' + l10n.id + ' is undefined.');\r\n      return;\r\n    }\r\n    if (data[gTextProp]) {\r\n      if (getChildElementCount(element) === 0) {\r\n        element[gTextProp] = data[gTextProp];\r\n      } else {\r\n        var children = element.childNodes;\r\n        var found = false;\r\n        for (var i = 0, l = children.length; i < l; i++) {\r\n          if (children[i].nodeType === 3 && /\\S/.test(children[i].nodeValue)) {\r\n            if (found) {\r\n              children[i].nodeValue = '';\r\n            } else {\r\n              children[i].nodeValue = data[gTextProp];\r\n              found = true;\r\n            }\r\n          }\r\n        }\r\n        if (!found) {\r\n          var textNode = document.createTextNode(data[gTextProp]);\r\n          element.insertBefore(textNode, element.firstChild);\r\n        }\r\n      }\r\n      delete data[gTextProp];\r\n    }\r\n    for (var k in data) {\r\n      element[k] = data[k];\r\n    }\r\n  }\r\n  function getChildElementCount(element) {\r\n    if (element.children) {\r\n      return element.children.length;\r\n    }\r\n    if (typeof element.childElementCount !== 'undefined') {\r\n      return element.childElementCount;\r\n    }\r\n    var count = 0;\r\n    for (var i = 0; i < element.childNodes.length; i++) {\r\n      count += element.nodeType === 1 ? 1 : 0;\r\n    }\r\n    return count;\r\n  }\r\n  function translateFragment(element) {\r\n    element = element || document.documentElement;\r\n    var children = getTranslatableChildren(element);\r\n    var elementCount = children.length;\r\n    for (var i = 0; i < elementCount; i++) {\r\n      translateElement(children[i]);\r\n    }\r\n    translateElement(element);\r\n  }\r\n  return {\r\n    get: function get(key, args, fallbackString) {\r\n      var index = key.lastIndexOf('.');\r\n      var prop = gTextProp;\r\n      if (index > 0) {\r\n        prop = key.substr(index + 1);\r\n        key = key.substring(0, index);\r\n      }\r\n      var fallback;\r\n      if (fallbackString) {\r\n        fallback = {};\r\n        fallback[prop] = fallbackString;\r\n      }\r\n      var data = getL10nData(key, args, fallback);\r\n      if (data && prop in data) {\r\n        return data[prop];\r\n      }\r\n      return '{{' + key + '}}';\r\n    },\r\n    getData: function getData() {\r\n      return gL10nData;\r\n    },\r\n    getText: function getText() {\r\n      return gTextData;\r\n    },\r\n    getLanguage: function getLanguage() {\r\n      return gLanguage;\r\n    },\r\n    setLanguage: function setLanguage(lang, callback) {\r\n      loadLocale(lang, function () {\r\n        if (callback) callback();\r\n      });\r\n    },\r\n    getDirection: function getDirection() {\r\n      var rtlList = ['ar', 'he', 'fa', 'ps', 'ur'];\r\n      var shortCode = gLanguage.split('-', 1)[0];\r\n      return rtlList.indexOf(shortCode) >= 0 ? 'rtl' : 'ltr';\r\n    },\r\n    translate: translateFragment,\r\n    getReadyState: function getReadyState() {\r\n      return gReadyState;\r\n    },\r\n    ready: function ready(callback) {\r\n      if (!callback) {\r\n        return;\r\n      } else if (gReadyState == 'complete' || gReadyState == 'interactive') {\r\n        window.setTimeout(function () {\r\n          callback();\r\n        });\r\n      } else if (document.addEventListener) {\r\n        document.addEventListener('localized', function once() {\r\n          document.removeEventListener('localized', once);\r\n          callback();\r\n        });\r\n      }\r\n    }\r\n  };\r\n}(window, document);\r\n\r\n/***/ }),\r\n/* 13 */\r\n/***/ (function(module, exports, __w_pdfjs_require__) {\r\n\r\n\"use strict\";\r\n\r\n\r\nObject.defineProperty(exports, \"__esModule\", {\r\n  value: true\r\n});\r\nexports.PDFFindController = exports.FindState = undefined;\r\n\r\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\r\n\r\nvar _pdfjsLib = __w_pdfjs_require__(1);\r\n\r\nvar _ui_utils = __w_pdfjs_require__(0);\r\n\r\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\r\n\r\nvar FindState = {\r\n  FOUND: 0,\r\n  NOT_FOUND: 1,\r\n  WRAPPED: 2,\r\n  PENDING: 3\r\n};\r\nvar FIND_SCROLL_OFFSET_TOP = -50;\r\nvar FIND_SCROLL_OFFSET_LEFT = -400;\r\nvar FIND_TIMEOUT = 250;\r\nvar CHARACTERS_TO_NORMALIZE = {\r\n  '\\u2018': '\\'',\r\n  '\\u2019': '\\'',\r\n  '\\u201A': '\\'',\r\n  '\\u201B': '\\'',\r\n  '\\u201C': '\"',\r\n  '\\u201D': '\"',\r\n  '\\u201E': '\"',\r\n  '\\u201F': '\"',\r\n  '\\xBC': '1/4',\r\n  '\\xBD': '1/2',\r\n  '\\xBE': '3/4'\r\n};\r\n\r\nvar PDFFindController = function () {\r\n  function PDFFindController(_ref) {\r\n    var pdfViewer = _ref.pdfViewer;\r\n\r\n    _classCallCheck(this, PDFFindController);\r\n\r\n    this.pdfViewer = pdfViewer;\r\n    this.onUpdateResultsCount = null;\r\n    this.onUpdateState = null;\r\n    this.reset();\r\n    var replace = Object.keys(CHARACTERS_TO_NORMALIZE).join('');\r\n    this.normalizationRegex = new RegExp('[' + replace + ']', 'g');\r\n  }\r\n\r\n  _createClass(PDFFindController, [{\r\n    key: 'reset',\r\n    value: function reset() {\r\n      var _this = this;\r\n\r\n      this.startedTextExtraction = false;\r\n      this.extractTextPromises = [];\r\n      this.pendingFindMatches = Object.create(null);\r\n      this.active = false;\r\n      this.pageContents = [];\r\n      this.pageMatches = [];\r\n      this.pageMatchesLength = null;\r\n      this.matchCount = 0;\r\n      this.selected = {\r\n        pageIdx: -1,\r\n        matchIdx: -1\r\n      };\r\n      this.offset = {\r\n        pageIdx: null,\r\n        matchIdx: null\r\n      };\r\n      this.pagesToSearch = null;\r\n      this.resumePageIdx = null;\r\n      this.state = null;\r\n      this.dirtyMatch = false;\r\n      this.findTimeout = null;\r\n      this._firstPagePromise = new Promise(function (resolve) {\r\n        _this.resolveFirstPage = resolve;\r\n      });\r\n    }\r\n  }, {\r\n    key: 'executeCommand',\r\n    value: function executeCommand(cmd, state) {\r\n      var _this2 = this;\r\n\r\n      if (this.state === null || cmd !== 'findagain') {\r\n        this.dirtyMatch = true;\r\n      }\r\n      this.state = state;\r\n      this._updateUIState(FindState.PENDING);\r\n      this._firstPagePromise.then(function () {\r\n        _this2._extractText();\r\n        clearTimeout(_this2.findTimeout);\r\n        if (cmd === 'find') {\r\n          _this2.findTimeout = setTimeout(_this2._nextMatch.bind(_this2), FIND_TIMEOUT);\r\n        } else {\r\n          _this2._nextMatch();\r\n        }\r\n      });\r\n    }\r\n  }, {\r\n    key: 'updateMatchPosition',\r\n    value: function updateMatchPosition(pageIndex, matchIndex, elements, beginIdx) {\r\n      if (this.selected.matchIdx === matchIndex && this.selected.pageIdx === pageIndex) {\r\n        var spot = {\r\n          top: FIND_SCROLL_OFFSET_TOP,\r\n          left: FIND_SCROLL_OFFSET_LEFT\r\n        };\r\n        (0, _ui_utils.scrollIntoView)(elements[beginIdx], spot, true);\r\n      }\r\n    }\r\n  }, {\r\n    key: '_normalize',\r\n    value: function _normalize(text) {\r\n      return text.replace(this.normalizationRegex, function (ch) {\r\n        return CHARACTERS_TO_NORMALIZE[ch];\r\n      });\r\n    }\r\n  }, {\r\n    key: '_prepareMatches',\r\n    value: function _prepareMatches(matchesWithLength, matches, matchesLength) {\r\n      function isSubTerm(matchesWithLength, currentIndex) {\r\n        var currentElem = matchesWithLength[currentIndex];\r\n        var nextElem = matchesWithLength[currentIndex + 1];\r\n        if (currentIndex < matchesWithLength.length - 1 && currentElem.match === nextElem.match) {\r\n          currentElem.skipped = true;\r\n          return true;\r\n        }\r\n        for (var i = currentIndex - 1; i >= 0; i--) {\r\n          var prevElem = matchesWithLength[i];\r\n          if (prevElem.skipped) {\r\n            continue;\r\n          }\r\n          if (prevElem.match + prevElem.matchLength < currentElem.match) {\r\n            break;\r\n          }\r\n          if (prevElem.match + prevElem.matchLength >= currentElem.match + currentElem.matchLength) {\r\n            currentElem.skipped = true;\r\n            return true;\r\n          }\r\n        }\r\n        return false;\r\n      }\r\n      matchesWithLength.sort(function (a, b) {\r\n        return a.match === b.match ? a.matchLength - b.matchLength : a.match - b.match;\r\n      });\r\n      for (var i = 0, len = matchesWithLength.length; i < len; i++) {\r\n        if (isSubTerm(matchesWithLength, i)) {\r\n          continue;\r\n        }\r\n        matches.push(matchesWithLength[i].match);\r\n        matchesLength.push(matchesWithLength[i].matchLength);\r\n      }\r\n    }\r\n  }, {\r\n    key: '_calculatePhraseMatch',\r\n    value: function _calculatePhraseMatch(query, pageIndex, pageContent) {\r\n      var matches = [];\r\n      var queryLen = query.length;\r\n      var matchIdx = -queryLen;\r\n      while (true) {\r\n        matchIdx = pageContent.indexOf(query, matchIdx + queryLen);\r\n        if (matchIdx === -1) {\r\n          break;\r\n        }\r\n        matches.push(matchIdx);\r\n      }\r\n      this.pageMatches[pageIndex] = matches;\r\n    }\r\n  }, {\r\n    key: '_calculateWordMatch',\r\n    value: function _calculateWordMatch(query, pageIndex, pageContent) {\r\n      var matchesWithLength = [];\r\n      var queryArray = query.match(/\\S+/g);\r\n      for (var i = 0, len = queryArray.length; i < len; i++) {\r\n        var subquery = queryArray[i];\r\n        var subqueryLen = subquery.length;\r\n        var matchIdx = -subqueryLen;\r\n        while (true) {\r\n          matchIdx = pageContent.indexOf(subquery, matchIdx + subqueryLen);\r\n          if (matchIdx === -1) {\r\n            break;\r\n          }\r\n          matchesWithLength.push({\r\n            match: matchIdx,\r\n            matchLength: subqueryLen,\r\n            skipped: false\r\n          });\r\n        }\r\n      }\r\n      if (!this.pageMatchesLength) {\r\n        this.pageMatchesLength = [];\r\n      }\r\n      this.pageMatchesLength[pageIndex] = [];\r\n      this.pageMatches[pageIndex] = [];\r\n      this._prepareMatches(matchesWithLength, this.pageMatches[pageIndex], this.pageMatchesLength[pageIndex]);\r\n    }\r\n  }, {\r\n    key: '_calculateMatch',\r\n    value: function _calculateMatch(pageIndex) {\r\n      var pageContent = this._normalize(this.pageContents[pageIndex]);\r\n      var query = this._normalize(this.state.query);\r\n      var caseSensitive = this.state.caseSensitive;\r\n      var phraseSearch = this.state.phraseSearch;\r\n      var queryLen = query.length;\r\n      if (queryLen === 0) {\r\n        return;\r\n      }\r\n      if (!caseSensitive) {\r\n        pageContent = pageContent.toLowerCase();\r\n        query = query.toLowerCase();\r\n      }\r\n      if (phraseSearch) {\r\n        this._calculatePhraseMatch(query, pageIndex, pageContent);\r\n      } else {\r\n        this._calculateWordMatch(query, pageIndex, pageContent);\r\n      }\r\n      this._updatePage(pageIndex);\r\n      if (this.resumePageIdx === pageIndex) {\r\n        this.resumePageIdx = null;\r\n        this._nextPageMatch();\r\n      }\r\n      if (this.pageMatches[pageIndex].length > 0) {\r\n        this.matchCount += this.pageMatches[pageIndex].length;\r\n        this._updateUIResultsCount();\r\n      }\r\n    }\r\n  }, {\r\n    key: '_extractText',\r\n    value: function _extractText() {\r\n      var _this3 = this;\r\n\r\n      if (this.startedTextExtraction) {\r\n        return;\r\n      }\r\n      this.startedTextExtraction = true;\r\n      this.pageContents.length = 0;\r\n      var promise = Promise.resolve();\r\n\r\n      var _loop = function _loop(i, ii) {\r\n        var extractTextCapability = (0, _pdfjsLib.createPromiseCapability)();\r\n        _this3.extractTextPromises[i] = extractTextCapability.promise;\r\n        promise = promise.then(function () {\r\n          return _this3.pdfViewer.getPageTextContent(i).then(function (textContent) {\r\n            var textItems = textContent.items;\r\n            var strBuf = [];\r\n            for (var j = 0, jj = textItems.length; j < jj; j++) {\r\n              strBuf.push(textItems[j].str);\r\n            }\r\n            _this3.pageContents[i] = strBuf.join('');\r\n            extractTextCapability.resolve(i);\r\n          }, function (reason) {\r\n            console.error('Unable to get page ' + (i + 1) + ' text content', reason);\r\n            _this3.pageContents[i] = '';\r\n            extractTextCapability.resolve(i);\r\n          });\r\n        });\r\n      };\r\n\r\n      for (var i = 0, ii = this.pdfViewer.pagesCount; i < ii; i++) {\r\n        _loop(i, ii);\r\n      }\r\n    }\r\n  }, {\r\n    key: '_updatePage',\r\n    value: function _updatePage(index) {\r\n      if (this.selected.pageIdx === index) {\r\n        this.pdfViewer.currentPageNumber = index + 1;\r\n      }\r\n      var page = this.pdfViewer.getPageView(index);\r\n      if (page.textLayer) {\r\n        page.textLayer.updateMatches();\r\n      }\r\n    }\r\n  }, {\r\n    key: '_nextMatch',\r\n    value: function _nextMatch() {\r\n      var _this4 = this;\r\n\r\n      var previous = this.state.findPrevious;\r\n      var currentPageIndex = this.pdfViewer.currentPageNumber - 1;\r\n      var numPages = this.pdfViewer.pagesCount;\r\n      this.active = true;\r\n      if (this.dirtyMatch) {\r\n        this.dirtyMatch = false;\r\n        this.selected.pageIdx = this.selected.matchIdx = -1;\r\n        this.offset.pageIdx = currentPageIndex;\r\n        this.offset.matchIdx = null;\r\n        this.hadMatch = false;\r\n        this.resumePageIdx = null;\r\n        this.pageMatches = [];\r\n        this.matchCount = 0;\r\n        this.pageMatchesLength = null;\r\n        for (var i = 0; i < numPages; i++) {\r\n          this._updatePage(i);\r\n          if (!(i in this.pendingFindMatches)) {\r\n            this.pendingFindMatches[i] = true;\r\n            this.extractTextPromises[i].then(function (pageIdx) {\r\n              delete _this4.pendingFindMatches[pageIdx];\r\n              _this4._calculateMatch(pageIdx);\r\n            });\r\n          }\r\n        }\r\n      }\r\n      if (this.state.query === '') {\r\n        this._updateUIState(FindState.FOUND);\r\n        return;\r\n      }\r\n      if (this.resumePageIdx) {\r\n        return;\r\n      }\r\n      var offset = this.offset;\r\n      this.pagesToSearch = numPages;\r\n      if (offset.matchIdx !== null) {\r\n        var numPageMatches = this.pageMatches[offset.pageIdx].length;\r\n        if (!previous && offset.matchIdx + 1 < numPageMatches || previous && offset.matchIdx > 0) {\r\n          this.hadMatch = true;\r\n          offset.matchIdx = previous ? offset.matchIdx - 1 : offset.matchIdx + 1;\r\n          this._updateMatch(true);\r\n          return;\r\n        }\r\n        this._advanceOffsetPage(previous);\r\n      }\r\n      this._nextPageMatch();\r\n    }\r\n  }, {\r\n    key: '_matchesReady',\r\n    value: function _matchesReady(matches) {\r\n      var offset = this.offset;\r\n      var numMatches = matches.length;\r\n      var previous = this.state.findPrevious;\r\n      if (numMatches) {\r\n        this.hadMatch = true;\r\n        offset.matchIdx = previous ? numMatches - 1 : 0;\r\n        this._updateMatch(true);\r\n        return true;\r\n      }\r\n      this._advanceOffsetPage(previous);\r\n      if (offset.wrapped) {\r\n        offset.matchIdx = null;\r\n        if (this.pagesToSearch < 0) {\r\n          this._updateMatch(false);\r\n          return true;\r\n        }\r\n      }\r\n      return false;\r\n    }\r\n  }, {\r\n    key: '_nextPageMatch',\r\n    value: function _nextPageMatch() {\r\n      if (this.resumePageIdx !== null) {\r\n        console.error('There can only be one pending page.');\r\n      }\r\n      var matches = null;\r\n      do {\r\n        var pageIdx = this.offset.pageIdx;\r\n        matches = this.pageMatches[pageIdx];\r\n        if (!matches) {\r\n          this.resumePageIdx = pageIdx;\r\n          break;\r\n        }\r\n      } while (!this._matchesReady(matches));\r\n    }\r\n  }, {\r\n    key: '_advanceOffsetPage',\r\n    value: function _advanceOffsetPage(previous) {\r\n      var offset = this.offset;\r\n      var numPages = this.extractTextPromises.length;\r\n      offset.pageIdx = previous ? offset.pageIdx - 1 : offset.pageIdx + 1;\r\n      offset.matchIdx = null;\r\n      this.pagesToSearch--;\r\n      if (offset.pageIdx >= numPages || offset.pageIdx < 0) {\r\n        offset.pageIdx = previous ? numPages - 1 : 0;\r\n        offset.wrapped = true;\r\n      }\r\n    }\r\n  }, {\r\n    key: '_updateMatch',\r\n    value: function _updateMatch() {\r\n      var found = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\r\n\r\n      var state = FindState.NOT_FOUND;\r\n      var wrapped = this.offset.wrapped;\r\n      this.offset.wrapped = false;\r\n      if (found) {\r\n        var previousPage = this.selected.pageIdx;\r\n        this.selected.pageIdx = this.offset.pageIdx;\r\n        this.selected.matchIdx = this.offset.matchIdx;\r\n        state = wrapped ? FindState.WRAPPED : FindState.FOUND;\r\n        if (previousPage !== -1 && previousPage !== this.selected.pageIdx) {\r\n          this._updatePage(previousPage);\r\n        }\r\n      }\r\n      this._updateUIState(state, this.state.findPrevious);\r\n      if (this.selected.pageIdx !== -1) {\r\n        this._updatePage(this.selected.pageIdx);\r\n      }\r\n    }\r\n  }, {\r\n    key: '_updateUIResultsCount',\r\n    value: function _updateUIResultsCount() {\r\n      if (this.onUpdateResultsCount) {\r\n        this.onUpdateResultsCount(this.matchCount);\r\n      }\r\n    }\r\n  }, {\r\n    key: '_updateUIState',\r\n    value: function _updateUIState(state, previous) {\r\n      if (this.onUpdateState) {\r\n        this.onUpdateState(state, previous, this.matchCount);\r\n      }\r\n    }\r\n  }]);\r\n\r\n  return PDFFindController;\r\n}();\r\n\r\nexports.FindState = FindState;\r\nexports.PDFFindController = PDFFindController;\r\n\r\n/***/ }),\r\n/* 14 */\r\n/***/ (function(module, exports, __w_pdfjs_require__) {\r\n\r\n\"use strict\";\r\n\r\n\r\nObject.defineProperty(exports, \"__esModule\", {\r\n  value: true\r\n});\r\nexports.isDestArraysEqual = exports.isDestHashesEqual = exports.PDFHistory = undefined;\r\n\r\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\r\n\r\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\r\n\r\nvar _ui_utils = __w_pdfjs_require__(0);\r\n\r\nvar _dom_events = __w_pdfjs_require__(2);\r\n\r\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\r\n\r\nvar HASH_CHANGE_TIMEOUT = 1000;\r\nvar POSITION_UPDATED_THRESHOLD = 50;\r\nvar UPDATE_VIEWAREA_TIMEOUT = 1000;\r\nfunction getCurrentHash() {\r\n  return document.location.hash;\r\n}\r\nfunction parseCurrentHash(linkService) {\r\n  var hash = unescape(getCurrentHash()).substring(1);\r\n  var params = (0, _ui_utils.parseQueryString)(hash);\r\n  var page = params.page | 0;\r\n  if (!(Number.isInteger(page) && page > 0 && page <= linkService.pagesCount)) {\r\n    page = null;\r\n  }\r\n  return {\r\n    hash: hash,\r\n    page: page,\r\n    rotation: linkService.rotation\r\n  };\r\n}\r\n\r\nvar PDFHistory = function () {\r\n  function PDFHistory(_ref) {\r\n    var _this = this;\r\n\r\n    var linkService = _ref.linkService,\r\n        eventBus = _ref.eventBus;\r\n\r\n    _classCallCheck(this, PDFHistory);\r\n\r\n    this.linkService = linkService;\r\n    this.eventBus = eventBus || (0, _dom_events.getGlobalEventBus)();\r\n    this.initialized = false;\r\n    this.initialBookmark = null;\r\n    this.initialRotation = null;\r\n    this._boundEvents = Object.create(null);\r\n    this._isViewerInPresentationMode = false;\r\n    this._isPagesLoaded = false;\r\n    this.eventBus.on('presentationmodechanged', function (evt) {\r\n      _this._isViewerInPresentationMode = evt.active || evt.switchInProgress;\r\n    });\r\n    this.eventBus.on('pagesloaded', function (evt) {\r\n      _this._isPagesLoaded = !!evt.pagesCount;\r\n    });\r\n  }\r\n\r\n  _createClass(PDFHistory, [{\r\n    key: 'initialize',\r\n    value: function initialize(fingerprint) {\r\n      var resetHistory = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\r\n\r\n      if (!fingerprint || typeof fingerprint !== 'string') {\r\n        console.error('PDFHistory.initialize: The \"fingerprint\" must be a non-empty string.');\r\n        return;\r\n      }\r\n      var reInitialized = this.initialized && this.fingerprint !== fingerprint;\r\n      this.fingerprint = fingerprint;\r\n      if (!this.initialized) {\r\n        this._bindEvents();\r\n      }\r\n      var state = window.history.state;\r\n      this.initialized = true;\r\n      this.initialBookmark = null;\r\n      this.initialRotation = null;\r\n      this._popStateInProgress = false;\r\n      this._blockHashChange = 0;\r\n      this._currentHash = getCurrentHash();\r\n      this._numPositionUpdates = 0;\r\n      this._uid = this._maxUid = 0;\r\n      this._destination = null;\r\n      this._position = null;\r\n      if (!this._isValidState(state) || resetHistory) {\r\n        var _parseCurrentHash = parseCurrentHash(this.linkService),\r\n            hash = _parseCurrentHash.hash,\r\n            page = _parseCurrentHash.page,\r\n            rotation = _parseCurrentHash.rotation;\r\n\r\n        if (!hash || reInitialized || resetHistory) {\r\n          this._pushOrReplaceState(null, true);\r\n          return;\r\n        }\r\n        this._pushOrReplaceState({\r\n          hash: hash,\r\n          page: page,\r\n          rotation: rotation\r\n        }, true);\r\n        return;\r\n      }\r\n      var destination = state.destination;\r\n      this._updateInternalState(destination, state.uid, true);\r\n      if (this._uid > this._maxUid) {\r\n        this._maxUid = this._uid;\r\n      }\r\n      if (destination.rotation !== undefined) {\r\n        this.initialRotation = destination.rotation;\r\n      }\r\n      if (destination.dest) {\r\n        this.initialBookmark = JSON.stringify(destination.dest);\r\n        this._destination.page = null;\r\n      } else if (destination.hash) {\r\n        this.initialBookmark = destination.hash;\r\n      } else if (destination.page) {\r\n        this.initialBookmark = 'page=' + destination.page;\r\n      }\r\n    }\r\n  }, {\r\n    key: 'push',\r\n    value: function push(_ref2) {\r\n      var _this2 = this;\r\n\r\n      var namedDest = _ref2.namedDest,\r\n          explicitDest = _ref2.explicitDest,\r\n          pageNumber = _ref2.pageNumber;\r\n\r\n      if (!this.initialized) {\r\n        return;\r\n      }\r\n      if (namedDest && typeof namedDest !== 'string' || !(explicitDest instanceof Array) || !(Number.isInteger(pageNumber) && pageNumber > 0 && pageNumber <= this.linkService.pagesCount)) {\r\n        console.error('PDFHistory.push: Invalid parameters.');\r\n        return;\r\n      }\r\n      var hash = namedDest || JSON.stringify(explicitDest);\r\n      if (!hash) {\r\n        return;\r\n      }\r\n      var forceReplace = false;\r\n      if (this._destination && (isDestHashesEqual(this._destination.hash, hash) || isDestArraysEqual(this._destination.dest, explicitDest))) {\r\n        if (this._destination.page) {\r\n          return;\r\n        }\r\n        forceReplace = true;\r\n      }\r\n      if (this._popStateInProgress && !forceReplace) {\r\n        return;\r\n      }\r\n      this._pushOrReplaceState({\r\n        dest: explicitDest,\r\n        hash: hash,\r\n        page: pageNumber,\r\n        rotation: this.linkService.rotation\r\n      }, forceReplace);\r\n      if (!this._popStateInProgress) {\r\n        this._popStateInProgress = true;\r\n        Promise.resolve().then(function () {\r\n          _this2._popStateInProgress = false;\r\n        });\r\n      }\r\n    }\r\n  }, {\r\n    key: 'pushCurrentPosition',\r\n    value: function pushCurrentPosition() {\r\n      if (!this.initialized || this._popStateInProgress) {\r\n        return;\r\n      }\r\n      this._tryPushCurrentPosition();\r\n    }\r\n  }, {\r\n    key: 'back',\r\n    value: function back() {\r\n      if (!this.initialized || this._popStateInProgress) {\r\n        return;\r\n      }\r\n      var state = window.history.state;\r\n      if (this._isValidState(state) && state.uid > 0) {\r\n        window.history.back();\r\n      }\r\n    }\r\n  }, {\r\n    key: 'forward',\r\n    value: function forward() {\r\n      if (!this.initialized || this._popStateInProgress) {\r\n        return;\r\n      }\r\n      var state = window.history.state;\r\n      if (this._isValidState(state) && state.uid < this._maxUid) {\r\n        window.history.forward();\r\n      }\r\n    }\r\n  }, {\r\n    key: '_pushOrReplaceState',\r\n    value: function _pushOrReplaceState(destination) {\r\n      var forceReplace = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\r\n\r\n      var shouldReplace = forceReplace || !this._destination;\r\n      var newState = {\r\n        fingerprint: this.fingerprint,\r\n        uid: shouldReplace ? this._uid : this._uid + 1,\r\n        destination: destination\r\n      };\r\n      this._updateInternalState(destination, newState.uid);\r\n      if (shouldReplace) {\r\n        window.history.replaceState(newState, '');\r\n      } else {\r\n        this._maxUid = this._uid;\r\n        window.history.pushState(newState, '');\r\n      }\r\n    }\r\n  }, {\r\n    key: '_tryPushCurrentPosition',\r\n    value: function _tryPushCurrentPosition() {\r\n      var temporary = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\r\n\r\n      if (!this._position) {\r\n        return;\r\n      }\r\n      var position = this._position;\r\n      if (temporary) {\r\n        position = (0, _ui_utils.cloneObj)(this._position);\r\n        position.temporary = true;\r\n      }\r\n      if (!this._destination) {\r\n        this._pushOrReplaceState(position);\r\n        return;\r\n      }\r\n      if (this._destination.temporary) {\r\n        this._pushOrReplaceState(position, true);\r\n        return;\r\n      }\r\n      if (this._destination.hash === position.hash) {\r\n        return;\r\n      }\r\n      if (!this._destination.page && (POSITION_UPDATED_THRESHOLD <= 0 || this._numPositionUpdates <= POSITION_UPDATED_THRESHOLD)) {\r\n        return;\r\n      }\r\n      var forceReplace = false;\r\n      if (this._destination.page === position.first || this._destination.page === position.page) {\r\n        if (this._destination.dest || !this._destination.first) {\r\n          return;\r\n        }\r\n        forceReplace = true;\r\n      }\r\n      this._pushOrReplaceState(position, forceReplace);\r\n    }\r\n  }, {\r\n    key: '_isValidState',\r\n    value: function _isValidState(state) {\r\n      if (!state) {\r\n        return false;\r\n      }\r\n      if (state.fingerprint !== this.fingerprint) {\r\n        return false;\r\n      }\r\n      if (!Number.isInteger(state.uid) || state.uid < 0) {\r\n        return false;\r\n      }\r\n      if (state.destination === null || _typeof(state.destination) !== 'object') {\r\n        return false;\r\n      }\r\n      return true;\r\n    }\r\n  }, {\r\n    key: '_updateInternalState',\r\n    value: function _updateInternalState(destination, uid) {\r\n      var removeTemporary = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\r\n\r\n      if (this._updateViewareaTimeout) {\r\n        clearTimeout(this._updateViewareaTimeout);\r\n        this._updateViewareaTimeout = null;\r\n      }\r\n      if (removeTemporary && destination && destination.temporary) {\r\n        delete destination.temporary;\r\n      }\r\n      this._destination = destination;\r\n      this._uid = uid;\r\n      this._numPositionUpdates = 0;\r\n    }\r\n  }, {\r\n    key: '_updateViewarea',\r\n    value: function _updateViewarea(_ref3) {\r\n      var _this3 = this;\r\n\r\n      var location = _ref3.location;\r\n\r\n      if (this._updateViewareaTimeout) {\r\n        clearTimeout(this._updateViewareaTimeout);\r\n        this._updateViewareaTimeout = null;\r\n      }\r\n      this._position = {\r\n        hash: this._isViewerInPresentationMode ? 'page=' + location.pageNumber : location.pdfOpenParams.substring(1),\r\n        page: this.linkService.page,\r\n        first: location.pageNumber,\r\n        rotation: location.rotation\r\n      };\r\n      if (this._popStateInProgress) {\r\n        return;\r\n      }\r\n      if (POSITION_UPDATED_THRESHOLD > 0 && this._isPagesLoaded && this._destination && !this._destination.page) {\r\n        this._numPositionUpdates++;\r\n      }\r\n      if (UPDATE_VIEWAREA_TIMEOUT > 0) {\r\n        this._updateViewareaTimeout = setTimeout(function () {\r\n          if (!_this3._popStateInProgress) {\r\n            _this3._tryPushCurrentPosition(true);\r\n          }\r\n          _this3._updateViewareaTimeout = null;\r\n        }, UPDATE_VIEWAREA_TIMEOUT);\r\n      }\r\n    }\r\n  }, {\r\n    key: '_popState',\r\n    value: function _popState(_ref4) {\r\n      var _this4 = this;\r\n\r\n      var state = _ref4.state;\r\n\r\n      var newHash = getCurrentHash(),\r\n          hashChanged = this._currentHash !== newHash;\r\n      this._currentHash = newHash;\r\n      if (!state || false) {\r\n        this._uid++;\r\n\r\n        var _parseCurrentHash2 = parseCurrentHash(this.linkService),\r\n            hash = _parseCurrentHash2.hash,\r\n            page = _parseCurrentHash2.page,\r\n            rotation = _parseCurrentHash2.rotation;\r\n\r\n        this._pushOrReplaceState({\r\n          hash: hash,\r\n          page: page,\r\n          rotation: rotation\r\n        }, true);\r\n        return;\r\n      }\r\n      if (!this._isValidState(state)) {\r\n        return;\r\n      }\r\n      this._popStateInProgress = true;\r\n      if (hashChanged) {\r\n        this._blockHashChange++;\r\n        (0, _ui_utils.waitOnEventOrTimeout)({\r\n          target: window,\r\n          name: 'hashchange',\r\n          delay: HASH_CHANGE_TIMEOUT\r\n        }).then(function () {\r\n          _this4._blockHashChange--;\r\n        });\r\n      }\r\n      var destination = state.destination;\r\n      this._updateInternalState(destination, state.uid, true);\r\n      if (this._uid > this._maxUid) {\r\n        this._maxUid = this._uid;\r\n      }\r\n      if ((0, _ui_utils.isValidRotation)(destination.rotation)) {\r\n        this.linkService.rotation = destination.rotation;\r\n      }\r\n      if (destination.dest) {\r\n        this.linkService.navigateTo(destination.dest);\r\n      } else if (destination.hash) {\r\n        this.linkService.setHash(destination.hash);\r\n      } else if (destination.page) {\r\n        this.linkService.page = destination.page;\r\n      }\r\n      Promise.resolve().then(function () {\r\n        _this4._popStateInProgress = false;\r\n      });\r\n    }\r\n  }, {\r\n    key: '_bindEvents',\r\n    value: function _bindEvents() {\r\n      var _this5 = this;\r\n\r\n      var _boundEvents = this._boundEvents,\r\n          eventBus = this.eventBus;\r\n\r\n      _boundEvents.updateViewarea = this._updateViewarea.bind(this);\r\n      _boundEvents.popState = this._popState.bind(this);\r\n      _boundEvents.pageHide = function (evt) {\r\n        if (!_this5._destination || _this5._destination.temporary) {\r\n          _this5._tryPushCurrentPosition();\r\n        }\r\n      };\r\n      eventBus.on('updateviewarea', _boundEvents.updateViewarea);\r\n      window.addEventListener('popstate', _boundEvents.popState);\r\n      window.addEventListener('pagehide', _boundEvents.pageHide);\r\n    }\r\n  }, {\r\n    key: 'popStateInProgress',\r\n    get: function get() {\r\n      return this.initialized && (this._popStateInProgress || this._blockHashChange > 0);\r\n    }\r\n  }]);\r\n\r\n  return PDFHistory;\r\n}();\r\n\r\nfunction isDestHashesEqual(destHash, pushHash) {\r\n  if (typeof destHash !== 'string' || typeof pushHash !== 'string') {\r\n    return false;\r\n  }\r\n  if (destHash === pushHash) {\r\n    return true;\r\n  }\r\n\r\n  var _parseQueryString = (0, _ui_utils.parseQueryString)(destHash),\r\n      nameddest = _parseQueryString.nameddest;\r\n\r\n  if (nameddest === pushHash) {\r\n    return true;\r\n  }\r\n  return false;\r\n}\r\nfunction isDestArraysEqual(firstDest, secondDest) {\r\n  function isEntryEqual(first, second) {\r\n    if ((typeof first === 'undefined' ? 'undefined' : _typeof(first)) !== (typeof second === 'undefined' ? 'undefined' : _typeof(second))) {\r\n      return false;\r\n    }\r\n    if (first instanceof Array || second instanceof Array) {\r\n      return false;\r\n    }\r\n    if (first !== null && (typeof first === 'undefined' ? 'undefined' : _typeof(first)) === 'object' && second !== null) {\r\n      if (Object.keys(first).length !== Object.keys(second).length) {\r\n        return false;\r\n      }\r\n      for (var key in first) {\r\n        if (!isEntryEqual(first[key], second[key])) {\r\n          return false;\r\n        }\r\n      }\r\n      return true;\r\n    }\r\n    return first === second || Number.isNaN(first) && Number.isNaN(second);\r\n  }\r\n  if (!(firstDest instanceof Array && secondDest instanceof Array)) {\r\n    return false;\r\n  }\r\n  if (firstDest.length !== secondDest.length) {\r\n    return false;\r\n  }\r\n  for (var i = 0, ii = firstDest.length; i < ii; i++) {\r\n    if (!isEntryEqual(firstDest[i], secondDest[i])) {\r\n      return false;\r\n    }\r\n  }\r\n  return true;\r\n}\r\nexports.PDFHistory = PDFHistory;\r\nexports.isDestHashesEqual = isDestHashesEqual;\r\nexports.isDestArraysEqual = isDestArraysEqual;\r\n\r\n/***/ }),\r\n/* 15 */\r\n/***/ (function(module, exports, __w_pdfjs_require__) {\r\n\r\n\"use strict\";\r\n\r\n\r\nObject.defineProperty(exports, \"__esModule\", {\r\n  value: true\r\n});\r\nvar compatibilityParams = Object.create(null);\r\n{\r\n  var userAgent = typeof navigator !== 'undefined' && navigator.userAgent || '';\r\n  var isAndroid = /Android/.test(userAgent);\r\n  var isIE = /Trident/.test(userAgent);\r\n  var isIOS = /\\b(iPad|iPhone|iPod)(?=;)/.test(userAgent);\r\n  (function checkFullscreenSupport() {\r\n    if (isIE && window.parent !== window) {\r\n      compatibilityParams.disableFullscreen = true;\r\n    }\r\n  })();\r\n  (function checkCanvasSizeLimitation() {\r\n    if (isIOS || isAndroid) {\r\n      compatibilityParams.maxCanvasPixels = 5242880;\r\n    }\r\n  })();\r\n}\r\nvar viewerCompatibilityParams = Object.freeze(compatibilityParams);\r\nexports.viewerCompatibilityParams = viewerCompatibilityParams;\r\n\r\n/***/ }),\r\n/* 16 */\r\n/***/ (function(module, exports, __w_pdfjs_require__) {\r\n\r\n\"use strict\";\r\n\r\n\r\nObject.defineProperty(exports, \"__esModule\", {\r\n  value: true\r\n});\r\nexports.PDFSinglePageViewer = undefined;\r\n\r\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\r\n\r\nvar _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if (\"value\" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };\r\n\r\nvar _base_viewer = __w_pdfjs_require__(8);\r\n\r\nvar _ui_utils = __w_pdfjs_require__(0);\r\n\r\nvar _pdfjsLib = __w_pdfjs_require__(1);\r\n\r\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\r\n\r\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\r\n\r\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\r\n\r\nvar PDFSinglePageViewer = function (_BaseViewer) {\r\n  _inherits(PDFSinglePageViewer, _BaseViewer);\r\n\r\n  function PDFSinglePageViewer(options) {\r\n    _classCallCheck(this, PDFSinglePageViewer);\r\n\r\n    var _this = _possibleConstructorReturn(this, (PDFSinglePageViewer.__proto__ || Object.getPrototypeOf(PDFSinglePageViewer)).call(this, options));\r\n\r\n    _this.eventBus.on('pagesinit', function (evt) {\r\n      _this._ensurePageViewVisible();\r\n    });\r\n    return _this;\r\n  }\r\n\r\n  _createClass(PDFSinglePageViewer, [{\r\n    key: '_resetView',\r\n    value: function _resetView() {\r\n      _get(PDFSinglePageViewer.prototype.__proto__ || Object.getPrototypeOf(PDFSinglePageViewer.prototype), '_resetView', this).call(this);\r\n      this._previousPageNumber = 1;\r\n      this._shadowViewer = document.createDocumentFragment();\r\n    }\r\n  }, {\r\n    key: '_ensurePageViewVisible',\r\n    value: function _ensurePageViewVisible() {\r\n      var pageView = this._pages[this._currentPageNumber - 1];\r\n      var previousPageView = this._pages[this._previousPageNumber - 1];\r\n      var viewerNodes = this.viewer.childNodes;\r\n      switch (viewerNodes.length) {\r\n        case 0:\r\n          this.viewer.appendChild(pageView.div);\r\n          break;\r\n        case 1:\r\n          if (viewerNodes[0] !== previousPageView.div) {\r\n            throw new Error('_ensurePageViewVisible: Unexpected previously visible page.');\r\n          }\r\n          if (pageView === previousPageView) {\r\n            break;\r\n          }\r\n          this._shadowViewer.appendChild(previousPageView.div);\r\n          this.viewer.appendChild(pageView.div);\r\n          this.container.scrollTop = 0;\r\n          break;\r\n        default:\r\n          throw new Error('_ensurePageViewVisible: Only one page should be visible at a time.');\r\n      }\r\n      this._previousPageNumber = this._currentPageNumber;\r\n    }\r\n  }, {\r\n    key: '_scrollUpdate',\r\n    value: function _scrollUpdate() {\r\n      if (this._updateScrollDown) {\r\n        this._updateScrollDown();\r\n      }\r\n      _get(PDFSinglePageViewer.prototype.__proto__ || Object.getPrototypeOf(PDFSinglePageViewer.prototype), '_scrollUpdate', this).call(this);\r\n    }\r\n  }, {\r\n    key: '_scrollIntoView',\r\n    value: function _scrollIntoView(_ref) {\r\n      var _this2 = this;\r\n\r\n      var pageDiv = _ref.pageDiv,\r\n          _ref$pageSpot = _ref.pageSpot,\r\n          pageSpot = _ref$pageSpot === undefined ? null : _ref$pageSpot,\r\n          _ref$pageNumber = _ref.pageNumber,\r\n          pageNumber = _ref$pageNumber === undefined ? null : _ref$pageNumber;\r\n\r\n      if (pageNumber) {\r\n        this._setCurrentPageNumber(pageNumber);\r\n      }\r\n      var scrolledDown = this._currentPageNumber >= this._previousPageNumber;\r\n      var previousLocation = this._location;\r\n      this._ensurePageViewVisible();\r\n      (0, _ui_utils.scrollIntoView)(pageDiv, pageSpot);\r\n      this._updateScrollDown = function () {\r\n        _this2.scroll.down = scrolledDown;\r\n        delete _this2._updateScrollDown;\r\n      };\r\n      setTimeout(function () {\r\n        if (_this2._location === previousLocation) {\r\n          if (_this2._updateScrollDown) {\r\n            _this2._updateScrollDown();\r\n          }\r\n          _this2.update();\r\n        }\r\n      }, 0);\r\n    }\r\n  }, {\r\n    key: '_getVisiblePages',\r\n    value: function _getVisiblePages() {\r\n      if (!this.pagesCount) {\r\n        return { views: [] };\r\n      }\r\n      var pageView = this._pages[this._currentPageNumber - 1];\r\n      var element = pageView.div;\r\n      var view = {\r\n        id: pageView.id,\r\n        x: element.offsetLeft + element.clientLeft,\r\n        y: element.offsetTop + element.clientTop,\r\n        view: pageView\r\n      };\r\n      return {\r\n        first: view,\r\n        last: view,\r\n        views: [view]\r\n      };\r\n    }\r\n  }, {\r\n    key: 'update',\r\n    value: function update() {\r\n      var visible = this._getVisiblePages();\r\n      var visiblePages = visible.views,\r\n          numVisiblePages = visiblePages.length;\r\n      if (numVisiblePages === 0) {\r\n        return;\r\n      }\r\n      this._resizeBuffer(numVisiblePages);\r\n      this.renderingQueue.renderHighestPriority(visible);\r\n      this._updateLocation(visible.first);\r\n      this.eventBus.dispatch('updateviewarea', {\r\n        source: this,\r\n        location: this._location\r\n      });\r\n    }\r\n  }, {\r\n    key: '_setDocumentViewerElement',\r\n    get: function get() {\r\n      return (0, _pdfjsLib.shadow)(this, '_setDocumentViewerElement', this._shadowViewer);\r\n    }\r\n  }]);\r\n\r\n  return PDFSinglePageViewer;\r\n}(_base_viewer.BaseViewer);\r\n\r\nexports.PDFSinglePageViewer = PDFSinglePageViewer;\r\n\r\n/***/ }),\r\n/* 17 */\r\n/***/ (function(module, exports, __w_pdfjs_require__) {\r\n\r\n\"use strict\";\r\n\r\n\r\nObject.defineProperty(exports, \"__esModule\", {\r\n  value: true\r\n});\r\nexports.PDFViewer = undefined;\r\n\r\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\r\n\r\nvar _ui_utils = __w_pdfjs_require__(0);\r\n\r\nvar _base_viewer = __w_pdfjs_require__(8);\r\n\r\nvar _pdfjsLib = __w_pdfjs_require__(1);\r\n\r\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\r\n\r\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\r\n\r\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\r\n\r\nvar PDFViewer = function (_BaseViewer) {\r\n  _inherits(PDFViewer, _BaseViewer);\r\n\r\n  function PDFViewer() {\r\n    _classCallCheck(this, PDFViewer);\r\n\r\n    return _possibleConstructorReturn(this, (PDFViewer.__proto__ || Object.getPrototypeOf(PDFViewer)).apply(this, arguments));\r\n  }\r\n\r\n  _createClass(PDFViewer, [{\r\n    key: '_scrollIntoView',\r\n    value: function _scrollIntoView(_ref) {\r\n      var pageDiv = _ref.pageDiv,\r\n          _ref$pageSpot = _ref.pageSpot,\r\n          pageSpot = _ref$pageSpot === undefined ? null : _ref$pageSpot;\r\n\r\n      (0, _ui_utils.scrollIntoView)(pageDiv, pageSpot);\r\n    }\r\n  }, {\r\n    key: '_getVisiblePages',\r\n    value: function _getVisiblePages() {\r\n      if (!this.isInPresentationMode) {\r\n        return (0, _ui_utils.getVisibleElements)(this.container, this._pages, true);\r\n      }\r\n      var currentPage = this._pages[this._currentPageNumber - 1];\r\n      var visible = [{\r\n        id: currentPage.id,\r\n        view: currentPage\r\n      }];\r\n      return {\r\n        first: currentPage,\r\n        last: currentPage,\r\n        views: visible\r\n      };\r\n    }\r\n  }, {\r\n    key: 'update',\r\n    value: function update() {\r\n      var visible = this._getVisiblePages();\r\n      var visiblePages = visible.views,\r\n          numVisiblePages = visiblePages.length;\r\n      if (numVisiblePages === 0) {\r\n        return;\r\n      }\r\n      this._resizeBuffer(numVisiblePages);\r\n      this.renderingQueue.renderHighestPriority(visible);\r\n      var currentId = this._currentPageNumber;\r\n      var stillFullyVisible = false;\r\n      for (var i = 0; i < numVisiblePages; ++i) {\r\n        var page = visiblePages[i];\r\n        if (page.percent < 100) {\r\n          break;\r\n        }\r\n        if (page.id === currentId) {\r\n          stillFullyVisible = true;\r\n          break;\r\n        }\r\n      }\r\n      if (!stillFullyVisible) {\r\n        currentId = visiblePages[0].id;\r\n      }\r\n      if (!this.isInPresentationMode) {\r\n        this._setCurrentPageNumber(currentId);\r\n      }\r\n      this._updateLocation(visible.first);\r\n      this.eventBus.dispatch('updateviewarea', {\r\n        source: this,\r\n        location: this._location\r\n      });\r\n    }\r\n  }, {\r\n    key: '_setDocumentViewerElement',\r\n    get: function get() {\r\n      return (0, _pdfjsLib.shadow)(this, '_setDocumentViewerElement', this.viewer);\r\n    }\r\n  }]);\r\n\r\n  return PDFViewer;\r\n}(_base_viewer.BaseViewer);\r\n\r\nexports.PDFViewer = PDFViewer;\r\n\r\n/***/ })\r\n/******/ ]);\r\n});\r\n//# sourceMappingURL=pdf_viewer.js.map",null]}