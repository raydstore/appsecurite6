<div class="container">
  <div class="form-group row" *ngIf="mode === 1">
    <label for="chid1" class="col-sm-2 col-form-label">id : </label>
    <div class="col-sm-4">
      <input type="text" class="form-control" id="chid1" [value]="item.id" placeholder="Identificateur" readonly>
    </div>
  </div>
  <div class="form-group row">
    <label for="chclassification" class="col-sm-2 col-form-label">classification : </label>
    <div class="col-sm-4">
      <p-radioButton name="grClassification" value="A" label="Accident  " [(ngModel)]="item.classification">
      </p-radioButton>
      <p-radioButton name="grClassification" value="I" label="Incident  " [(ngModel)]="item.classification">
      </p-radioButton>
    </div>
    <label for="chcurdate" class="col-sm-1 col-form-label">date : </label>
    <div class="col-sm-5">
      <app-calendar id="chcurdate" [date]="item.curdate" [isTime]="true" [dateFormat]="'    le : dd/mm/yy       à : '"
        (changeDate)="onChangeDate(item, $event)"></app-calendar>
      <input type="hidden" [(ngModel)]="newid" value="item.curdate | date : 'yyMMddHHmmss'">
    </div>
  </div>
  <div class="form-group row">
    <label for="chidsite" class="col-sm-2 col-form-label">site : </label>
    <div class="col-sm-10">
      <app-autocomplete [i_item]="item.idsite" [service]="sites" [functionName]="displayNameSite" [args]="['name']"
        (changeItem)="onChangeSiteOfItem(item, 'idsite', $event)"></app-autocomplete>
    </div>
  </div>
  <div class="form-group row">
    <label for="chplace" class="col-sm-2 col-form-label">lieu</label>
    <div class="col-sm-10">
      <input type="text" class="form-control" id="chplace" [(ngModel)]="item.place" placeholder="lieu" #place>
    </div>
  </div>
  <div class="form-group row">
    <label for="chdescription" class="col-sm-2 col-form-label">description lieu</label>
    <div class="col-sm-10">
      <input type="text" class="form-control" id="chdescription" [(ngModel)]="item.sitedescription"
        placeholder="la description du site" #name>
    </div>
  </div>

  <p-tabView>
    <p-tabPanel header="Victime / l'objet">
      <div class="form-group row">
        <label for="chplace" class="col-sm-2 col-form-label">l'objet</label>
        <div class="col-sm-10">
          <input type="text" class="form-control" id="chplace" [(ngModel)]="item.subject" placeholder="objet">
        </div>
      </div>
      <div class="form-group row" id="chobiousecause">
        <div class="card text-white bg-secondary col-sm-12" style="height: 160px;">
          <div class="card-header">
            Victimes
          </div>
          <textarea rows="3" cols="60" pInputTextarea [(ngModel)]="item.victim"></textarea>
        </div>
      </div>
    </p-tabPanel>
    <p-tabPanel header="Approfondé" *ngIf="mode === 1">
      <div class="form-group row">
        <label for="chevent" class="col-sm-2 col-form-label">description evenement</label>
        <div class="col-sm-10">
          <textarea rows="3" cols="65" pInputTextarea [(ngModel)]="item.event"></textarea>
        </div>
      </div>
      <h5 class="">Description des dommages avérés et potentiels</h5>
      <div class="carddamage">
        <div class="card text-white bg-secondary col-sm-4" style="height: 160px;">
          <div class="card-header">
            Personnes
          </div>
          <textarea rows="3" cols="20" pInputTextarea [(ngModel)]="item.persondamage"></textarea>
        </div>
        <div class="card text-white bg-secondary col-sm-4" style="height: 160px;">
          <div class="card-header">
            Biens
          </div>
          <textarea rows="3" cols="20" pInputTextarea [(ngModel)]="item.propertydamage"></textarea>
        </div>
        <div class="card text-white bg-secondary col-sm-4" style="height: 160px;">
          <div class="card-header">
            Envirenement
          </div>
          <textarea rows="3" cols="20" pInputTextarea [(ngModel)]="item.envirenementdamage"></textarea>
        </div>
      </div>

    </p-tabPanel>
    <p-tabPanel header="Préliminaire">
      <div class="form-group row">
        <label for="chevent" class="col-sm-2 col-form-label">description evenement</label>
        <div class="col-sm-8">
          <textarea rows="3" cols="65" pInputTextarea [(ngModel)]="item.pevent"></textarea>
        </div>
      </div>
      <h5 class="">Description des dommages avérés et potentiels</h5>
      <div class="carddamage">
        <div class="card text-white bg-secondary col-sm-4" style="height: 160px;">
          <div class="card-header">
            Personnes
          </div>
          <textarea rows="3" cols="20" pInputTextarea [(ngModel)]="item.ppersondamage"></textarea>
        </div>
        <div class="card text-white bg-secondary col-sm-4" style="height: 160px;">
          <div class="card-header">
            Biens
          </div>
          <textarea rows="3" cols="20" pInputTextarea [(ngModel)]="item.ppropertydamage"></textarea>
        </div>
        <div class="card text-white bg-secondary col-sm-4" style="height: 160px;">
          <div class="card-header">
            Envirenement
          </div>
          <textarea rows="3" cols="20" pInputTextarea [(ngModel)]="item.penvirenementdamage"></textarea>
        </div>
      </div>
    </p-tabPanel>
    <p-tabPanel header="Cause évidante">
      <div class="form-group row" id="chobiousecause">
        <div class="card text-white bg-secondary col-sm-12" style="height: 160px;">
          <div class="card-header">
            liste
          </div>
          <textarea rows="3" cols="60" pInputTextarea [(ngModel)]="item.obviouscause"></textarea>
        </div>
      </div>
    </p-tabPanel>
  </p-tabView>
  <div class="form-group row cldecval">
    <label for="chidagentdeclare" class="col-sm-2 col-form-label">déclarateur : </label>
    <div class="col-sm-4">
        <input  class="form-control" type="text" [value]="displayNameAgent(item.idagentdeclare, ['firstname', 'lastname'])" readonly="true">
    </div>
    <label for="chidagentvalidate" class="col-sm-2 col-form-label">Validateur : </label>
    <div class="col-sm-4">
        <input  class="form-control" type="text" [value]="displayNameAgent(item.idagentvalidate, ['firstname', 'lastname'])" readonly="true">
    </div>
  </div>
  <div class="clupdate">
    <button class="btn btn-success" (click)="perform(item, $event)">
      <i class="fa fa-check">Valider</i>
    </button>
    <button class="btn btn-warning" (click)="cancel(item)">
      <i class="fa fa-times">Annuler</i>
    </button>
  </div>
